(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function e0(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var xh={exports:{}},sa={},Nh={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function t0(){if(mm)return Re;mm=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.iterator;function S(O){return O===null||typeof O!="object"?null:(O=A&&O[A]||O["@@iterator"],typeof O=="function"?O:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,B={};function U(O,K,fe){this.props=O,this.context=K,this.refs=B,this.updater=fe||V}U.prototype.isReactComponent={},U.prototype.setState=function(O,K){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,K,"setState")},U.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function H(){}H.prototype=U.prototype;function X(O,K,fe){this.props=O,this.context=K,this.refs=B,this.updater=fe||V}var ne=X.prototype=new H;ne.constructor=X,b(ne,U.prototype),ne.isPureReactComponent=!0;var de=Array.isArray,Ie=Object.prototype.hasOwnProperty,Ee={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(O,K,fe){var Se,Ae={},Ne=null,Me=null;if(K!=null)for(Se in K.ref!==void 0&&(Me=K.ref),K.key!==void 0&&(Ne=""+K.key),K)Ie.call(K,Se)&&!P.hasOwnProperty(Se)&&(Ae[Se]=K[Se]);var be=arguments.length-2;if(be===1)Ae.children=fe;else if(1<be){for(var qe=Array(be),yt=0;yt<be;yt++)qe[yt]=arguments[yt+2];Ae.children=qe}if(O&&O.defaultProps)for(Se in be=O.defaultProps,be)Ae[Se]===void 0&&(Ae[Se]=be[Se]);return{$$typeof:i,type:O,key:Ne,ref:Me,props:Ae,_owner:Ee.current}}function I(O,K){return{$$typeof:i,type:O.type,key:K,ref:O.ref,props:O.props,_owner:O._owner}}function k(O){return typeof O=="object"&&O!==null&&O.$$typeof===i}function N(O){var K={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(fe){return K[fe]})}var L=/\/+/g;function C(O,K){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):K.toString(36)}function $e(O,K,fe,Se,Ae){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var Me=!1;if(O===null)Me=!0;else switch(Ne){case"string":case"number":Me=!0;break;case"object":switch(O.$$typeof){case i:case e:Me=!0}}if(Me)return Me=O,Ae=Ae(Me),O=Se===""?"."+C(Me,0):Se,de(Ae)?(fe="",O!=null&&(fe=O.replace(L,"$&/")+"/"),$e(Ae,K,fe,"",function(yt){return yt})):Ae!=null&&(k(Ae)&&(Ae=I(Ae,fe+(!Ae.key||Me&&Me.key===Ae.key?"":(""+Ae.key).replace(L,"$&/")+"/")+O)),K.push(Ae)),1;if(Me=0,Se=Se===""?".":Se+":",de(O))for(var be=0;be<O.length;be++){Ne=O[be];var qe=Se+C(Ne,be);Me+=$e(Ne,K,fe,qe,Ae)}else if(qe=S(O),typeof qe=="function")for(O=qe.call(O),be=0;!(Ne=O.next()).done;)Ne=Ne.value,qe=Se+C(Ne,be++),Me+=$e(Ne,K,fe,qe,Ae);else if(Ne==="object")throw K=String(O),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Me}function xt(O,K,fe){if(O==null)return O;var Se=[],Ae=0;return $e(O,Se,"","",function(Ne){return K.call(fe,Ne,Ae++)}),Se}function Nt(O){if(O._status===-1){var K=O._result;K=K(),K.then(function(fe){(O._status===0||O._status===-1)&&(O._status=1,O._result=fe)},function(fe){(O._status===0||O._status===-1)&&(O._status=2,O._result=fe)}),O._status===-1&&(O._status=0,O._result=K)}if(O._status===1)return O._result.default;throw O._result}var je={current:null},te={transition:null},me={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:te,ReactCurrentOwner:Ee};function ie(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:xt,forEach:function(O,K,fe){xt(O,function(){K.apply(this,arguments)},fe)},count:function(O){var K=0;return xt(O,function(){K++}),K},toArray:function(O){return xt(O,function(K){return K})||[]},only:function(O){if(!k(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Re.Component=U,Re.Fragment=t,Re.Profiler=o,Re.PureComponent=X,Re.StrictMode=s,Re.Suspense=g,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Re.act=ie,Re.cloneElement=function(O,K,fe){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var Se=b({},O.props),Ae=O.key,Ne=O.ref,Me=O._owner;if(K!=null){if(K.ref!==void 0&&(Ne=K.ref,Me=Ee.current),K.key!==void 0&&(Ae=""+K.key),O.type&&O.type.defaultProps)var be=O.type.defaultProps;for(qe in K)Ie.call(K,qe)&&!P.hasOwnProperty(qe)&&(Se[qe]=K[qe]===void 0&&be!==void 0?be[qe]:K[qe])}var qe=arguments.length-2;if(qe===1)Se.children=fe;else if(1<qe){be=Array(qe);for(var yt=0;yt<qe;yt++)be[yt]=arguments[yt+2];Se.children=be}return{$$typeof:i,type:O.type,key:Ae,ref:Ne,props:Se,_owner:Me}},Re.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:u,_context:O},O.Consumer=O},Re.createElement=T,Re.createFactory=function(O){var K=T.bind(null,O);return K.type=O,K},Re.createRef=function(){return{current:null}},Re.forwardRef=function(O){return{$$typeof:f,render:O}},Re.isValidElement=k,Re.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:Nt}},Re.memo=function(O,K){return{$$typeof:y,type:O,compare:K===void 0?null:K}},Re.startTransition=function(O){var K=te.transition;te.transition={};try{O()}finally{te.transition=K}},Re.unstable_act=ie,Re.useCallback=function(O,K){return je.current.useCallback(O,K)},Re.useContext=function(O){return je.current.useContext(O)},Re.useDebugValue=function(){},Re.useDeferredValue=function(O){return je.current.useDeferredValue(O)},Re.useEffect=function(O,K){return je.current.useEffect(O,K)},Re.useId=function(){return je.current.useId()},Re.useImperativeHandle=function(O,K,fe){return je.current.useImperativeHandle(O,K,fe)},Re.useInsertionEffect=function(O,K){return je.current.useInsertionEffect(O,K)},Re.useLayoutEffect=function(O,K){return je.current.useLayoutEffect(O,K)},Re.useMemo=function(O,K){return je.current.useMemo(O,K)},Re.useReducer=function(O,K,fe){return je.current.useReducer(O,K,fe)},Re.useRef=function(O){return je.current.useRef(O)},Re.useState=function(O){return je.current.useState(O)},Re.useSyncExternalStore=function(O,K,fe){return je.current.useSyncExternalStore(O,K,fe)},Re.useTransition=function(){return je.current.useTransition()},Re.version="18.3.1",Re}var gm;function wd(){return gm||(gm=1,Nh.exports=t0()),Nh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function n0(){if(ym)return sa;ym=1;var i=wd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(f,g,y){var E,A={},S=null,V=null;y!==void 0&&(S=""+y),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(V=g.ref);for(E in g)s.call(g,E)&&!u.hasOwnProperty(E)&&(A[E]=g[E]);if(f&&f.defaultProps)for(E in g=f.defaultProps,g)A[E]===void 0&&(A[E]=g[E]);return{$$typeof:e,type:f,key:S,ref:V,props:A,_owner:o.current}}return sa.Fragment=t,sa.jsx=h,sa.jsxs=h,sa}var _m;function r0(){return _m||(_m=1,xh.exports=n0()),xh.exports}var he=r0(),q=wd();const i0=e0(q);var tu={},Dh={exports:{}},Yt={},Vh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function s0(){return vm||(vm=1,function(i){function e(te,me){var ie=te.length;te.push(me);e:for(;0<ie;){var O=ie-1>>>1,K=te[O];if(0<o(K,me))te[O]=me,te[ie]=K,ie=O;else break e}}function t(te){return te.length===0?null:te[0]}function s(te){if(te.length===0)return null;var me=te[0],ie=te.pop();if(ie!==me){te[0]=ie;e:for(var O=0,K=te.length,fe=K>>>1;O<fe;){var Se=2*(O+1)-1,Ae=te[Se],Ne=Se+1,Me=te[Ne];if(0>o(Ae,ie))Ne<K&&0>o(Me,Ae)?(te[O]=Me,te[Ne]=ie,O=Ne):(te[O]=Ae,te[Se]=ie,O=Se);else if(Ne<K&&0>o(Me,ie))te[O]=Me,te[Ne]=ie,O=Ne;else break e}}return me}function o(te,me){var ie=te.sortIndex-me.sortIndex;return ie!==0?ie:te.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,f=h.now();i.unstable_now=function(){return h.now()-f}}var g=[],y=[],E=1,A=null,S=3,V=!1,b=!1,B=!1,U=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(te){for(var me=t(y);me!==null;){if(me.callback===null)s(y);else if(me.startTime<=te)s(y),me.sortIndex=me.expirationTime,e(g,me);else break;me=t(y)}}function de(te){if(B=!1,ne(te),!b)if(t(g)!==null)b=!0,Nt(Ie);else{var me=t(y);me!==null&&je(de,me.startTime-te)}}function Ie(te,me){b=!1,B&&(B=!1,H(T),T=-1),V=!0;var ie=S;try{for(ne(me),A=t(g);A!==null&&(!(A.expirationTime>me)||te&&!N());){var O=A.callback;if(typeof O=="function"){A.callback=null,S=A.priorityLevel;var K=O(A.expirationTime<=me);me=i.unstable_now(),typeof K=="function"?A.callback=K:A===t(g)&&s(g),ne(me)}else s(g);A=t(g)}if(A!==null)var fe=!0;else{var Se=t(y);Se!==null&&je(de,Se.startTime-me),fe=!1}return fe}finally{A=null,S=ie,V=!1}}var Ee=!1,P=null,T=-1,I=5,k=-1;function N(){return!(i.unstable_now()-k<I)}function L(){if(P!==null){var te=i.unstable_now();k=te;var me=!0;try{me=P(!0,te)}finally{me?C():(Ee=!1,P=null)}}else Ee=!1}var C;if(typeof X=="function")C=function(){X(L)};else if(typeof MessageChannel<"u"){var $e=new MessageChannel,xt=$e.port2;$e.port1.onmessage=L,C=function(){xt.postMessage(null)}}else C=function(){U(L,0)};function Nt(te){P=te,Ee||(Ee=!0,C())}function je(te,me){T=U(function(){te(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(te){te.callback=null},i.unstable_continueExecution=function(){b||V||(b=!0,Nt(Ie))},i.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<te?Math.floor(1e3/te):5},i.unstable_getCurrentPriorityLevel=function(){return S},i.unstable_getFirstCallbackNode=function(){return t(g)},i.unstable_next=function(te){switch(S){case 1:case 2:case 3:var me=3;break;default:me=S}var ie=S;S=me;try{return te()}finally{S=ie}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(te,me){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var ie=S;S=te;try{return me()}finally{S=ie}},i.unstable_scheduleCallback=function(te,me,ie){var O=i.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?O+ie:O):ie=O,te){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ie+K,te={id:E++,callback:me,priorityLevel:te,startTime:ie,expirationTime:K,sortIndex:-1},ie>O?(te.sortIndex=ie,e(y,te),t(g)===null&&te===t(y)&&(B?(H(T),T=-1):B=!0,je(de,ie-O))):(te.sortIndex=K,e(g,te),b||V||(b=!0,Nt(Ie))),te},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(te){var me=S;return function(){var ie=S;S=me;try{return te.apply(this,arguments)}finally{S=ie}}}}(Lh)),Lh}var Em;function o0(){return Em||(Em=1,Vh.exports=s0()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function a0(){if(wm)return Yt;wm=1;var i=wd(),e=o0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)s.add(r[n])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},A={};function S(n){return g.call(A,n)?!0:g.call(E,n)?!1:y.test(n)?A[n]=!0:(E[n]=!0,!1)}function V(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function b(n,r,a,c){if(r===null||typeof r>"u"||V(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function B(n,r,a,c,d,m,v){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=m,this.removeEmptyString=v}var U={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){U[n]=new B(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];U[r]=new B(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){U[n]=new B(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){U[n]=new B(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){U[n]=new B(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){U[n]=new B(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){U[n]=new B(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){U[n]=new B(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){U[n]=new B(n,5,!1,n.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function X(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(H,X);U[r]=new B(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(H,X);U[r]=new B(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(H,X);U[r]=new B(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){U[n]=new B(n,1,!1,n.toLowerCase(),null,!1,!1)}),U.xlinkHref=new B("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){U[n]=new B(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,r,a,c){var d=U.hasOwnProperty(r)?U[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(b(r,a,d,c)&&(a=null),c||d===null?S(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var de=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),N=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),$e=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),te=Symbol.iterator;function me(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,O;function K(n){if(O===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);O=r&&r[1]||""}return`
`+O+n}var fe=!1;function Se(n,r){if(!n||fe)return"";fe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(j){var c=j}Reflect.construct(n,[],r)}else{try{r.call()}catch(j){c=j}n.call(r.prototype)}else{try{throw Error()}catch(j){c=j}n()}}catch(j){if(j&&c&&typeof j.stack=="string"){for(var d=j.stack.split(`
`),m=c.stack.split(`
`),v=d.length-1,R=m.length-1;1<=v&&0<=R&&d[v]!==m[R];)R--;for(;1<=v&&0<=R;v--,R--)if(d[v]!==m[R]){if(v!==1||R!==1)do if(v--,R--,0>R||d[v]!==m[R]){var x=`
`+d[v].replace(" at new "," at ");return n.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",n.displayName)),x}while(1<=v&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Ae(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Se(n.type,!1),n;case 11:return n=Se(n.type.render,!1),n;case 1:return n=Se(n.type,!0),n;default:return""}}function Ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case Ee:return"Portal";case I:return"Profiler";case T:return"StrictMode";case C:return"Suspense";case $e:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case N:return(n.displayName||"Context")+".Consumer";case k:return(n._context.displayName||"Context")+".Provider";case L:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xt:return r=n.displayName||null,r!==null?r:Ne(n.type)||"Memo";case Nt:r=n._payload,n=n._init;try{return Ne(n(r))}catch{}}return null}function Me(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function be(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function qe(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(n){var r=qe(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(v){c=""+v,m.call(this,v)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function er(n){n._valueTracker||(n._valueTracker=yt(n))}function Xi(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=qe(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function Ar(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function fi(n,r){var a=r.checked;return ie({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Yi(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=be(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function co(n,r){r=r.checked,r!=null&&ne(n,"checked",r,!1)}function ho(n,r){co(n,r);var a=be(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?Ji(n,r.type,a):r.hasOwnProperty("defaultValue")&&Ji(n,r.type,be(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function za(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function Ji(n,r,a){(r!=="number"||Ar(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var tr=Array.isArray;function nr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+be(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function fo(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Zi(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(tr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:be(a)}}function es(n,r){var a=be(r.value),c=be(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function po(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function ct(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ht(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?ct(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var rr,mo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(rr=rr||document.createElement("div"),rr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=rr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Rr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mi=["Webkit","ms","Moz","O"];Object.keys(pi).forEach(function(n){mi.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),pi[r]=pi[n]})});function go(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||pi.hasOwnProperty(n)&&pi[n]?(""+r).trim():r+"px"}function yo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=go(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var _o=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vo(n,r){if(r){if(_o[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Eo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gi=null;function ts(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ns=null,cn=null,bn=null;function rs(n){if(n=qo(n)){if(typeof ns!="function")throw Error(t(280));var r=n.stateNode;r&&(r=gl(r),ns(n.stateNode,n.type,r))}}function Fn(n){cn?bn?bn.push(n):bn=[n]:cn=n}function wo(){if(cn){var n=cn,r=bn;if(bn=cn=null,rs(n),r)for(n=0;n<r.length;n++)rs(r[n])}}function yi(n,r){return n(r)}function To(){}var ir=!1;function Io(n,r,a){if(ir)return n(r,a);ir=!0;try{return yi(n,r,a)}finally{ir=!1,(cn!==null||bn!==null)&&(To(),wo())}}function rt(n,r){var a=n.stateNode;if(a===null)return null;var c=gl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var is=!1;if(f)try{var En={};Object.defineProperty(En,"passive",{get:function(){is=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{is=!1}function _i(n,r,a,c,d,m,v,R,x){var j=Array.prototype.slice.call(arguments,3);try{r.apply(a,j)}catch(Y){this.onError(Y)}}var vi=!1,ss=null,wn=!1,So=null,ic={onError:function(n){vi=!0,ss=n}};function os(n,r,a,c,d,m,v,R,x){vi=!1,ss=null,_i.apply(ic,arguments)}function ja(n,r,a,c,d,m,v,R,x){if(os.apply(this,arguments),vi){if(vi){var j=ss;vi=!1,ss=null}else throw Error(t(198));wn||(wn=!0,So=j)}}function Tn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,r.flags&4098&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Ei(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function In(n){if(Tn(n)!==n)throw Error(t(188))}function Ba(n){var r=n.alternate;if(!r){if(r=Tn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return In(d),n;if(m===c)return In(d),r;m=m.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=m;else{for(var v=!1,R=d.child;R;){if(R===a){v=!0,a=d,c=m;break}if(R===c){v=!0,c=d,a=m;break}R=R.sibling}if(!v){for(R=m.child;R;){if(R===a){v=!0,a=m,c=d;break}if(R===c){v=!0,c=m,a=d;break}R=R.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Ao(n){return n=Ba(n),n!==null?as(n):null}function as(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=as(n);if(r!==null)return r;n=n.sibling}return null}var ls=e.unstable_scheduleCallback,Ro=e.unstable_cancelCallback,$a=e.unstable_shouldYield,sc=e.unstable_requestPaint,He=e.unstable_now,qa=e.unstable_getCurrentPriorityLevel,wi=e.unstable_ImmediatePriority,Cr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Co=e.unstable_LowPriority,Ha=e.unstable_IdlePriority,Ti=null,en=null;function Wa(n){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(Ti,n,void 0,(n.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Qa,Po=Math.log,Ka=Math.LN2;function Qa(n){return n>>>=0,n===0?32:31-(Po(n)/Ka|0)|0}var us=64,cs=4194304;function Pr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ii(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,m=n.pingedLanes,v=a&268435455;if(v!==0){var R=v&~d;R!==0?c=Pr(R):(m&=v,m!==0&&(c=Pr(m)))}else v=a&~d,v!==0?c=Pr(v):m!==0&&(c=Pr(m));if(c===0)return 0;if(r!==0&&r!==c&&!(r&d)&&(d=c&-c,m=r&-r,d>=m||d===16&&(m&4194240)!==0))return r;if(c&4&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Ut(r),d=1<<a,c|=n[a],r&=~d;return c}function oc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,m=n.pendingLanes;0<m;){var v=31-Ut(m),R=1<<v,x=d[v];x===-1?(!(R&a)||R&c)&&(d[v]=oc(R,r)):x<=r&&(n.expiredLanes|=R),m&=~R}}function tn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Si(){var n=us;return us<<=1,!(us&4194240)&&(us=64),n}function kr(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function xr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Ut(r),n[r]=a}function Be(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Ut(a),m=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~m}}function Nr(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Ut(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var ke=0;function Dr(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var Ga,hs,Xa,Ya,Ja,ko=!1,Un=[],It=null,Sn=null,An=null,Vr=new Map,dn=new Map,zn=[],ac="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Za(n,r){switch(n){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Vr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(r.pointerId)}}function qt(n,r,a,c,d,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[d]},r!==null&&(r=qo(r),r!==null&&hs(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function lc(n,r,a,c,d){switch(r){case"focusin":return It=qt(It,n,r,a,c,d),!0;case"dragenter":return Sn=qt(Sn,n,r,a,c,d),!0;case"mouseover":return An=qt(An,n,r,a,c,d),!0;case"pointerover":var m=d.pointerId;return Vr.set(m,qt(Vr.get(m)||null,n,r,a,c,d)),!0;case"gotpointercapture":return m=d.pointerId,dn.set(m,qt(dn.get(m)||null,n,r,a,c,d)),!0}return!1}function el(n){var r=ki(n.target);if(r!==null){var a=Tn(r);if(a!==null){if(r=a.tag,r===13){if(r=Ei(a),r!==null){n.blockedOn=r,Ja(n.priority,function(){Xa(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function or(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=ds(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);gi=c,a.target.dispatchEvent(c),gi=null}else return r=qo(a),r!==null&&hs(r),n.blockedOn=a,!1;r.shift()}return!0}function Ai(n,r,a){or(n)&&a.delete(r)}function tl(){ko=!1,It!==null&&or(It)&&(It=null),Sn!==null&&or(Sn)&&(Sn=null),An!==null&&or(An)&&(An=null),Vr.forEach(Ai),dn.forEach(Ai)}function Rn(n,r){n.blockedOn===r&&(n.blockedOn=null,ko||(ko=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tl)))}function Cn(n){function r(d){return Rn(d,n)}if(0<Un.length){Rn(Un[0],n);for(var a=1;a<Un.length;a++){var c=Un[a];c.blockedOn===n&&(c.blockedOn=null)}}for(It!==null&&Rn(It,n),Sn!==null&&Rn(Sn,n),An!==null&&Rn(An,n),Vr.forEach(r),dn.forEach(r),a=0;a<zn.length;a++)c=zn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<zn.length&&(a=zn[0],a.blockedOn===null);)el(a),a.blockedOn===null&&zn.shift()}var ar=de.ReactCurrentBatchConfig,Lr=!0;function Xe(n,r,a,c){var d=ke,m=ar.transition;ar.transition=null;try{ke=1,xo(n,r,a,c)}finally{ke=d,ar.transition=m}}function uc(n,r,a,c){var d=ke,m=ar.transition;ar.transition=null;try{ke=4,xo(n,r,a,c)}finally{ke=d,ar.transition=m}}function xo(n,r,a,c){if(Lr){var d=ds(n,r,a,c);if(d===null)Ec(n,r,c,Ri,a),Za(n,c);else if(lc(d,n,r,a,c))c.stopPropagation();else if(Za(n,c),r&4&&-1<ac.indexOf(n)){for(;d!==null;){var m=qo(d);if(m!==null&&Ga(m),m=ds(n,r,a,c),m===null&&Ec(n,r,c,Ri,a),m===d)break;d=m}d!==null&&c.stopPropagation()}else Ec(n,r,c,null,a)}}var Ri=null;function ds(n,r,a,c){if(Ri=null,n=ts(c),n=ki(n),n!==null)if(r=Tn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Ei(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Ri=n,null}function No(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qa()){case wi:return 1;case Cr:return 4;case hn:case Co:return 16;case Ha:return 536870912;default:return 16}default:return 16}}var nn=null,fs=null,Ht=null;function Do(){if(Ht)return Ht;var n,r=fs,a=r.length,c,d="value"in nn?nn.value:nn.textContent,m=d.length;for(n=0;n<a&&r[n]===d[n];n++);var v=a-n;for(c=1;c<=v&&r[a-c]===d[m-c];c++);return Ht=d.slice(n,1<c?1-c:void 0)}function ps(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function jn(){return!0}function Vo(){return!1}function St(n){function r(a,c,d,m,v){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=m,this.target=v,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(m):m[R]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?jn:Vo,this.isPropagationStopped=Vo,this}return ie(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=St(Pn),Bn=ie({},Pn,{view:0,detail:0}),cc=St(Bn),gs,lr,Or,Ci=ie({},Bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$n,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Or&&(Or&&n.type==="mousemove"?(gs=n.screenX-Or.screenX,lr=n.screenY-Or.screenY):lr=gs=0,Or=n),gs)},movementY:function(n){return"movementY"in n?n.movementY:lr}}),ys=St(Ci),Lo=ie({},Ci,{dataTransfer:0}),nl=St(Lo),_s=ie({},Bn,{relatedTarget:0}),vs=St(_s),rl=ie({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),ur=St(rl),il=ie({},Pn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),sl=St(il),ol=ie({},Pn,{data:0}),Oo=St(ol),Es={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},al={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ll(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=al[n])?!!r[n]:!1}function $n(){return ll}var l=ie({},Bn,{key:function(n){if(n.key){var r=Es[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=ps(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$n,charCode:function(n){return n.type==="keypress"?ps(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ps(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p=St(l),_=ie({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),w=St(_),M=ie({},Bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$n}),$=St(M),ee=ie({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=St(ee),dt=ie({},Ci,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),De=St(dt),_t=[9,13,27,32],ot=f&&"CompositionEvent"in window,fn=null;f&&"documentMode"in document&&(fn=document.documentMode);var rn=f&&"TextEvent"in window&&!fn,Pi=f&&(!ot||fn&&8<fn&&11>=fn),ws=" ",uf=!1;function cf(n,r){switch(n){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ts=!1;function J_(n,r){switch(n){case"compositionend":return hf(r);case"keypress":return r.which!==32?null:(uf=!0,ws);case"textInput":return n=r.data,n===ws&&uf?null:n;default:return null}}function Z_(n,r){if(Ts)return n==="compositionend"||!ot&&cf(n,r)?(n=Do(),Ht=fs=nn=null,Ts=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Pi&&r.locale!=="ko"?null:r.data;default:return null}}var ev={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function df(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!ev[n.type]:r==="textarea"}function ff(n,r,a,c){Fn(c),r=fl(r,"onChange"),0<r.length&&(a=new ms("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Mo=null,bo=null;function tv(n){Nf(n,0)}function ul(n){var r=Cs(n);if(Xi(r))return n}function nv(n,r){if(n==="change")return r}var pf=!1;if(f){var hc;if(f){var dc="oninput"in document;if(!dc){var mf=document.createElement("div");mf.setAttribute("oninput","return;"),dc=typeof mf.oninput=="function"}hc=dc}else hc=!1;pf=hc&&(!document.documentMode||9<document.documentMode)}function gf(){Mo&&(Mo.detachEvent("onpropertychange",yf),bo=Mo=null)}function yf(n){if(n.propertyName==="value"&&ul(bo)){var r=[];ff(r,bo,n,ts(n)),Io(tv,r)}}function rv(n,r,a){n==="focusin"?(gf(),Mo=r,bo=a,Mo.attachEvent("onpropertychange",yf)):n==="focusout"&&gf()}function iv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ul(bo)}function sv(n,r){if(n==="click")return ul(r)}function ov(n,r){if(n==="input"||n==="change")return ul(r)}function av(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var kn=typeof Object.is=="function"?Object.is:av;function Fo(n,r){if(kn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!kn(n[d],r[d]))return!1}return!0}function _f(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vf(n,r){var a=_f(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_f(a)}}function Ef(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Ef(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function wf(){for(var n=window,r=Ar();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=Ar(n.document)}return r}function fc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function lv(n){var r=wf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ef(a.ownerDocument.documentElement,a)){if(c!==null&&fc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,m=Math.min(c.start,d);c=c.end===void 0?m:Math.min(c.end,d),!n.extend&&m>c&&(d=c,c=m,m=d),d=vf(a,m);var v=vf(a,c);d&&v&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),m>c?(n.addRange(r),n.extend(v.node,v.offset)):(r.setEnd(v.node,v.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var uv=f&&"documentMode"in document&&11>=document.documentMode,Is=null,pc=null,Uo=null,mc=!1;function Tf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mc||Is==null||Is!==Ar(c)||(c=Is,"selectionStart"in c&&fc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Uo&&Fo(Uo,c)||(Uo=c,c=fl(pc,"onSelect"),0<c.length&&(r=new ms("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Is)))}function cl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ss={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},gc={},If={};f&&(If=document.createElement("div").style,"AnimationEvent"in window||(delete Ss.animationend.animation,delete Ss.animationiteration.animation,delete Ss.animationstart.animation),"TransitionEvent"in window||delete Ss.transitionend.transition);function hl(n){if(gc[n])return gc[n];if(!Ss[n])return n;var r=Ss[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in If)return gc[n]=r[a];return n}var Sf=hl("animationend"),Af=hl("animationiteration"),Rf=hl("animationstart"),Cf=hl("transitionend"),Pf=new Map,kf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(n,r){Pf.set(n,r),u(r,[n])}for(var yc=0;yc<kf.length;yc++){var _c=kf[yc],cv=_c.toLowerCase(),hv=_c[0].toUpperCase()+_c.slice(1);Mr(cv,"on"+hv)}Mr(Sf,"onAnimationEnd"),Mr(Af,"onAnimationIteration"),Mr(Rf,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Cf,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dv=new Set("cancel close invalid load scroll toggle".split(" ").concat(zo));function xf(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,ja(c,r,void 0,n),n.currentTarget=null}function Nf(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var v=c.length-1;0<=v;v--){var R=c[v],x=R.instance,j=R.currentTarget;if(R=R.listener,x!==m&&d.isPropagationStopped())break e;xf(d,R,j),m=x}else for(v=0;v<c.length;v++){if(R=c[v],x=R.instance,j=R.currentTarget,R=R.listener,x!==m&&d.isPropagationStopped())break e;xf(d,R,j),m=x}}}if(wn)throw n=So,wn=!1,So=null,n}function Ke(n,r){var a=r[Rc];a===void 0&&(a=r[Rc]=new Set);var c=n+"__bubble";a.has(c)||(Df(r,n,2,!1),a.add(c))}function vc(n,r,a){var c=0;r&&(c|=4),Df(a,n,c,r)}var dl="_reactListening"+Math.random().toString(36).slice(2);function jo(n){if(!n[dl]){n[dl]=!0,s.forEach(function(a){a!=="selectionchange"&&(dv.has(a)||vc(a,!1,n),vc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[dl]||(r[dl]=!0,vc("selectionchange",!1,r))}}function Df(n,r,a,c){switch(No(r)){case 1:var d=Xe;break;case 4:d=uc;break;default:d=xo}a=d.bind(null,r,a,n),d=void 0,!is||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Ec(n,r,a,c,d){var m=c;if(!(r&1)&&!(r&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var R=c.stateNode.containerInfo;if(R===d||R.nodeType===8&&R.parentNode===d)break;if(v===4)for(v=c.return;v!==null;){var x=v.tag;if((x===3||x===4)&&(x=v.stateNode.containerInfo,x===d||x.nodeType===8&&x.parentNode===d))return;v=v.return}for(;R!==null;){if(v=ki(R),v===null)return;if(x=v.tag,x===5||x===6){c=m=v;continue e}R=R.parentNode}}c=c.return}Io(function(){var j=m,Y=ts(a),J=[];e:{var G=Pf.get(n);if(G!==void 0){var re=ms,le=n;switch(n){case"keypress":if(ps(a)===0)break e;case"keydown":case"keyup":re=p;break;case"focusin":le="focus",re=vs;break;case"focusout":le="blur",re=vs;break;case"beforeblur":case"afterblur":re=vs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ys;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=$;break;case Sf:case Af:case Rf:re=ur;break;case Cf:re=ze;break;case"scroll":re=cc;break;case"wheel":re=De;break;case"copy":case"cut":case"paste":re=sl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=w}var ue=(r&4)!==0,it=!ue&&n==="scroll",F=ue?G!==null?G+"Capture":null:G;ue=[];for(var D=j,z;D!==null;){z=D;var Z=z.stateNode;if(z.tag===5&&Z!==null&&(z=Z,F!==null&&(Z=rt(D,F),Z!=null&&ue.push(Bo(D,Z,z)))),it)break;D=D.return}0<ue.length&&(G=new re(G,le,null,a,Y),J.push({event:G,listeners:ue}))}}if(!(r&7)){e:{if(G=n==="mouseover"||n==="pointerover",re=n==="mouseout"||n==="pointerout",G&&a!==gi&&(le=a.relatedTarget||a.fromElement)&&(ki(le)||le[cr]))break e;if((re||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,re?(le=a.relatedTarget||a.toElement,re=j,le=le?ki(le):null,le!==null&&(it=Tn(le),le!==it||le.tag!==5&&le.tag!==6)&&(le=null)):(re=null,le=j),re!==le)){if(ue=ys,Z="onMouseLeave",F="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ue=w,Z="onPointerLeave",F="onPointerEnter",D="pointer"),it=re==null?G:Cs(re),z=le==null?G:Cs(le),G=new ue(Z,D+"leave",re,a,Y),G.target=it,G.relatedTarget=z,Z=null,ki(Y)===j&&(ue=new ue(F,D+"enter",le,a,Y),ue.target=z,ue.relatedTarget=it,Z=ue),it=Z,re&&le)t:{for(ue=re,F=le,D=0,z=ue;z;z=As(z))D++;for(z=0,Z=F;Z;Z=As(Z))z++;for(;0<D-z;)ue=As(ue),D--;for(;0<z-D;)F=As(F),z--;for(;D--;){if(ue===F||F!==null&&ue===F.alternate)break t;ue=As(ue),F=As(F)}ue=null}else ue=null;re!==null&&Vf(J,G,re,ue,!1),le!==null&&it!==null&&Vf(J,it,le,ue,!0)}}e:{if(G=j?Cs(j):window,re=G.nodeName&&G.nodeName.toLowerCase(),re==="select"||re==="input"&&G.type==="file")var ce=nv;else if(df(G))if(pf)ce=ov;else{ce=iv;var ge=rv}else(re=G.nodeName)&&re.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(ce=sv);if(ce&&(ce=ce(n,j))){ff(J,ce,a,Y);break e}ge&&ge(n,G,j),n==="focusout"&&(ge=G._wrapperState)&&ge.controlled&&G.type==="number"&&Ji(G,"number",G.value)}switch(ge=j?Cs(j):window,n){case"focusin":(df(ge)||ge.contentEditable==="true")&&(Is=ge,pc=j,Uo=null);break;case"focusout":Uo=pc=Is=null;break;case"mousedown":mc=!0;break;case"contextmenu":case"mouseup":case"dragend":mc=!1,Tf(J,a,Y);break;case"selectionchange":if(uv)break;case"keydown":case"keyup":Tf(J,a,Y)}var ye;if(ot)e:{switch(n){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else Ts?cf(n,a)&&(_e="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(Pi&&a.locale!=="ko"&&(Ts||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&Ts&&(ye=Do()):(nn=Y,fs="value"in nn?nn.value:nn.textContent,Ts=!0)),ge=fl(j,_e),0<ge.length&&(_e=new Oo(_e,n,null,a,Y),J.push({event:_e,listeners:ge}),ye?_e.data=ye:(ye=hf(a),ye!==null&&(_e.data=ye)))),(ye=rn?J_(n,a):Z_(n,a))&&(j=fl(j,"onBeforeInput"),0<j.length&&(Y=new Oo("onBeforeInput","beforeinput",null,a,Y),J.push({event:Y,listeners:j}),Y.data=ye))}Nf(J,r)})}function Bo(n,r,a){return{instance:n,listener:r,currentTarget:a}}function fl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=rt(n,a),m!=null&&c.unshift(Bo(n,m,d)),m=rt(n,r),m!=null&&c.push(Bo(n,m,d))),n=n.return}return c}function As(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Vf(n,r,a,c,d){for(var m=r._reactName,v=[];a!==null&&a!==c;){var R=a,x=R.alternate,j=R.stateNode;if(x!==null&&x===c)break;R.tag===5&&j!==null&&(R=j,d?(x=rt(a,m),x!=null&&v.unshift(Bo(a,x,R))):d||(x=rt(a,m),x!=null&&v.push(Bo(a,x,R)))),a=a.return}v.length!==0&&n.push({event:r,listeners:v})}var fv=/\r\n?/g,pv=/\u0000|\uFFFD/g;function Lf(n){return(typeof n=="string"?n:""+n).replace(fv,`
`).replace(pv,"")}function pl(n,r,a){if(r=Lf(r),Lf(n)!==r&&a)throw Error(t(425))}function ml(){}var wc=null,Tc=null;function Ic(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Sc=typeof setTimeout=="function"?setTimeout:void 0,mv=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,gv=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(n){return Of.resolve(null).then(n).catch(yv)}:Sc;function yv(n){setTimeout(function(){throw n})}function Ac(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Cn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Cn(r)}function br(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function Mf(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Rs=Math.random().toString(36).slice(2),qn="__reactFiber$"+Rs,$o="__reactProps$"+Rs,cr="__reactContainer$"+Rs,Rc="__reactEvents$"+Rs,_v="__reactListeners$"+Rs,vv="__reactHandles$"+Rs;function ki(n){var r=n[qn];if(r)return r;for(var a=n.parentNode;a;){if(r=a[cr]||a[qn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=Mf(n);n!==null;){if(a=n[qn])return a;n=Mf(n)}return r}n=a,a=n.parentNode}return null}function qo(n){return n=n[qn]||n[cr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Cs(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function gl(n){return n[$o]||null}var Cc=[],Ps=-1;function Fr(n){return{current:n}}function Qe(n){0>Ps||(n.current=Cc[Ps],Cc[Ps]=null,Ps--)}function We(n,r){Ps++,Cc[Ps]=n.current,n.current=r}var Ur={},Dt=Fr(Ur),Wt=Fr(!1),xi=Ur;function ks(n,r){var a=n.type.contextTypes;if(!a)return Ur;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=r[m];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function Kt(n){return n=n.childContextTypes,n!=null}function yl(){Qe(Wt),Qe(Dt)}function bf(n,r,a){if(Dt.current!==Ur)throw Error(t(168));We(Dt,r),We(Wt,a)}function Ff(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,Me(n)||"Unknown",d));return ie({},a,c)}function _l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ur,xi=Dt.current,We(Dt,n),We(Wt,Wt.current),!0}function Uf(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Ff(n,r,xi),c.__reactInternalMemoizedMergedChildContext=n,Qe(Wt),Qe(Dt),We(Dt,n)):Qe(Wt),We(Wt,a)}var hr=null,vl=!1,Pc=!1;function zf(n){hr===null?hr=[n]:hr.push(n)}function Ev(n){vl=!0,zf(n)}function zr(){if(!Pc&&hr!==null){Pc=!0;var n=0,r=ke;try{var a=hr;for(ke=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}hr=null,vl=!1}catch(d){throw hr!==null&&(hr=hr.slice(n+1)),ls(wi,zr),d}finally{ke=r,Pc=!1}}return null}var xs=[],Ns=0,El=null,wl=0,pn=[],mn=0,Ni=null,dr=1,fr="";function Di(n,r){xs[Ns++]=wl,xs[Ns++]=El,El=n,wl=r}function jf(n,r,a){pn[mn++]=dr,pn[mn++]=fr,pn[mn++]=Ni,Ni=n;var c=dr;n=fr;var d=32-Ut(c)-1;c&=~(1<<d),a+=1;var m=32-Ut(r)+d;if(30<m){var v=d-d%5;m=(c&(1<<v)-1).toString(32),c>>=v,d-=v,dr=1<<32-Ut(r)+d|a<<d|c,fr=m+n}else dr=1<<m|a<<d|c,fr=n}function kc(n){n.return!==null&&(Di(n,1),jf(n,1,0))}function xc(n){for(;n===El;)El=xs[--Ns],xs[Ns]=null,wl=xs[--Ns],xs[Ns]=null;for(;n===Ni;)Ni=pn[--mn],pn[mn]=null,fr=pn[--mn],pn[mn]=null,dr=pn[--mn],pn[mn]=null}var sn=null,on=null,Ye=!1,xn=null;function Bf(n,r){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function $f(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,sn=n,on=br(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,sn=n,on=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Ni!==null?{id:dr,overflow:fr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,sn=n,on=null,!0):!1;default:return!1}}function Nc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Dc(n){if(Ye){var r=on;if(r){var a=r;if(!$f(n,r)){if(Nc(n))throw Error(t(418));r=br(a.nextSibling);var c=sn;r&&$f(n,r)?Bf(c,a):(n.flags=n.flags&-4097|2,Ye=!1,sn=n)}}else{if(Nc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ye=!1,sn=n}}}function qf(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;sn=n}function Tl(n){if(n!==sn)return!1;if(!Ye)return qf(n),Ye=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Ic(n.type,n.memoizedProps)),r&&(r=on)){if(Nc(n))throw Hf(),Error(t(418));for(;r;)Bf(n,r),r=br(r.nextSibling)}if(qf(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){on=br(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}on=null}}else on=sn?br(n.stateNode.nextSibling):null;return!0}function Hf(){for(var n=on;n;)n=br(n.nextSibling)}function Ds(){on=sn=null,Ye=!1}function Vc(n){xn===null?xn=[n]:xn.push(n)}var wv=de.ReactCurrentBatchConfig;function Ho(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,m=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===m?r.ref:(r=function(v){var R=d.refs;v===null?delete R[m]:R[m]=v},r._stringRef=m,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Il(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Wf(n){var r=n._init;return r(n._payload)}function Kf(n){function r(F,D){if(n){var z=F.deletions;z===null?(F.deletions=[D],F.flags|=16):z.push(D)}}function a(F,D){if(!n)return null;for(;D!==null;)r(F,D),D=D.sibling;return null}function c(F,D){for(F=new Map;D!==null;)D.key!==null?F.set(D.key,D):F.set(D.index,D),D=D.sibling;return F}function d(F,D){return F=Qr(F,D),F.index=0,F.sibling=null,F}function m(F,D,z){return F.index=z,n?(z=F.alternate,z!==null?(z=z.index,z<D?(F.flags|=2,D):z):(F.flags|=2,D)):(F.flags|=1048576,D)}function v(F){return n&&F.alternate===null&&(F.flags|=2),F}function R(F,D,z,Z){return D===null||D.tag!==6?(D=Sh(z,F.mode,Z),D.return=F,D):(D=d(D,z),D.return=F,D)}function x(F,D,z,Z){var ce=z.type;return ce===P?Y(F,D,z.props.children,Z,z.key):D!==null&&(D.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Nt&&Wf(ce)===D.type)?(Z=d(D,z.props),Z.ref=Ho(F,D,z),Z.return=F,Z):(Z=Kl(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Ho(F,D,z),Z.return=F,Z)}function j(F,D,z,Z){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=Ah(z,F.mode,Z),D.return=F,D):(D=d(D,z.children||[]),D.return=F,D)}function Y(F,D,z,Z,ce){return D===null||D.tag!==7?(D=zi(z,F.mode,Z,ce),D.return=F,D):(D=d(D,z),D.return=F,D)}function J(F,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=Sh(""+D,F.mode,z),D.return=F,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Ie:return z=Kl(D.type,D.key,D.props,null,F.mode,z),z.ref=Ho(F,null,D),z.return=F,z;case Ee:return D=Ah(D,F.mode,z),D.return=F,D;case Nt:var Z=D._init;return J(F,Z(D._payload),z)}if(tr(D)||me(D))return D=zi(D,F.mode,z,null),D.return=F,D;Il(F,D)}return null}function G(F,D,z,Z){var ce=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ce!==null?null:R(F,D,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Ie:return z.key===ce?x(F,D,z,Z):null;case Ee:return z.key===ce?j(F,D,z,Z):null;case Nt:return ce=z._init,G(F,D,ce(z._payload),Z)}if(tr(z)||me(z))return ce!==null?null:Y(F,D,z,Z,null);Il(F,z)}return null}function re(F,D,z,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return F=F.get(z)||null,R(D,F,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ie:return F=F.get(Z.key===null?z:Z.key)||null,x(D,F,Z,ce);case Ee:return F=F.get(Z.key===null?z:Z.key)||null,j(D,F,Z,ce);case Nt:var ge=Z._init;return re(F,D,z,ge(Z._payload),ce)}if(tr(Z)||me(Z))return F=F.get(z)||null,Y(D,F,Z,ce,null);Il(D,Z)}return null}function le(F,D,z,Z){for(var ce=null,ge=null,ye=D,_e=D=0,wt=null;ye!==null&&_e<z.length;_e++){ye.index>_e?(wt=ye,ye=null):wt=ye.sibling;var Oe=G(F,ye,z[_e],Z);if(Oe===null){ye===null&&(ye=wt);break}n&&ye&&Oe.alternate===null&&r(F,ye),D=m(Oe,D,_e),ge===null?ce=Oe:ge.sibling=Oe,ge=Oe,ye=wt}if(_e===z.length)return a(F,ye),Ye&&Di(F,_e),ce;if(ye===null){for(;_e<z.length;_e++)ye=J(F,z[_e],Z),ye!==null&&(D=m(ye,D,_e),ge===null?ce=ye:ge.sibling=ye,ge=ye);return Ye&&Di(F,_e),ce}for(ye=c(F,ye);_e<z.length;_e++)wt=re(ye,F,_e,z[_e],Z),wt!==null&&(n&&wt.alternate!==null&&ye.delete(wt.key===null?_e:wt.key),D=m(wt,D,_e),ge===null?ce=wt:ge.sibling=wt,ge=wt);return n&&ye.forEach(function(Gr){return r(F,Gr)}),Ye&&Di(F,_e),ce}function ue(F,D,z,Z){var ce=me(z);if(typeof ce!="function")throw Error(t(150));if(z=ce.call(z),z==null)throw Error(t(151));for(var ge=ce=null,ye=D,_e=D=0,wt=null,Oe=z.next();ye!==null&&!Oe.done;_e++,Oe=z.next()){ye.index>_e?(wt=ye,ye=null):wt=ye.sibling;var Gr=G(F,ye,Oe.value,Z);if(Gr===null){ye===null&&(ye=wt);break}n&&ye&&Gr.alternate===null&&r(F,ye),D=m(Gr,D,_e),ge===null?ce=Gr:ge.sibling=Gr,ge=Gr,ye=wt}if(Oe.done)return a(F,ye),Ye&&Di(F,_e),ce;if(ye===null){for(;!Oe.done;_e++,Oe=z.next())Oe=J(F,Oe.value,Z),Oe!==null&&(D=m(Oe,D,_e),ge===null?ce=Oe:ge.sibling=Oe,ge=Oe);return Ye&&Di(F,_e),ce}for(ye=c(F,ye);!Oe.done;_e++,Oe=z.next())Oe=re(ye,F,_e,Oe.value,Z),Oe!==null&&(n&&Oe.alternate!==null&&ye.delete(Oe.key===null?_e:Oe.key),D=m(Oe,D,_e),ge===null?ce=Oe:ge.sibling=Oe,ge=Oe);return n&&ye.forEach(function(Zv){return r(F,Zv)}),Ye&&Di(F,_e),ce}function it(F,D,z,Z){if(typeof z=="object"&&z!==null&&z.type===P&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Ie:e:{for(var ce=z.key,ge=D;ge!==null;){if(ge.key===ce){if(ce=z.type,ce===P){if(ge.tag===7){a(F,ge.sibling),D=d(ge,z.props.children),D.return=F,F=D;break e}}else if(ge.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Nt&&Wf(ce)===ge.type){a(F,ge.sibling),D=d(ge,z.props),D.ref=Ho(F,ge,z),D.return=F,F=D;break e}a(F,ge);break}else r(F,ge);ge=ge.sibling}z.type===P?(D=zi(z.props.children,F.mode,Z,z.key),D.return=F,F=D):(Z=Kl(z.type,z.key,z.props,null,F.mode,Z),Z.ref=Ho(F,D,z),Z.return=F,F=Z)}return v(F);case Ee:e:{for(ge=z.key;D!==null;){if(D.key===ge)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(F,D.sibling),D=d(D,z.children||[]),D.return=F,F=D;break e}else{a(F,D);break}else r(F,D);D=D.sibling}D=Ah(z,F.mode,Z),D.return=F,F=D}return v(F);case Nt:return ge=z._init,it(F,D,ge(z._payload),Z)}if(tr(z))return le(F,D,z,Z);if(me(z))return ue(F,D,z,Z);Il(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(F,D.sibling),D=d(D,z),D.return=F,F=D):(a(F,D),D=Sh(z,F.mode,Z),D.return=F,F=D),v(F)):a(F,D)}return it}var Vs=Kf(!0),Qf=Kf(!1),Sl=Fr(null),Al=null,Ls=null,Lc=null;function Oc(){Lc=Ls=Al=null}function Mc(n){var r=Sl.current;Qe(Sl),n._currentValue=r}function bc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Os(n,r){Al=n,Lc=Ls=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&r&&(Qt=!0),n.firstContext=null)}function gn(n){var r=n._currentValue;if(Lc!==n)if(n={context:n,memoizedValue:r,next:null},Ls===null){if(Al===null)throw Error(t(308));Ls=n,Al.dependencies={lanes:0,firstContext:n}}else Ls=Ls.next=n;return r}var Vi=null;function Fc(n){Vi===null?Vi=[n]:Vi.push(n)}function Gf(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,Fc(r)):(a.next=d.next,d.next=a),r.interleaved=a,pr(n,c)}function pr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var jr=!1;function Uc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function mr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Br(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Le&2){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,pr(n,a)}return d=c.interleaved,d===null?(r.next=r,Fc(c)):(r.next=d.next,d.next=r),c.interleaved=r,pr(n,a)}function Rl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Nr(n,a)}}function Yf(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=v:m=m.next=v,a=a.next}while(a!==null);m===null?d=m=r:m=m.next=r}else d=m=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function Cl(n,r,a,c){var d=n.updateQueue;jr=!1;var m=d.firstBaseUpdate,v=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var x=R,j=x.next;x.next=null,v===null?m=j:v.next=j,v=x;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,R=Y.lastBaseUpdate,R!==v&&(R===null?Y.firstBaseUpdate=j:R.next=j,Y.lastBaseUpdate=x))}if(m!==null){var J=d.baseState;v=0,Y=j=x=null,R=m;do{var G=R.lane,re=R.eventTime;if((c&G)===G){Y!==null&&(Y=Y.next={eventTime:re,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var le=n,ue=R;switch(G=r,re=a,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){J=le.call(re,J,G);break e}J=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,G=typeof le=="function"?le.call(re,J,G):le,G==null)break e;J=ie({},J,G);break e;case 2:jr=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,G=d.effects,G===null?d.effects=[R]:G.push(R))}else re={eventTime:re,lane:G,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Y===null?(j=Y=re,x=J):Y=Y.next=re,v|=G;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;G=R,R=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(x=J),d.baseState=x,d.firstBaseUpdate=j,d.lastBaseUpdate=Y,r=d.shared.interleaved,r!==null){d=r;do v|=d.lane,d=d.next;while(d!==r)}else m===null&&(d.shared.lanes=0);Mi|=v,n.lanes=v,n.memoizedState=J}}function Jf(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var Wo={},Hn=Fr(Wo),Ko=Fr(Wo),Qo=Fr(Wo);function Li(n){if(n===Wo)throw Error(t(174));return n}function zc(n,r){switch(We(Qo,r),We(Ko,n),We(Hn,Wo),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ht(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=ht(r,n)}Qe(Hn),We(Hn,r)}function Ms(){Qe(Hn),Qe(Ko),Qe(Qo)}function Zf(n){Li(Qo.current);var r=Li(Hn.current),a=ht(r,n.type);r!==a&&(We(Ko,n),We(Hn,a))}function jc(n){Ko.current===n&&(Qe(Hn),Qe(Ko))}var Je=Fr(0);function Pl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Bc=[];function $c(){for(var n=0;n<Bc.length;n++)Bc[n]._workInProgressVersionPrimary=null;Bc.length=0}var kl=de.ReactCurrentDispatcher,qc=de.ReactCurrentBatchConfig,Oi=0,Ze=null,ft=null,vt=null,xl=!1,Go=!1,Xo=0,Tv=0;function Vt(){throw Error(t(321))}function Hc(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!kn(n[a],r[a]))return!1;return!0}function Wc(n,r,a,c,d,m){if(Oi=m,Ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,kl.current=n===null||n.memoizedState===null?Rv:Cv,n=a(c,d),Go){m=0;do{if(Go=!1,Xo=0,25<=m)throw Error(t(301));m+=1,vt=ft=null,r.updateQueue=null,kl.current=Pv,n=a(c,d)}while(Go)}if(kl.current=Vl,r=ft!==null&&ft.next!==null,Oi=0,vt=ft=Ze=null,xl=!1,r)throw Error(t(300));return n}function Kc(){var n=Xo!==0;return Xo=0,n}function Wn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=n:vt=vt.next=n,vt}function yn(){if(ft===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=ft.next;var r=vt===null?Ze.memoizedState:vt.next;if(r!==null)vt=r,ft=n;else{if(n===null)throw Error(t(310));ft=n,n={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},vt===null?Ze.memoizedState=vt=n:vt=vt.next=n}return vt}function Yo(n,r){return typeof r=="function"?r(n):r}function Qc(n){var r=yn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=ft,d=c.baseQueue,m=a.pending;if(m!==null){if(d!==null){var v=d.next;d.next=m.next,m.next=v}c.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,c=c.baseState;var R=v=null,x=null,j=m;do{var Y=j.lane;if((Oi&Y)===Y)x!==null&&(x=x.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),c=j.hasEagerState?j.eagerState:n(c,j.action);else{var J={lane:Y,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};x===null?(R=x=J,v=c):x=x.next=J,Ze.lanes|=Y,Mi|=Y}j=j.next}while(j!==null&&j!==m);x===null?v=c:x.next=R,kn(c,r.memoizedState)||(Qt=!0),r.memoizedState=c,r.baseState=v,r.baseQueue=x,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do m=d.lane,Ze.lanes|=m,Mi|=m,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function Gc(n){var r=yn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,m=r.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do m=n(m,v.action),v=v.next;while(v!==d);kn(m,r.memoizedState)||(Qt=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),a.lastRenderedState=m}return[m,c]}function ep(){}function tp(n,r){var a=Ze,c=yn(),d=r(),m=!kn(c.memoizedState,d);if(m&&(c.memoizedState=d,Qt=!0),c=c.queue,Xc(ip.bind(null,a,c,n),[n]),c.getSnapshot!==r||m||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,Jo(9,rp.bind(null,a,c,d,r),void 0,null),Et===null)throw Error(t(349));Oi&30||np(a,r,d)}return d}function np(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function rp(n,r,a,c){r.value=a,r.getSnapshot=c,sp(r)&&op(n)}function ip(n,r,a){return a(function(){sp(r)&&op(n)})}function sp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!kn(n,a)}catch{return!0}}function op(n){var r=pr(n,1);r!==null&&Ln(r,n,1,-1)}function ap(n){var r=Wn();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Yo,lastRenderedState:n},r.queue=n,n=n.dispatch=Av.bind(null,Ze,n),[r.memoizedState,n]}function Jo(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=Ze.updateQueue,r===null?(r={lastEffect:null,stores:null},Ze.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function lp(){return yn().memoizedState}function Nl(n,r,a,c){var d=Wn();Ze.flags|=n,d.memoizedState=Jo(1|r,a,void 0,c===void 0?null:c)}function Dl(n,r,a,c){var d=yn();c=c===void 0?null:c;var m=void 0;if(ft!==null){var v=ft.memoizedState;if(m=v.destroy,c!==null&&Hc(c,v.deps)){d.memoizedState=Jo(r,a,m,c);return}}Ze.flags|=n,d.memoizedState=Jo(1|r,a,m,c)}function up(n,r){return Nl(8390656,8,n,r)}function Xc(n,r){return Dl(2048,8,n,r)}function cp(n,r){return Dl(4,2,n,r)}function hp(n,r){return Dl(4,4,n,r)}function dp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function fp(n,r,a){return a=a!=null?a.concat([n]):null,Dl(4,4,dp.bind(null,r,n),a)}function Yc(){}function pp(n,r){var a=yn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hc(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function mp(n,r){var a=yn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&Hc(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function gp(n,r,a){return Oi&21?(kn(a,r)||(a=Si(),Ze.lanes|=a,Mi|=a,n.baseState=!0),r):(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a)}function Iv(n,r){var a=ke;ke=a!==0&&4>a?a:4,n(!0);var c=qc.transition;qc.transition={};try{n(!1),r()}finally{ke=a,qc.transition=c}}function yp(){return yn().memoizedState}function Sv(n,r,a){var c=Wr(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},_p(n))vp(r,a);else if(a=Gf(n,r,a,c),a!==null){var d=Bt();Ln(a,n,c,d),Ep(a,r,c)}}function Av(n,r,a){var c=Wr(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(_p(n))vp(r,d);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var v=r.lastRenderedState,R=m(v,a);if(d.hasEagerState=!0,d.eagerState=R,kn(R,v)){var x=r.interleaved;x===null?(d.next=d,Fc(r)):(d.next=x.next,x.next=d),r.interleaved=d;return}}catch{}finally{}a=Gf(n,r,d,c),a!==null&&(d=Bt(),Ln(a,n,c,d),Ep(a,r,c))}}function _p(n){var r=n.alternate;return n===Ze||r!==null&&r===Ze}function vp(n,r){Go=xl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Ep(n,r,a){if(a&4194240){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Nr(n,a)}}var Vl={readContext:gn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},Rv={readContext:gn,useCallback:function(n,r){return Wn().memoizedState=[n,r===void 0?null:r],n},useContext:gn,useEffect:up,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Nl(4194308,4,dp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Nl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Nl(4,2,n,r)},useMemo:function(n,r){var a=Wn();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Wn();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Sv.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var r=Wn();return n={current:n},r.memoizedState=n},useState:ap,useDebugValue:Yc,useDeferredValue:function(n){return Wn().memoizedState=n},useTransition:function(){var n=ap(!1),r=n[0];return n=Iv.bind(null,n[1]),Wn().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=Ze,d=Wn();if(Ye){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Et===null)throw Error(t(349));Oi&30||np(c,r,a)}d.memoizedState=a;var m={value:a,getSnapshot:r};return d.queue=m,up(ip.bind(null,c,m,n),[n]),c.flags|=2048,Jo(9,rp.bind(null,c,m,a,r),void 0,null),a},useId:function(){var n=Wn(),r=Et.identifierPrefix;if(Ye){var a=fr,c=dr;a=(c&~(1<<32-Ut(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=Xo++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Tv++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},Cv={readContext:gn,useCallback:pp,useContext:gn,useEffect:Xc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:hp,useMemo:mp,useReducer:Qc,useRef:lp,useState:function(){return Qc(Yo)},useDebugValue:Yc,useDeferredValue:function(n){var r=yn();return gp(r,ft.memoizedState,n)},useTransition:function(){var n=Qc(Yo)[0],r=yn().memoizedState;return[n,r]},useMutableSource:ep,useSyncExternalStore:tp,useId:yp,unstable_isNewReconciler:!1},Pv={readContext:gn,useCallback:pp,useContext:gn,useEffect:Xc,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:hp,useMemo:mp,useReducer:Gc,useRef:lp,useState:function(){return Gc(Yo)},useDebugValue:Yc,useDeferredValue:function(n){var r=yn();return ft===null?r.memoizedState=n:gp(r,ft.memoizedState,n)},useTransition:function(){var n=Gc(Yo)[0],r=yn().memoizedState;return[n,r]},useMutableSource:ep,useSyncExternalStore:tp,useId:yp,unstable_isNewReconciler:!1};function Nn(n,r){if(n&&n.defaultProps){r=ie({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function Jc(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:ie({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ll={isMounted:function(n){return(n=n._reactInternals)?Tn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Bt(),d=Wr(n),m=mr(c,d);m.payload=r,a!=null&&(m.callback=a),r=Br(n,m,d),r!==null&&(Ln(r,n,d,c),Rl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Bt(),d=Wr(n),m=mr(c,d);m.tag=1,m.payload=r,a!=null&&(m.callback=a),r=Br(n,m,d),r!==null&&(Ln(r,n,d,c),Rl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Bt(),c=Wr(n),d=mr(a,c);d.tag=2,r!=null&&(d.callback=r),r=Br(n,d,c),r!==null&&(Ln(r,n,c,a),Rl(r,n,c))}};function wp(n,r,a,c,d,m,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,v):r.prototype&&r.prototype.isPureReactComponent?!Fo(a,c)||!Fo(d,m):!0}function Tp(n,r,a){var c=!1,d=Ur,m=r.contextType;return typeof m=="object"&&m!==null?m=gn(m):(d=Kt(r)?xi:Dt.current,c=r.contextTypes,m=(c=c!=null)?ks(n,d):Ur),r=new r(a,m),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Ll,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=m),r}function Ip(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Ll.enqueueReplaceState(r,r.state,null)}function Zc(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},Uc(n);var m=r.contextType;typeof m=="object"&&m!==null?d.context=gn(m):(m=Kt(r)?xi:Dt.current,d.context=ks(n,m)),d.state=n.memoizedState,m=r.getDerivedStateFromProps,typeof m=="function"&&(Jc(n,r,m,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Ll.enqueueReplaceState(d,d.state,null),Cl(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function bs(n,r){try{var a="",c=r;do a+=Ae(c),c=c.return;while(c);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:n,source:r,stack:d,digest:null}}function eh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function th(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var kv=typeof WeakMap=="function"?WeakMap:Map;function Sp(n,r,a){a=mr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){jl||(jl=!0,gh=c),th(n,r)},a}function Ap(n,r,a){a=mr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){th(n,r)}}var m=n.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){th(n,r),typeof c!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var v=r.stack;this.componentDidCatch(r.value,{componentStack:v!==null?v:""})}),a}function Rp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new kv;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=$v.bind(null,n,r,a),r.then(n,n))}function Cp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Pp(n,r,a,c,d){return n.mode&1?(n.flags|=65536,n.lanes=d,n):(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=mr(-1,1),r.tag=2,Br(a,r,1))),a.lanes|=1),n)}var xv=de.ReactCurrentOwner,Qt=!1;function jt(n,r,a,c){r.child=n===null?Qf(r,null,a,c):Vs(r,n.child,a,c)}function kp(n,r,a,c,d){a=a.render;var m=r.ref;return Os(r,d),c=Wc(n,r,a,c,m,d),a=Kc(),n!==null&&!Qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,gr(n,r,d)):(Ye&&a&&kc(r),r.flags|=1,jt(n,r,c,d),r.child)}function xp(n,r,a,c,d){if(n===null){var m=a.type;return typeof m=="function"&&!Ih(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=m,Np(n,r,m,c,d)):(n=Kl(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!(n.lanes&d)){var v=m.memoizedProps;if(a=a.compare,a=a!==null?a:Fo,a(v,c)&&n.ref===r.ref)return gr(n,r,d)}return r.flags|=1,n=Qr(m,c),n.ref=r.ref,n.return=r,r.child=n}function Np(n,r,a,c,d){if(n!==null){var m=n.memoizedProps;if(Fo(m,c)&&n.ref===r.ref)if(Qt=!1,r.pendingProps=c=m,(n.lanes&d)!==0)n.flags&131072&&(Qt=!0);else return r.lanes=n.lanes,gr(n,r,d)}return nh(n,r,a,c,d)}function Dp(n,r,a){var c=r.pendingProps,d=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Us,an),an|=a;else{if(!(a&1073741824))return n=m!==null?m.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,We(Us,an),an|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=m!==null?m.baseLanes:a,We(Us,an),an|=c}else m!==null?(c=m.baseLanes|a,r.memoizedState=null):c=a,We(Us,an),an|=c;return jt(n,r,d,a),r.child}function Vp(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function nh(n,r,a,c,d){var m=Kt(a)?xi:Dt.current;return m=ks(r,m),Os(r,d),a=Wc(n,r,a,c,m,d),c=Kc(),n!==null&&!Qt?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,gr(n,r,d)):(Ye&&c&&kc(r),r.flags|=1,jt(n,r,a,d),r.child)}function Lp(n,r,a,c,d){if(Kt(a)){var m=!0;_l(r)}else m=!1;if(Os(r,d),r.stateNode===null)Ml(n,r),Tp(r,a,c),Zc(r,a,c,d),c=!0;else if(n===null){var v=r.stateNode,R=r.memoizedProps;v.props=R;var x=v.context,j=a.contextType;typeof j=="object"&&j!==null?j=gn(j):(j=Kt(a)?xi:Dt.current,j=ks(r,j));var Y=a.getDerivedStateFromProps,J=typeof Y=="function"||typeof v.getSnapshotBeforeUpdate=="function";J||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==c||x!==j)&&Ip(r,v,c,j),jr=!1;var G=r.memoizedState;v.state=G,Cl(r,c,v,d),x=r.memoizedState,R!==c||G!==x||Wt.current||jr?(typeof Y=="function"&&(Jc(r,a,Y,c),x=r.memoizedState),(R=jr||wp(r,a,R,c,G,x,j))?(J||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=x),v.props=c,v.state=x,v.context=j,c=R):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{v=r.stateNode,Xf(n,r),R=r.memoizedProps,j=r.type===r.elementType?R:Nn(r.type,R),v.props=j,J=r.pendingProps,G=v.context,x=a.contextType,typeof x=="object"&&x!==null?x=gn(x):(x=Kt(a)?xi:Dt.current,x=ks(r,x));var re=a.getDerivedStateFromProps;(Y=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==J||G!==x)&&Ip(r,v,c,x),jr=!1,G=r.memoizedState,v.state=G,Cl(r,c,v,d);var le=r.memoizedState;R!==J||G!==le||Wt.current||jr?(typeof re=="function"&&(Jc(r,a,re,c),le=r.memoizedState),(j=jr||wp(r,a,j,c,G,le,x)||!1)?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,le,x),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,le,x)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),v.props=c,v.state=le,v.context=x,c=j):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),c=!1)}return rh(n,r,a,c,m,d)}function rh(n,r,a,c,d,m){Vp(n,r);var v=(r.flags&128)!==0;if(!c&&!v)return d&&Uf(r,a,!1),gr(n,r,m);c=r.stateNode,xv.current=r;var R=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&v?(r.child=Vs(r,n.child,null,m),r.child=Vs(r,null,R,m)):jt(n,r,R,m),r.memoizedState=c.state,d&&Uf(r,a,!0),r.child}function Op(n){var r=n.stateNode;r.pendingContext?bf(n,r.pendingContext,r.pendingContext!==r.context):r.context&&bf(n,r.context,!1),zc(n,r.containerInfo)}function Mp(n,r,a,c,d){return Ds(),Vc(d),r.flags|=256,jt(n,r,a,c),r.child}var ih={dehydrated:null,treeContext:null,retryLane:0};function sh(n){return{baseLanes:n,cachePool:null,transitions:null}}function bp(n,r,a){var c=r.pendingProps,d=Je.current,m=!1,v=(r.flags&128)!==0,R;if((R=v)||(R=n!==null&&n.memoizedState===null?!1:(d&2)!==0),R?(m=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),We(Je,d&1),n===null)return Dc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(r.mode&1?n.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(v=c.children,n=c.fallback,m?(c=r.mode,m=r.child,v={mode:"hidden",children:v},!(c&1)&&m!==null?(m.childLanes=0,m.pendingProps=v):m=Ql(v,c,0,null),n=zi(n,c,a,null),m.return=r,n.return=r,m.sibling=n,r.child=m,r.child.memoizedState=sh(a),r.memoizedState=ih,n):oh(r,v));if(d=n.memoizedState,d!==null&&(R=d.dehydrated,R!==null))return Nv(n,r,v,c,R,d,a);if(m){m=c.fallback,v=r.mode,d=n.child,R=d.sibling;var x={mode:"hidden",children:c.children};return!(v&1)&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=x,r.deletions=null):(c=Qr(d,x),c.subtreeFlags=d.subtreeFlags&14680064),R!==null?m=Qr(R,m):(m=zi(m,v,a,null),m.flags|=2),m.return=r,c.return=r,c.sibling=m,r.child=c,c=m,m=r.child,v=n.child.memoizedState,v=v===null?sh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},m.memoizedState=v,m.childLanes=n.childLanes&~a,r.memoizedState=ih,c}return m=n.child,n=m.sibling,c=Qr(m,{mode:"visible",children:c.children}),!(r.mode&1)&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function oh(n,r){return r=Ql({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Ol(n,r,a,c){return c!==null&&Vc(c),Vs(r,n.child,null,a),n=oh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function Nv(n,r,a,c,d,m,v){if(a)return r.flags&256?(r.flags&=-257,c=eh(Error(t(422))),Ol(n,r,v,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(m=c.fallback,d=r.mode,c=Ql({mode:"visible",children:c.children},d,0,null),m=zi(m,d,v,null),m.flags|=2,c.return=r,m.return=r,c.sibling=m,r.child=c,r.mode&1&&Vs(r,n.child,null,v),r.child.memoizedState=sh(v),r.memoizedState=ih,m);if(!(r.mode&1))return Ol(n,r,v,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var R=c.dgst;return c=R,m=Error(t(419)),c=eh(m,c,void 0),Ol(n,r,v,c)}if(R=(v&n.childLanes)!==0,Qt||R){if(c=Et,c!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=d&(c.suspendedLanes|v)?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,pr(n,d),Ln(c,n,d,-1))}return Th(),c=eh(Error(t(421))),Ol(n,r,v,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=qv.bind(null,n),d._reactRetry=r,null):(n=m.treeContext,on=br(d.nextSibling),sn=r,Ye=!0,xn=null,n!==null&&(pn[mn++]=dr,pn[mn++]=fr,pn[mn++]=Ni,dr=n.id,fr=n.overflow,Ni=r),r=oh(r,c.children),r.flags|=4096,r)}function Fp(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),bc(n.return,r,a)}function ah(n,r,a,c,d){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=a,m.tailMode=d)}function Up(n,r,a){var c=r.pendingProps,d=c.revealOrder,m=c.tail;if(jt(n,r,c.children,a),c=Je.current,c&2)c=c&1|2,r.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Fp(n,a,r);else if(n.tag===19)Fp(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Je,c),!(r.mode&1))r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Pl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),ah(r,!1,d,a,m);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Pl(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}ah(r,!0,a,null,m);break;case"together":ah(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ml(n,r){!(r.mode&1)&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function gr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Mi|=r.lanes,!(a&r.childLanes))return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=Qr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=Qr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function Dv(n,r,a){switch(r.tag){case 3:Op(r),Ds();break;case 5:Zf(r);break;case 1:Kt(r.type)&&_l(r);break;case 4:zc(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;We(Sl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(We(Je,Je.current&1),r.flags|=128,null):a&r.child.childLanes?bp(n,r,a):(We(Je,Je.current&1),n=gr(n,r,a),n!==null?n.sibling:null);We(Je,Je.current&1);break;case 19:if(c=(a&r.childLanes)!==0,n.flags&128){if(c)return Up(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),We(Je,Je.current),c)break;return null;case 22:case 23:return r.lanes=0,Dp(n,r,a)}return gr(n,r,a)}var zp,lh,jp,Bp;zp=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},lh=function(){},jp=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Li(Hn.current);var m=null;switch(a){case"input":d=fi(n,d),c=fi(n,c),m=[];break;case"select":d=ie({},d,{value:void 0}),c=ie({},c,{value:void 0}),m=[];break;case"textarea":d=fo(n,d),c=fo(n,c),m=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=ml)}vo(a,c);var v;a=null;for(j in d)if(!c.hasOwnProperty(j)&&d.hasOwnProperty(j)&&d[j]!=null)if(j==="style"){var R=d[j];for(v in R)R.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(o.hasOwnProperty(j)?m||(m=[]):(m=m||[]).push(j,null));for(j in c){var x=c[j];if(R=d!=null?d[j]:void 0,c.hasOwnProperty(j)&&x!==R&&(x!=null||R!=null))if(j==="style")if(R){for(v in R)!R.hasOwnProperty(v)||x&&x.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in x)x.hasOwnProperty(v)&&R[v]!==x[v]&&(a||(a={}),a[v]=x[v])}else a||(m||(m=[]),m.push(j,a)),a=x;else j==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,R=R?R.__html:void 0,x!=null&&R!==x&&(m=m||[]).push(j,x)):j==="children"?typeof x!="string"&&typeof x!="number"||(m=m||[]).push(j,""+x):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(o.hasOwnProperty(j)?(x!=null&&j==="onScroll"&&Ke("scroll",n),m||R===x||(m=[])):(m=m||[]).push(j,x))}a&&(m=m||[]).push("style",a);var j=m;(r.updateQueue=j)&&(r.flags|=4)}},Bp=function(n,r,a,c){a!==c&&(r.flags|=4)};function Zo(n,r){if(!Ye)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function Vv(n,r,a){var c=r.pendingProps;switch(xc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(r),null;case 1:return Kt(r.type)&&yl(),Lt(r),null;case 3:return c=r.stateNode,Ms(),Qe(Wt),Qe(Dt),$c(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Tl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,xn!==null&&(vh(xn),xn=null))),lh(n,r),Lt(r),null;case 5:jc(r);var d=Li(Qo.current);if(a=r.type,n!==null&&r.stateNode!=null)jp(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Lt(r),null}if(n=Li(Hn.current),Tl(r)){c=r.stateNode,a=r.type;var m=r.memoizedProps;switch(c[qn]=r,c[$o]=m,n=(r.mode&1)!==0,a){case"dialog":Ke("cancel",c),Ke("close",c);break;case"iframe":case"object":case"embed":Ke("load",c);break;case"video":case"audio":for(d=0;d<zo.length;d++)Ke(zo[d],c);break;case"source":Ke("error",c);break;case"img":case"image":case"link":Ke("error",c),Ke("load",c);break;case"details":Ke("toggle",c);break;case"input":Yi(c,m),Ke("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!m.multiple},Ke("invalid",c);break;case"textarea":Zi(c,m),Ke("invalid",c)}vo(a,m),d=null;for(var v in m)if(m.hasOwnProperty(v)){var R=m[v];v==="children"?typeof R=="string"?c.textContent!==R&&(m.suppressHydrationWarning!==!0&&pl(c.textContent,R,n),d=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(m.suppressHydrationWarning!==!0&&pl(c.textContent,R,n),d=["children",""+R]):o.hasOwnProperty(v)&&R!=null&&v==="onScroll"&&Ke("scroll",c)}switch(a){case"input":er(c),za(c,m,!0);break;case"textarea":er(c),po(c);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(c.onclick=ml)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ct(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[qn]=r,n[$o]=c,zp(n,r,!1,!1),r.stateNode=n;e:{switch(v=Eo(a,c),a){case"dialog":Ke("cancel",n),Ke("close",n),d=c;break;case"iframe":case"object":case"embed":Ke("load",n),d=c;break;case"video":case"audio":for(d=0;d<zo.length;d++)Ke(zo[d],n);d=c;break;case"source":Ke("error",n),d=c;break;case"img":case"image":case"link":Ke("error",n),Ke("load",n),d=c;break;case"details":Ke("toggle",n),d=c;break;case"input":Yi(n,c),d=fi(n,c),Ke("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ie({},c,{value:void 0}),Ke("invalid",n);break;case"textarea":Zi(n,c),d=fo(n,c),Ke("invalid",n);break;default:d=c}vo(a,d),R=d;for(m in R)if(R.hasOwnProperty(m)){var x=R[m];m==="style"?yo(n,x):m==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&mo(n,x)):m==="children"?typeof x=="string"?(a!=="textarea"||x!=="")&&Rr(n,x):typeof x=="number"&&Rr(n,""+x):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?x!=null&&m==="onScroll"&&Ke("scroll",n):x!=null&&ne(n,m,x,v))}switch(a){case"input":er(n),za(n,c,!1);break;case"textarea":er(n),po(n);break;case"option":c.value!=null&&n.setAttribute("value",""+be(c.value));break;case"select":n.multiple=!!c.multiple,m=c.value,m!=null?nr(n,!!c.multiple,m,!1):c.defaultValue!=null&&nr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=ml)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Lt(r),null;case 6:if(n&&r.stateNode!=null)Bp(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Li(Qo.current),Li(Hn.current),Tl(r)){if(c=r.stateNode,a=r.memoizedProps,c[qn]=r,(m=c.nodeValue!==a)&&(n=sn,n!==null))switch(n.tag){case 3:pl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&pl(c.nodeValue,a,(n.mode&1)!==0)}m&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[qn]=r,r.stateNode=c}return Lt(r),null;case 13:if(Qe(Je),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ye&&on!==null&&r.mode&1&&!(r.flags&128))Hf(),Ds(),r.flags|=98560,m=!1;else if(m=Tl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(t(318));if(m=r.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[qn]=r}else Ds(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Lt(r),m=!1}else xn!==null&&(vh(xn),xn=null),m=!0;if(!m)return r.flags&65536?r:null}return r.flags&128?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,r.mode&1&&(n===null||Je.current&1?pt===0&&(pt=3):Th())),r.updateQueue!==null&&(r.flags|=4),Lt(r),null);case 4:return Ms(),lh(n,r),n===null&&jo(r.stateNode.containerInfo),Lt(r),null;case 10:return Mc(r.type._context),Lt(r),null;case 17:return Kt(r.type)&&yl(),Lt(r),null;case 19:if(Qe(Je),m=r.memoizedState,m===null)return Lt(r),null;if(c=(r.flags&128)!==0,v=m.rendering,v===null)if(c)Zo(m,!1);else{if(pt!==0||n!==null&&n.flags&128)for(n=r.child;n!==null;){if(v=Pl(n),v!==null){for(r.flags|=128,Zo(m,!1),c=v.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)m=a,n=c,m.flags&=14680066,v=m.alternate,v===null?(m.childLanes=0,m.lanes=n,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=v.childLanes,m.lanes=v.lanes,m.child=v.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=v.memoizedProps,m.memoizedState=v.memoizedState,m.updateQueue=v.updateQueue,m.type=v.type,n=v.dependencies,m.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Je,Je.current&1|2),r.child}n=n.sibling}m.tail!==null&&He()>zs&&(r.flags|=128,c=!0,Zo(m,!1),r.lanes=4194304)}else{if(!c)if(n=Pl(v),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),Zo(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Ye)return Lt(r),null}else 2*He()-m.renderingStartTime>zs&&a!==1073741824&&(r.flags|=128,c=!0,Zo(m,!1),r.lanes=4194304);m.isBackwards?(v.sibling=r.child,r.child=v):(a=m.last,a!==null?a.sibling=v:r.child=v,m.last=v)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=He(),r.sibling=null,a=Je.current,We(Je,c?a&1|2:a&1),r):(Lt(r),null);case 22:case 23:return wh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&r.mode&1?an&1073741824&&(Lt(r),r.subtreeFlags&6&&(r.flags|=8192)):Lt(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function Lv(n,r){switch(xc(r),r.tag){case 1:return Kt(r.type)&&yl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ms(),Qe(Wt),Qe(Dt),$c(),n=r.flags,n&65536&&!(n&128)?(r.flags=n&-65537|128,r):null;case 5:return jc(r),null;case 13:if(Qe(Je),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Ds()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Qe(Je),null;case 4:return Ms(),null;case 10:return Mc(r.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var bl=!1,Ot=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Fs(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){nt(n,r,c)}else a.current=null}function uh(n,r,a){try{a()}catch(c){nt(n,r,c)}}var $p=!1;function Mv(n,r){if(wc=Lr,n=wf(),fc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var v=0,R=-1,x=-1,j=0,Y=0,J=n,G=null;t:for(;;){for(var re;J!==a||d!==0&&J.nodeType!==3||(R=v+d),J!==m||c!==0&&J.nodeType!==3||(x=v+c),J.nodeType===3&&(v+=J.nodeValue.length),(re=J.firstChild)!==null;)G=J,J=re;for(;;){if(J===n)break t;if(G===a&&++j===d&&(R=v),G===m&&++Y===c&&(x=v),(re=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=re}a=R===-1||x===-1?null:{start:R,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tc={focusedElem:n,selectionRange:a},Lr=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var le=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,it=le.memoizedState,F=r.stateNode,D=F.getSnapshotBeforeUpdate(r.elementType===r.type?ue:Nn(r.type,ue),it);F.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=r.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Z){nt(r,r.return,Z)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return le=$p,$p=!1,le}function ea(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var m=d.destroy;d.destroy=void 0,m!==void 0&&uh(r,a,m)}d=d.next}while(d!==c)}}function Fl(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function ch(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function qp(n){var r=n.alternate;r!==null&&(n.alternate=null,qp(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[qn],delete r[$o],delete r[Rc],delete r[_v],delete r[vv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Hp(n){return n.tag===5||n.tag===3||n.tag===4}function Wp(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Hp(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=ml));else if(c!==4&&(n=n.child,n!==null))for(hh(n,r,a),n=n.sibling;n!==null;)hh(n,r,a),n=n.sibling}function dh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(dh(n,r,a),n=n.sibling;n!==null;)dh(n,r,a),n=n.sibling}var At=null,Dn=!1;function $r(n,r,a){for(a=a.child;a!==null;)Kp(n,r,a),a=a.sibling}function Kp(n,r,a){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(Ti,a)}catch{}switch(a.tag){case 5:Ot||Fs(a,r);case 6:var c=At,d=Dn;At=null,$r(n,r,a),At=c,Dn=d,At!==null&&(Dn?(n=At,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):At.removeChild(a.stateNode));break;case 18:At!==null&&(Dn?(n=At,a=a.stateNode,n.nodeType===8?Ac(n.parentNode,a):n.nodeType===1&&Ac(n,a),Cn(n)):Ac(At,a.stateNode));break;case 4:c=At,d=Dn,At=a.stateNode.containerInfo,Dn=!0,$r(n,r,a),At=c,Dn=d;break;case 0:case 11:case 14:case 15:if(!Ot&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var m=d,v=m.destroy;m=m.tag,v!==void 0&&(m&2||m&4)&&uh(a,r,v),d=d.next}while(d!==c)}$r(n,r,a);break;case 1:if(!Ot&&(Fs(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){nt(a,r,R)}$r(n,r,a);break;case 21:$r(n,r,a);break;case 22:a.mode&1?(Ot=(c=Ot)||a.memoizedState!==null,$r(n,r,a),Ot=c):$r(n,r,a);break;default:$r(n,r,a)}}function Qp(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Ov),r.forEach(function(c){var d=Hv.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Vn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var m=n,v=r,R=v;e:for(;R!==null;){switch(R.tag){case 5:At=R.stateNode,Dn=!1;break e;case 3:At=R.stateNode.containerInfo,Dn=!0;break e;case 4:At=R.stateNode.containerInfo,Dn=!0;break e}R=R.return}if(At===null)throw Error(t(160));Kp(m,v,d),At=null,Dn=!1;var x=d.alternate;x!==null&&(x.return=null),d.return=null}catch(j){nt(d,r,j)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Gp(r,n),r=r.sibling}function Gp(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Vn(r,n),Kn(n),c&4){try{ea(3,n,n.return),Fl(3,n)}catch(ue){nt(n,n.return,ue)}try{ea(5,n,n.return)}catch(ue){nt(n,n.return,ue)}}break;case 1:Vn(r,n),Kn(n),c&512&&a!==null&&Fs(a,a.return);break;case 5:if(Vn(r,n),Kn(n),c&512&&a!==null&&Fs(a,a.return),n.flags&32){var d=n.stateNode;try{Rr(d,"")}catch(ue){nt(n,n.return,ue)}}if(c&4&&(d=n.stateNode,d!=null)){var m=n.memoizedProps,v=a!==null?a.memoizedProps:m,R=n.type,x=n.updateQueue;if(n.updateQueue=null,x!==null)try{R==="input"&&m.type==="radio"&&m.name!=null&&co(d,m),Eo(R,v);var j=Eo(R,m);for(v=0;v<x.length;v+=2){var Y=x[v],J=x[v+1];Y==="style"?yo(d,J):Y==="dangerouslySetInnerHTML"?mo(d,J):Y==="children"?Rr(d,J):ne(d,Y,J,j)}switch(R){case"input":ho(d,m);break;case"textarea":es(d,m);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var re=m.value;re!=null?nr(d,!!m.multiple,re,!1):G!==!!m.multiple&&(m.defaultValue!=null?nr(d,!!m.multiple,m.defaultValue,!0):nr(d,!!m.multiple,m.multiple?[]:"",!1))}d[$o]=m}catch(ue){nt(n,n.return,ue)}}break;case 6:if(Vn(r,n),Kn(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,m=n.memoizedProps;try{d.nodeValue=m}catch(ue){nt(n,n.return,ue)}}break;case 3:if(Vn(r,n),Kn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Cn(r.containerInfo)}catch(ue){nt(n,n.return,ue)}break;case 4:Vn(r,n),Kn(n);break;case 13:Vn(r,n),Kn(n),d=n.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(mh=He())),c&4&&Qp(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(Ot=(j=Ot)||Y,Vn(r,n),Ot=j):Vn(r,n),Kn(n),c&8192){if(j=n.memoizedState!==null,(n.stateNode.isHidden=j)&&!Y&&n.mode&1)for(oe=n,Y=n.child;Y!==null;){for(J=oe=Y;oe!==null;){switch(G=oe,re=G.child,G.tag){case 0:case 11:case 14:case 15:ea(4,G,G.return);break;case 1:Fs(G,G.return);var le=G.stateNode;if(typeof le.componentWillUnmount=="function"){c=G,a=G.return;try{r=c,le.props=r.memoizedProps,le.state=r.memoizedState,le.componentWillUnmount()}catch(ue){nt(c,a,ue)}}break;case 5:Fs(G,G.return);break;case 22:if(G.memoizedState!==null){Jp(J);continue}}re!==null?(re.return=G,oe=re):Jp(J)}Y=Y.sibling}e:for(Y=null,J=n;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,j?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(R=J.stateNode,x=J.memoizedProps.style,v=x!=null&&x.hasOwnProperty("display")?x.display:null,R.style.display=go("display",v))}catch(ue){nt(n,n.return,ue)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=j?"":J.memoizedProps}catch(ue){nt(n,n.return,ue)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===n)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===n)break e;for(;J.sibling===null;){if(J.return===null||J.return===n)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Vn(r,n),Kn(n),c&4&&Qp(n);break;case 21:break;default:Vn(r,n),Kn(n)}}function Kn(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Hp(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Rr(d,""),c.flags&=-33);var m=Wp(n);dh(n,m,d);break;case 3:case 4:var v=c.stateNode.containerInfo,R=Wp(n);hh(n,R,v);break;default:throw Error(t(161))}}catch(x){nt(n,n.return,x)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function bv(n,r,a){oe=n,Xp(n)}function Xp(n,r,a){for(var c=(n.mode&1)!==0;oe!==null;){var d=oe,m=d.child;if(d.tag===22&&c){var v=d.memoizedState!==null||bl;if(!v){var R=d.alternate,x=R!==null&&R.memoizedState!==null||Ot;R=bl;var j=Ot;if(bl=v,(Ot=x)&&!j)for(oe=d;oe!==null;)v=oe,x=v.child,v.tag===22&&v.memoizedState!==null?Zp(d):x!==null?(x.return=v,oe=x):Zp(d);for(;m!==null;)oe=m,Xp(m),m=m.sibling;oe=d,bl=R,Ot=j}Yp(n)}else d.subtreeFlags&8772&&m!==null?(m.return=d,oe=m):Yp(n)}}function Yp(n){for(;oe!==null;){var r=oe;if(r.flags&8772){var a=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ot||Fl(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Ot)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Nn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var m=r.updateQueue;m!==null&&Jf(r,m,c);break;case 3:var v=r.updateQueue;if(v!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Jf(r,v,a)}break;case 5:var R=r.stateNode;if(a===null&&r.flags&4){a=R;var x=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&a.focus();break;case"img":x.src&&(a.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var j=r.alternate;if(j!==null){var Y=j.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&Cn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ot||r.flags&512&&ch(r)}catch(G){nt(r,r.return,G)}}if(r===n){oe=null;break}if(a=r.sibling,a!==null){a.return=r.return,oe=a;break}oe=r.return}}function Jp(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,oe=a;break}oe=r.return}}function Zp(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{Fl(4,r)}catch(x){nt(r,a,x)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(x){nt(r,d,x)}}var m=r.return;try{ch(r)}catch(x){nt(r,m,x)}break;case 5:var v=r.return;try{ch(r)}catch(x){nt(r,v,x)}}}catch(x){nt(r,r.return,x)}if(r===n){oe=null;break}var R=r.sibling;if(R!==null){R.return=r.return,oe=R;break}oe=r.return}}var Fv=Math.ceil,Ul=de.ReactCurrentDispatcher,fh=de.ReactCurrentOwner,_n=de.ReactCurrentBatchConfig,Le=0,Et=null,at=null,Rt=0,an=0,Us=Fr(0),pt=0,ta=null,Mi=0,zl=0,ph=0,na=null,Gt=null,mh=0,zs=1/0,yr=null,jl=!1,gh=null,qr=null,Bl=!1,Hr=null,$l=0,ra=0,yh=null,ql=-1,Hl=0;function Bt(){return Le&6?He():ql!==-1?ql:ql=He()}function Wr(n){return n.mode&1?Le&2&&Rt!==0?Rt&-Rt:wv.transition!==null?(Hl===0&&(Hl=Si()),Hl):(n=ke,n!==0||(n=window.event,n=n===void 0?16:No(n.type)),n):1}function Ln(n,r,a,c){if(50<ra)throw ra=0,yh=null,Error(t(185));xr(n,a,c),(!(Le&2)||n!==Et)&&(n===Et&&(!(Le&2)&&(zl|=a),pt===4&&Kr(n,Rt)),Xt(n,c),a===1&&Le===0&&!(r.mode&1)&&(zs=He()+500,vl&&zr()))}function Xt(n,r){var a=n.callbackNode;sr(n,r);var c=Ii(n,n===Et?Rt:0);if(c===0)a!==null&&Ro(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Ro(a),r===1)n.tag===0?Ev(tm.bind(null,n)):zf(tm.bind(null,n)),gv(function(){!(Le&6)&&zr()}),a=null;else{switch(Dr(c)){case 1:a=wi;break;case 4:a=Cr;break;case 16:a=hn;break;case 536870912:a=Ha;break;default:a=hn}a=um(a,em.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function em(n,r){if(ql=-1,Hl=0,Le&6)throw Error(t(327));var a=n.callbackNode;if(js()&&n.callbackNode!==a)return null;var c=Ii(n,n===Et?Rt:0);if(c===0)return null;if(c&30||c&n.expiredLanes||r)r=Wl(n,c);else{r=c;var d=Le;Le|=2;var m=rm();(Et!==n||Rt!==r)&&(yr=null,zs=He()+500,Fi(n,r));do try{jv();break}catch(R){nm(n,R)}while(!0);Oc(),Ul.current=m,Le=d,at!==null?r=0:(Et=null,Rt=0,r=pt)}if(r!==0){if(r===2&&(d=tn(n),d!==0&&(c=d,r=_h(n,d))),r===1)throw a=ta,Fi(n,0),Kr(n,c),Xt(n,He()),a;if(r===6)Kr(n,c);else{if(d=n.current.alternate,!(c&30)&&!Uv(d)&&(r=Wl(n,c),r===2&&(m=tn(n),m!==0&&(c=m,r=_h(n,m))),r===1))throw a=ta,Fi(n,0),Kr(n,c),Xt(n,He()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Ui(n,Gt,yr);break;case 3:if(Kr(n,c),(c&130023424)===c&&(r=mh+500-He(),10<r)){if(Ii(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Bt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Sc(Ui.bind(null,n,Gt,yr),r);break}Ui(n,Gt,yr);break;case 4:if(Kr(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var v=31-Ut(c);m=1<<v,v=r[v],v>d&&(d=v),c&=~m}if(c=d,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Fv(c/1960))-c,10<c){n.timeoutHandle=Sc(Ui.bind(null,n,Gt,yr),c);break}Ui(n,Gt,yr);break;case 5:Ui(n,Gt,yr);break;default:throw Error(t(329))}}}return Xt(n,He()),n.callbackNode===a?em.bind(null,n):null}function _h(n,r){var a=na;return n.current.memoizedState.isDehydrated&&(Fi(n,r).flags|=256),n=Wl(n,r),n!==2&&(r=Gt,Gt=a,r!==null&&vh(r)),n}function vh(n){Gt===null?Gt=n:Gt.push.apply(Gt,n)}function Uv(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],m=d.getSnapshot;d=d.value;try{if(!kn(m(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Kr(n,r){for(r&=~ph,r&=~zl,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Ut(r),c=1<<a;n[a]=-1,r&=~c}}function tm(n){if(Le&6)throw Error(t(327));js();var r=Ii(n,0);if(!(r&1))return Xt(n,He()),null;var a=Wl(n,r);if(n.tag!==0&&a===2){var c=tn(n);c!==0&&(r=c,a=_h(n,c))}if(a===1)throw a=ta,Fi(n,0),Kr(n,r),Xt(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Ui(n,Gt,yr),Xt(n,He()),null}function Eh(n,r){var a=Le;Le|=1;try{return n(r)}finally{Le=a,Le===0&&(zs=He()+500,vl&&zr())}}function bi(n){Hr!==null&&Hr.tag===0&&!(Le&6)&&js();var r=Le;Le|=1;var a=_n.transition,c=ke;try{if(_n.transition=null,ke=1,n)return n()}finally{ke=c,_n.transition=a,Le=r,!(Le&6)&&zr()}}function wh(){an=Us.current,Qe(Us)}function Fi(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,mv(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(xc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&yl();break;case 3:Ms(),Qe(Wt),Qe(Dt),$c();break;case 5:jc(c);break;case 4:Ms();break;case 13:Qe(Je);break;case 19:Qe(Je);break;case 10:Mc(c.type._context);break;case 22:case 23:wh()}a=a.return}if(Et=n,at=n=Qr(n.current,null),Rt=an=r,pt=0,ta=null,ph=zl=Mi=0,Gt=na=null,Vi!==null){for(r=0;r<Vi.length;r++)if(a=Vi[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,m=a.pending;if(m!==null){var v=m.next;m.next=d,c.next=v}a.pending=c}Vi=null}return n}function nm(n,r){do{var a=at;try{if(Oc(),kl.current=Vl,xl){for(var c=Ze.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}xl=!1}if(Oi=0,vt=ft=Ze=null,Go=!1,Xo=0,fh.current=null,a===null||a.return===null){pt=1,ta=r,at=null;break}e:{var m=n,v=a.return,R=a,x=r;if(r=Rt,R.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var j=x,Y=R,J=Y.tag;if(!(Y.mode&1)&&(J===0||J===11||J===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var re=Cp(v);if(re!==null){re.flags&=-257,Pp(re,v,R,m,r),re.mode&1&&Rp(m,j,r),r=re,x=j;var le=r.updateQueue;if(le===null){var ue=new Set;ue.add(x),r.updateQueue=ue}else le.add(x);break e}else{if(!(r&1)){Rp(m,j,r),Th();break e}x=Error(t(426))}}else if(Ye&&R.mode&1){var it=Cp(v);if(it!==null){!(it.flags&65536)&&(it.flags|=256),Pp(it,v,R,m,r),Vc(bs(x,R));break e}}m=x=bs(x,R),pt!==4&&(pt=2),na===null?na=[m]:na.push(m),m=v;do{switch(m.tag){case 3:m.flags|=65536,r&=-r,m.lanes|=r;var F=Sp(m,x,r);Yf(m,F);break e;case 1:R=x;var D=m.type,z=m.stateNode;if(!(m.flags&128)&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(qr===null||!qr.has(z)))){m.flags|=65536,r&=-r,m.lanes|=r;var Z=Ap(m,R,r);Yf(m,Z);break e}}m=m.return}while(m!==null)}sm(a)}catch(ce){r=ce,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function rm(){var n=Ul.current;return Ul.current=Vl,n===null?Vl:n}function Th(){(pt===0||pt===3||pt===2)&&(pt=4),Et===null||!(Mi&268435455)&&!(zl&268435455)||Kr(Et,Rt)}function Wl(n,r){var a=Le;Le|=2;var c=rm();(Et!==n||Rt!==r)&&(yr=null,Fi(n,r));do try{zv();break}catch(d){nm(n,d)}while(!0);if(Oc(),Le=a,Ul.current=c,at!==null)throw Error(t(261));return Et=null,Rt=0,pt}function zv(){for(;at!==null;)im(at)}function jv(){for(;at!==null&&!$a();)im(at)}function im(n){var r=lm(n.alternate,n,an);n.memoizedProps=n.pendingProps,r===null?sm(n):at=r,fh.current=null}function sm(n){var r=n;do{var a=r.alternate;if(n=r.return,r.flags&32768){if(a=Lv(a,r),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{pt=6,at=null;return}}else if(a=Vv(a,r,an),a!==null){at=a;return}if(r=r.sibling,r!==null){at=r;return}at=r=n}while(r!==null);pt===0&&(pt=5)}function Ui(n,r,a){var c=ke,d=_n.transition;try{_n.transition=null,ke=1,Bv(n,r,a,c)}finally{_n.transition=d,ke=c}return null}function Bv(n,r,a,c){do js();while(Hr!==null);if(Le&6)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var m=a.lanes|a.childLanes;if(Be(n,m),n===Et&&(at=Et=null,Rt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Bl||(Bl=!0,um(hn,function(){return js(),null})),m=(a.flags&15990)!==0,a.subtreeFlags&15990||m){m=_n.transition,_n.transition=null;var v=ke;ke=1;var R=Le;Le|=4,fh.current=null,Mv(n,a),Gp(a,n),lv(Tc),Lr=!!wc,Tc=wc=null,n.current=a,bv(a),sc(),Le=R,ke=v,_n.transition=m}else n.current=a;if(Bl&&(Bl=!1,Hr=n,$l=d),m=n.pendingLanes,m===0&&(qr=null),Wa(a.stateNode),Xt(n,He()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(jl)throw jl=!1,n=gh,gh=null,n;return $l&1&&n.tag!==0&&js(),m=n.pendingLanes,m&1?n===yh?ra++:(ra=0,yh=n):ra=0,zr(),null}function js(){if(Hr!==null){var n=Dr($l),r=_n.transition,a=ke;try{if(_n.transition=null,ke=16>n?16:n,Hr===null)var c=!1;else{if(n=Hr,Hr=null,$l=0,Le&6)throw Error(t(331));var d=Le;for(Le|=4,oe=n.current;oe!==null;){var m=oe,v=m.child;if(oe.flags&16){var R=m.deletions;if(R!==null){for(var x=0;x<R.length;x++){var j=R[x];for(oe=j;oe!==null;){var Y=oe;switch(Y.tag){case 0:case 11:case 15:ea(8,Y,m)}var J=Y.child;if(J!==null)J.return=Y,oe=J;else for(;oe!==null;){Y=oe;var G=Y.sibling,re=Y.return;if(qp(Y),Y===j){oe=null;break}if(G!==null){G.return=re,oe=G;break}oe=re}}}var le=m.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var it=ue.sibling;ue.sibling=null,ue=it}while(ue!==null)}}oe=m}}if(m.subtreeFlags&2064&&v!==null)v.return=m,oe=v;else e:for(;oe!==null;){if(m=oe,m.flags&2048)switch(m.tag){case 0:case 11:case 15:ea(9,m,m.return)}var F=m.sibling;if(F!==null){F.return=m.return,oe=F;break e}oe=m.return}}var D=n.current;for(oe=D;oe!==null;){v=oe;var z=v.child;if(v.subtreeFlags&2064&&z!==null)z.return=v,oe=z;else e:for(v=D;oe!==null;){if(R=oe,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:Fl(9,R)}}catch(ce){nt(R,R.return,ce)}if(R===v){oe=null;break e}var Z=R.sibling;if(Z!==null){Z.return=R.return,oe=Z;break e}oe=R.return}}if(Le=d,zr(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(Ti,n)}catch{}c=!0}return c}finally{ke=a,_n.transition=r}}return!1}function om(n,r,a){r=bs(a,r),r=Sp(n,r,1),n=Br(n,r,1),r=Bt(),n!==null&&(xr(n,1,r),Xt(n,r))}function nt(n,r,a){if(n.tag===3)om(n,n,a);else for(;r!==null;){if(r.tag===3){om(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(qr===null||!qr.has(c))){n=bs(a,n),n=Ap(r,n,1),r=Br(r,n,1),n=Bt(),r!==null&&(xr(r,1,n),Xt(r,n));break}}r=r.return}}function $v(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Bt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Rt&a)===a&&(pt===4||pt===3&&(Rt&130023424)===Rt&&500>He()-mh?Fi(n,0):ph|=a),Xt(n,r)}function am(n,r){r===0&&(n.mode&1?(r=cs,cs<<=1,!(cs&130023424)&&(cs=4194304)):r=1);var a=Bt();n=pr(n,r),n!==null&&(xr(n,r,a),Xt(n,a))}function qv(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),am(n,a)}function Hv(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),am(n,a)}var lm;lm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if(!(n.lanes&a)&&!(r.flags&128))return Qt=!1,Dv(n,r,a);Qt=!!(n.flags&131072)}else Qt=!1,Ye&&r.flags&1048576&&jf(r,wl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Ml(n,r),n=r.pendingProps;var d=ks(r,Dt.current);Os(r,a),d=Wc(null,r,c,n,d,a);var m=Kc();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Kt(c)?(m=!0,_l(r)):m=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Uc(r),d.updater=Ll,r.stateNode=d,d._reactInternals=r,Zc(r,c,n,a),r=rh(null,r,c,!0,m,a)):(r.tag=0,Ye&&m&&kc(r),jt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Ml(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=Kv(c),n=Nn(c,n),d){case 0:r=nh(null,r,c,n,a);break e;case 1:r=Lp(null,r,c,n,a);break e;case 11:r=kp(null,r,c,n,a);break e;case 14:r=xp(null,r,c,Nn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Nn(c,d),nh(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Nn(c,d),Lp(n,r,c,d,a);case 3:e:{if(Op(r),n===null)throw Error(t(387));c=r.pendingProps,m=r.memoizedState,d=m.element,Xf(n,r),Cl(r,c,null,a);var v=r.memoizedState;if(c=v.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){d=bs(Error(t(423)),r),r=Mp(n,r,c,a,d);break e}else if(c!==d){d=bs(Error(t(424)),r),r=Mp(n,r,c,a,d);break e}else for(on=br(r.stateNode.containerInfo.firstChild),sn=r,Ye=!0,xn=null,a=Qf(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ds(),c===d){r=gr(n,r,a);break e}jt(n,r,c,a)}r=r.child}return r;case 5:return Zf(r),n===null&&Dc(r),c=r.type,d=r.pendingProps,m=n!==null?n.memoizedProps:null,v=d.children,Ic(c,d)?v=null:m!==null&&Ic(c,m)&&(r.flags|=32),Vp(n,r),jt(n,r,v,a),r.child;case 6:return n===null&&Dc(r),null;case 13:return bp(n,r,a);case 4:return zc(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Vs(r,null,c,a):jt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Nn(c,d),kp(n,r,c,d,a);case 7:return jt(n,r,r.pendingProps,a),r.child;case 8:return jt(n,r,r.pendingProps.children,a),r.child;case 12:return jt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,m=r.memoizedProps,v=d.value,We(Sl,c._currentValue),c._currentValue=v,m!==null)if(kn(m.value,v)){if(m.children===d.children&&!Wt.current){r=gr(n,r,a);break e}}else for(m=r.child,m!==null&&(m.return=r);m!==null;){var R=m.dependencies;if(R!==null){v=m.child;for(var x=R.firstContext;x!==null;){if(x.context===c){if(m.tag===1){x=mr(-1,a&-a),x.tag=2;var j=m.updateQueue;if(j!==null){j=j.shared;var Y=j.pending;Y===null?x.next=x:(x.next=Y.next,Y.next=x),j.pending=x}}m.lanes|=a,x=m.alternate,x!==null&&(x.lanes|=a),bc(m.return,a,r),R.lanes|=a;break}x=x.next}}else if(m.tag===10)v=m.type===r.type?null:m.child;else if(m.tag===18){if(v=m.return,v===null)throw Error(t(341));v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),bc(v,a,r),v=m.sibling}else v=m.child;if(v!==null)v.return=m;else for(v=m;v!==null;){if(v===r){v=null;break}if(m=v.sibling,m!==null){m.return=v.return,v=m;break}v=v.return}m=v}jt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Os(r,a),d=gn(d),c=c(d),r.flags|=1,jt(n,r,c,a),r.child;case 14:return c=r.type,d=Nn(c,r.pendingProps),d=Nn(c.type,d),xp(n,r,c,d,a);case 15:return Np(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Nn(c,d),Ml(n,r),r.tag=1,Kt(c)?(n=!0,_l(r)):n=!1,Os(r,a),Tp(r,c,d),Zc(r,c,d,a),rh(null,r,c,!0,n,a);case 19:return Up(n,r,a);case 22:return Dp(n,r,a)}throw Error(t(156,r.tag))};function um(n,r){return ls(n,r)}function Wv(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,r,a,c){return new Wv(n,r,a,c)}function Ih(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Kv(n){if(typeof n=="function")return Ih(n)?1:0;if(n!=null){if(n=n.$$typeof,n===L)return 11;if(n===xt)return 14}return 2}function Qr(n,r){var a=n.alternate;return a===null?(a=vn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Kl(n,r,a,c,d,m){var v=2;if(c=n,typeof n=="function")Ih(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case P:return zi(a.children,d,m,r);case T:v=8,d|=8;break;case I:return n=vn(12,a,r,d|2),n.elementType=I,n.lanes=m,n;case C:return n=vn(13,a,r,d),n.elementType=C,n.lanes=m,n;case $e:return n=vn(19,a,r,d),n.elementType=$e,n.lanes=m,n;case je:return Ql(a,d,m,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case k:v=10;break e;case N:v=9;break e;case L:v=11;break e;case xt:v=14;break e;case Nt:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=vn(v,a,r,d),r.elementType=n,r.type=c,r.lanes=m,r}function zi(n,r,a,c){return n=vn(7,n,c,r),n.lanes=a,n}function Ql(n,r,a,c){return n=vn(22,n,c,r),n.elementType=je,n.lanes=a,n.stateNode={isHidden:!1},n}function Sh(n,r,a){return n=vn(6,n,null,r),n.lanes=a,n}function Ah(n,r,a){return r=vn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function Qv(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kr(0),this.expirationTimes=kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Rh(n,r,a,c,d,m,v,R,x){return n=new Qv(n,r,a,R,x),r===1?(r=1,m===!0&&(r|=8)):r=0,m=vn(3,null,null,r),n.current=m,m.stateNode=n,m.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uc(m),n}function Gv(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function cm(n){if(!n)return Ur;n=n._reactInternals;e:{if(Tn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Kt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Kt(a))return Ff(n,a,r)}return r}function hm(n,r,a,c,d,m,v,R,x){return n=Rh(a,c,!0,n,d,m,v,R,x),n.context=cm(null),a=n.current,c=Bt(),d=Wr(a),m=mr(c,d),m.callback=r??null,Br(a,m,d),n.current.lanes=d,xr(n,d,c),Xt(n,c),n}function Gl(n,r,a,c){var d=r.current,m=Bt(),v=Wr(d);return a=cm(a),r.context===null?r.context=a:r.pendingContext=a,r=mr(m,v),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Br(d,r,v),n!==null&&(Ln(n,d,v,m),Rl(n,d,v)),v}function Xl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Ch(n,r){dm(n,r),(n=n.alternate)&&dm(n,r)}var fm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ph(n){this._internalRoot=n}Yl.prototype.render=Ph.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));Gl(n,r,null,null)},Yl.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;bi(function(){Gl(null,n,null,null)}),r[cr]=null}};function Yl(n){this._internalRoot=n}Yl.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ya();n={blockedOn:null,target:n,priority:r};for(var a=0;a<zn.length&&r!==0&&r<zn[a].priority;a++);zn.splice(a,0,n),a===0&&el(n)}};function kh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Jl(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pm(){}function Xv(n,r,a,c,d){if(d){if(typeof c=="function"){var m=c;c=function(){var j=Xl(v);m.call(j)}}var v=hm(r,c,n,0,null,!1,!1,"",pm);return n._reactRootContainer=v,n[cr]=v.current,jo(n.nodeType===8?n.parentNode:n),bi(),v}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var R=c;c=function(){var j=Xl(x);R.call(j)}}var x=Rh(n,0,!1,null,null,!1,!1,"",pm);return n._reactRootContainer=x,n[cr]=x.current,jo(n.nodeType===8?n.parentNode:n),bi(function(){Gl(r,x,a,c)}),x}function Zl(n,r,a,c,d){var m=a._reactRootContainer;if(m){var v=m;if(typeof d=="function"){var R=d;d=function(){var x=Xl(v);R.call(x)}}Gl(r,v,n,d)}else v=Xv(a,r,n,d,c);return Xl(v)}Ga=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=Pr(r.pendingLanes);a!==0&&(Nr(r,a|1),Xt(r,He()),!(Le&6)&&(zs=He()+500,zr()))}break;case 13:bi(function(){var c=pr(n,1);if(c!==null){var d=Bt();Ln(c,n,1,d)}}),Ch(n,1)}},hs=function(n){if(n.tag===13){var r=pr(n,134217728);if(r!==null){var a=Bt();Ln(r,n,134217728,a)}Ch(n,134217728)}},Xa=function(n){if(n.tag===13){var r=Wr(n),a=pr(n,r);if(a!==null){var c=Bt();Ln(a,n,r,c)}Ch(n,r)}},Ya=function(){return ke},Ja=function(n,r){var a=ke;try{return ke=n,r()}finally{ke=a}},ns=function(n,r,a){switch(r){case"input":if(ho(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=gl(c);if(!d)throw Error(t(90));Xi(c),ho(c,d)}}}break;case"textarea":es(n,a);break;case"select":r=a.value,r!=null&&nr(n,!!a.multiple,r,!1)}},yi=Eh,To=bi;var Yv={usingClientEntryPoint:!1,Events:[qo,Cs,gl,Fn,wo,Eh]},ia={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jv={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ao(n),n===null?null:n.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eu.isDisabled&&eu.supportsFiber)try{Ti=eu.inject(Jv),en=eu}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yv,Yt.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kh(r))throw Error(t(200));return Gv(n,r,null,a)},Yt.createRoot=function(n,r){if(!kh(n))throw Error(t(299));var a=!1,c="",d=fm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Rh(n,1,!1,null,null,a,!1,c,d),n[cr]=r.current,jo(n.nodeType===8?n.parentNode:n),new Ph(r)},Yt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ao(r),n=n===null?null:n.stateNode,n},Yt.flushSync=function(n){return bi(n)},Yt.hydrate=function(n,r,a){if(!Jl(r))throw Error(t(200));return Zl(null,n,r,!0,a)},Yt.hydrateRoot=function(n,r,a){if(!kh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,m="",v=fm;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),r=hm(r,null,n,1,a??null,d,!1,m,v),n[cr]=r.current,jo(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new Yl(r)},Yt.render=function(n,r,a){if(!Jl(r))throw Error(t(200));return Zl(null,n,r,!1,a)},Yt.unmountComponentAtNode=function(n){if(!Jl(n))throw Error(t(40));return n._reactRootContainer?(bi(function(){Zl(null,null,n,!1,function(){n._reactRootContainer=null,n[cr]=null})}),!0):!1},Yt.unstable_batchedUpdates=Eh,Yt.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!Jl(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Zl(n,r,a,!1,c)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Tm;function l0(){if(Tm)return Dh.exports;Tm=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Dh.exports=a0(),Dh.exports}var Im;function u0(){if(Im)return tu;Im=1;var i=l0();return tu.createRoot=i.createRoot,tu.hydrateRoot=i.hydrateRoot,tu}var c0=u0(),oa={},Sm;function h0(){if(Sm)return oa;Sm=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.parse=h,oa.serialize=y;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,u=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function h(S,V){const b=new u,B=S.length;if(B<2)return b;const U=(V==null?void 0:V.decode)||E;let H=0;do{const X=S.indexOf("=",H);if(X===-1)break;const ne=S.indexOf(";",H),de=ne===-1?B:ne;if(X>de){H=S.lastIndexOf(";",X-1)+1;continue}const Ie=f(S,H,X),Ee=g(S,X,Ie),P=S.slice(Ie,Ee);if(b[P]===void 0){let T=f(S,X+1,de),I=g(S,de,T);const k=U(S.slice(T,I));b[P]=k}H=de+1}while(H<B);return b}function f(S,V,b){do{const B=S.charCodeAt(V);if(B!==32&&B!==9)return V}while(++V<b);return b}function g(S,V,b){for(;V>b;){const B=S.charCodeAt(--V);if(B!==32&&B!==9)return V+1}return b}function y(S,V,b){const B=(b==null?void 0:b.encode)||encodeURIComponent;if(!i.test(S))throw new TypeError(`argument name is invalid: ${S}`);const U=B(V);if(!e.test(U))throw new TypeError(`argument val is invalid: ${V}`);let H=S+"="+U;if(!b)return H;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);H+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);H+="; Domain="+b.domain}if(b.path){if(!s.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);H+="; Path="+b.path}if(b.expires){if(!A(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);H+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(H+="; HttpOnly"),b.secure&&(H+="; Secure"),b.partitioned&&(H+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":H+="; Priority=Low";break;case"medium":H+="; Priority=Medium";break;case"high":H+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":H+="; SameSite=Strict";break;case"lax":H+="; SameSite=Lax";break;case"none":H+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return H}function E(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function A(S){return o.call(S)==="[object Date]"}return oa}h0();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Am="popstate";function d0(i={}){function e(s,o){let{pathname:u,search:h,hash:f}=s.location;return Qh("",{pathname:u,search:h,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ea(o)}return p0(e,t,null,i)}function et(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Yn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f0(){return Math.random().toString(36).substring(2,10)}function Rm(i,e){return{usr:i.state,key:i.key,idx:e}}function Qh(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?ro(e):e,state:t,key:e&&e.key||s||f0()}}function Ea({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function ro(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function p0(i,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,f="POP",g=null,y=E();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function E(){return(h.state||{idx:null}).idx}function A(){f="POP";let U=E(),H=U==null?null:U-y;y=U,g&&g({action:f,location:B.location,delta:H})}function S(U,H){f="PUSH";let X=Qh(B.location,U,H);y=E()+1;let ne=Rm(X,y),de=B.createHref(X);try{h.pushState(ne,"",de)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;o.location.assign(de)}u&&g&&g({action:f,location:B.location,delta:1})}function V(U,H){f="REPLACE";let X=Qh(B.location,U,H);y=E();let ne=Rm(X,y),de=B.createHref(X);h.replaceState(ne,"",de),u&&g&&g({action:f,location:B.location,delta:0})}function b(U){let H=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof U=="string"?U:Ea(U);return X=X.replace(/ $/,"%20"),et(H,`No window.location.(origin|href) available to create URL for href: ${X}`),new URL(X,H)}let B={get action(){return f},get location(){return i(o,h)},listen(U){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Am,A),g=U,()=>{o.removeEventListener(Am,A),g=null}},createHref(U){return e(o,U)},createURL:b,encodeLocation(U){let H=b(U);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:V,go(U){return h.go(U)}};return B}function bg(i,e,t="/"){return m0(i,e,t,!1)}function m0(i,e,t,s){let o=typeof e=="string"?ro(e):e,u=ii(o.pathname||"/",t);if(u==null)return null;let h=Fg(i);g0(h);let f=null;for(let g=0;f==null&&g<h.length;++g){let y=C0(u);f=A0(h[g],y,s)}return f}function Fg(i,e=[],t=[],s=""){let o=(u,h,f)=>{let g={relativePath:f===void 0?u.path||"":f,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(et(g.relativePath.startsWith(s),`Absolute route path "${g.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(s.length));let y=_r([s,g.relativePath]),E=t.concat(g);u.children&&u.children.length>0&&(et(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Fg(u.children,e,E,y)),!(u.path==null&&!u.index)&&e.push({path:y,score:I0(y,u.index),routesMeta:E})};return i.forEach((u,h)=>{var f;if(u.path===""||!((f=u.path)!=null&&f.includes("?")))o(u,h);else for(let g of Ug(u.path))o(u,h,g)}),e}function Ug(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Ug(s.join("/")),f=[];return f.push(...h.map(g=>g===""?u:[u,g].join("/"))),o&&f.push(...h),f.map(g=>i.startsWith("/")&&g===""?"/":g)}function g0(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:S0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var y0=/^:[\w-]+$/,_0=3,v0=2,E0=1,w0=10,T0=-2,Cm=i=>i==="*";function I0(i,e){let t=i.split("/"),s=t.length;return t.some(Cm)&&(s+=T0),e&&(s+=v0),t.filter(o=>!Cm(o)).reduce((o,u)=>o+(y0.test(u)?_0:u===""?E0:w0),s)}function S0(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function A0(i,e,t=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let f=0;f<s.length;++f){let g=s[f],y=f===s.length-1,E=u==="/"?e:e.slice(u.length)||"/",A=wu({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},E),S=g.route;if(!A&&y&&t&&!s[s.length-1].route.index&&(A=wu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},E)),!A)return null;Object.assign(o,A.params),h.push({params:o,pathname:_r([u,A.pathname]),pathnameBase:N0(_r([u,A.pathnameBase])),route:S}),A.pathnameBase!=="/"&&(u=_r([u,A.pathnameBase]))}return h}function wu(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=R0(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,{paramName:E,isOptional:A},S)=>{if(E==="*"){let b=f[S]||"";h=u.slice(0,u.length-b.length).replace(/(.)\/+$/,"$1")}const V=f[S];return A&&!V?y[E]=void 0:y[E]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:i}}function R0(i,e=!1,t=!0){Yn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,f,g)=>(s.push({paramName:f,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function C0(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${i}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ii(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function P0(i,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?ro(i):i;return{pathname:t?t.startsWith("/")?t:k0(t,e):e,search:D0(s),hash:V0(o)}}function k0(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Oh(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x0(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function zg(i){let e=x0(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function jg(i,e,t,s=!1){let o;typeof i=="string"?o=ro(i):(o={...i},et(!o.pathname||!o.pathname.includes("?"),Oh("?","pathname","search",o)),et(!o.pathname||!o.pathname.includes("#"),Oh("#","pathname","hash",o)),et(!o.search||!o.search.includes("#"),Oh("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,f;if(h==null)f=t;else{let A=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),A-=1;o.pathname=S.join("/")}f=A>=0?e[A]:"/"}let g=P0(o,f),y=h&&h!=="/"&&h.endsWith("/"),E=(u||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||E)&&(g.pathname+="/"),g}var _r=i=>i.join("/").replace(/\/\/+/g,"/"),N0=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),D0=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,V0=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function L0(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Bg=["POST","PUT","PATCH","DELETE"];new Set(Bg);var O0=["GET",...Bg];new Set(O0);var io=q.createContext(null);io.displayName="DataRouter";var bu=q.createContext(null);bu.displayName="DataRouterState";var $g=q.createContext({isTransitioning:!1});$g.displayName="ViewTransition";var M0=q.createContext(new Map);M0.displayName="Fetchers";var b0=q.createContext(null);b0.displayName="Await";var Zn=q.createContext(null);Zn.displayName="Navigation";var Pa=q.createContext(null);Pa.displayName="Location";var Sr=q.createContext({outlet:null,matches:[],isDataRoute:!1});Sr.displayName="Route";var Td=q.createContext(null);Td.displayName="RouteError";function F0(i,{relative:e}={}){et(ka(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=q.useContext(Zn),{hash:o,pathname:u,search:h}=xa(i,{relative:e}),f=u;return t!=="/"&&(f=u==="/"?t:_r([t,u])),s.createHref({pathname:f,search:h,hash:o})}function ka(){return q.useContext(Pa)!=null}function Ki(){return et(ka(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Pa).location}var qg="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Hg(i){q.useContext(Zn).static||q.useLayoutEffect(i)}function Wg(){let{isDataRoute:i}=q.useContext(Sr);return i?Y0():U0()}function U0(){et(ka(),"useNavigate() may be used only in the context of a <Router> component.");let i=q.useContext(io),{basename:e,navigator:t}=q.useContext(Zn),{matches:s}=q.useContext(Sr),{pathname:o}=Ki(),u=JSON.stringify(zg(s)),h=q.useRef(!1);return Hg(()=>{h.current=!0}),q.useCallback((g,y={})=>{if(Yn(h.current,qg),!h.current)return;if(typeof g=="number"){t.go(g);return}let E=jg(g,JSON.parse(u),o,y.relative==="path");i==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:_r([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,u,o,i])}q.createContext(null);function xa(i,{relative:e}={}){let{matches:t}=q.useContext(Sr),{pathname:s}=Ki(),o=JSON.stringify(zg(t));return q.useMemo(()=>jg(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function z0(i,e){return Kg(i,e)}function Kg(i,e,t,s){var H;et(ka(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=q.useContext(Zn),{matches:u}=q.useContext(Sr),h=u[u.length-1],f=h?h.params:{},g=h?h.pathname:"/",y=h?h.pathnameBase:"/",E=h&&h.route;{let X=E&&E.path||"";Qg(g,!E||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let A=Ki(),S;if(e){let X=typeof e=="string"?ro(e):e;et(y==="/"||((H=X.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${X.pathname}" was given in the \`location\` prop.`),S=X}else S=A;let V=S.pathname||"/",b=V;if(y!=="/"){let X=y.replace(/^\//,"").split("/");b="/"+V.replace(/^\//,"").split("/").slice(X.length).join("/")}let B=bg(i,{pathname:b});Yn(E||B!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Yn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=H0(B&&B.map(X=>Object.assign({},X,{params:Object.assign({},f,X.params),pathname:_r([y,o.encodeLocation?o.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?y:_r([y,o.encodeLocation?o.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),u,t,s);return e&&U?q.createElement(Pa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},U):U}function j0(){let i=X0(),e=L0(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:u},"ErrorBoundary")," or"," ",q.createElement("code",{style:u},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,h)}var B0=q.createElement(j0,null),$0=class extends q.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){console.error("React Router caught the following error during render",i,e)}render(){return this.state.error!==void 0?q.createElement(Sr.Provider,{value:this.props.routeContext},q.createElement(Td.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function q0({routeContext:i,match:e,children:t}){let s=q.useContext(io);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Sr.Provider,{value:i},t)}function H0(i,e=[],t=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,u=t==null?void 0:t.errors;if(u!=null){let g=o.findIndex(y=>y.route.id&&(u==null?void 0:u[y.route.id])!==void 0);et(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,g+1))}let h=!1,f=-1;if(t)for(let g=0;g<o.length;g++){let y=o[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(f=g),y.route.id){let{loaderData:E,errors:A}=t,S=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||S){h=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((g,y,E)=>{let A,S=!1,V=null,b=null;t&&(A=u&&y.route.id?u[y.route.id]:void 0,V=y.route.errorElement||B0,h&&(f<0&&E===0?(Qg("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,b=null):f===E&&(S=!0,b=y.route.hydrateFallbackElement||null)));let B=e.concat(o.slice(0,E+1)),U=()=>{let H;return A?H=V:S?H=b:y.route.Component?H=q.createElement(y.route.Component,null):y.route.element?H=y.route.element:H=g,q.createElement(q0,{match:y,routeContext:{outlet:g,matches:B,isDataRoute:t!=null},children:H})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?q.createElement($0,{location:t.location,revalidation:t.revalidation,component:V,error:A,children:U(),routeContext:{outlet:null,matches:B,isDataRoute:!0}}):U()},null)}function Id(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W0(i){let e=q.useContext(io);return et(e,Id(i)),e}function K0(i){let e=q.useContext(bu);return et(e,Id(i)),e}function Q0(i){let e=q.useContext(Sr);return et(e,Id(i)),e}function Sd(i){let e=Q0(i),t=e.matches[e.matches.length-1];return et(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function G0(){return Sd("useRouteId")}function X0(){var s;let i=q.useContext(Td),e=K0("useRouteError"),t=Sd("useRouteError");return i!==void 0?i:(s=e.errors)==null?void 0:s[t]}function Y0(){let{router:i}=W0("useNavigate"),e=Sd("useNavigate"),t=q.useRef(!1);return Hg(()=>{t.current=!0}),q.useCallback(async(o,u={})=>{Yn(t.current,qg),t.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var Pm={};function Qg(i,e,t){!e&&!Pm[i]&&(Pm[i]=!0,Yn(!1,t))}q.memo(J0);function J0({routes:i,future:e,state:t}){return Kg(i,void 0,t,e)}function Gh(i){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Z0({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){et(!ka(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=ro(t));let{pathname:g="/",search:y="",hash:E="",state:A=null,key:S="default"}=t,V=q.useMemo(()=>{let b=ii(g,h);return b==null?null:{location:{pathname:b,search:y,hash:E,state:A,key:S},navigationType:s}},[h,g,y,E,A,S,s]);return Yn(V!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(Zn.Provider,{value:f},q.createElement(Pa.Provider,{children:e,value:V}))}function eE({children:i,location:e}){return z0(Xh(i),e)}function Xh(i,e=[]){let t=[];return q.Children.forEach(i,(s,o)=>{if(!q.isValidElement(s))return;let u=[...e,o];if(s.type===q.Fragment){t.push.apply(t,Xh(s.props.children,u));return}et(s.type===Gh,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Xh(s.props.children,u)),t.push(h)}),t}var uu="get",cu="application/x-www-form-urlencoded";function Fu(i){return i!=null&&typeof i.tagName=="string"}function tE(i){return Fu(i)&&i.tagName.toLowerCase()==="button"}function nE(i){return Fu(i)&&i.tagName.toLowerCase()==="form"}function rE(i){return Fu(i)&&i.tagName.toLowerCase()==="input"}function iE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sE(i,e){return i.button===0&&(!e||e==="_self")&&!iE(i)}var nu=null;function oE(){if(nu===null)try{new FormData(document.createElement("form"),0),nu=!1}catch{nu=!0}return nu}var aE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Mh(i){return i!=null&&!aE.has(i)?(Yn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cu}"`),null):i}function lE(i,e){let t,s,o,u,h;if(nE(i)){let f=i.getAttribute("action");s=f?ii(f,e):null,t=i.getAttribute("method")||uu,o=Mh(i.getAttribute("enctype"))||cu,u=new FormData(i)}else if(tE(i)||rE(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=i.getAttribute("formaction")||f.getAttribute("action");if(s=g?ii(g,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||uu,o=Mh(i.getAttribute("formenctype"))||Mh(f.getAttribute("enctype"))||cu,u=new FormData(f,i),!oE()){let{name:y,type:E,value:A}=i;if(E==="image"){let S=y?`${y}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else y&&u.append(y,A)}}else{if(Fu(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=uu,s=null,o=cu,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:h}}function Ad(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}async function uE(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cE(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function hE(i,e,t){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await uE(u,t);return h.links?h.links():[]}return[]}));return mE(s.flat(1).filter(cE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function km(i,e,t,s,o,u){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,f=(g,y)=>{var E;return t[y].pathname!==g.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return u==="assets"?e.filter((g,y)=>h(g,y)||f(g,y)):u==="data"?e.filter((g,y)=>{var A;let E=s.routes[g.route.id];if(!E||!E.hasLoader)return!1;if(h(g,y)||f(g,y))return!0;if(g.route.shouldRevalidate){let S=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((A=t[0])==null?void 0:A.params)||{},nextUrl:new URL(i,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function dE(i,e){return fE(i.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function fE(i){return[...new Set(i)]}function pE(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function mE(i,e){let t=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(pE(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function gE(i){let e=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function yE(){let i=q.useContext(io);return Ad(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function _E(){let i=q.useContext(bu);return Ad(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Rd=q.createContext(void 0);Rd.displayName="FrameworkContext";function Gg(){let i=q.useContext(Rd);return Ad(i,"You must render this element inside a <HydratedRouter> element"),i}function vE(i,e){let t=q.useContext(Rd),[s,o]=q.useState(!1),[u,h]=q.useState(!1),{onFocus:f,onBlur:g,onMouseEnter:y,onMouseLeave:E,onTouchStart:A}=e,S=q.useRef(null);q.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let B=H=>{H.forEach(X=>{h(X.isIntersecting)})},U=new IntersectionObserver(B,{threshold:.5});return S.current&&U.observe(S.current),()=>{U.disconnect()}}},[i]),q.useEffect(()=>{if(s){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[s]);let V=()=>{o(!0)},b=()=>{o(!1),h(!1)};return t?i!=="intent"?[u,S,{}]:[u,S,{onFocus:aa(f,V),onBlur:aa(g,b),onMouseEnter:aa(y,V),onMouseLeave:aa(E,b),onTouchStart:aa(A,V)}]:[!1,S,{}]}function aa(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function EE({page:i,...e}){let{router:t}=yE(),s=q.useMemo(()=>bg(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?q.createElement(TE,{page:i,matches:s,...e}):null}function wE(i){let{manifest:e,routeModules:t}=Gg(),[s,o]=q.useState([]);return q.useEffect(()=>{let u=!1;return hE(i,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,t]),s}function TE({page:i,matches:e,...t}){let s=Ki(),{manifest:o,routeModules:u}=Gg(),{loaderData:h,matches:f}=_E(),g=q.useMemo(()=>km(i,e,f,o,s,"data"),[i,e,f,o,s]),y=q.useMemo(()=>km(i,e,f,o,s,"assets"),[i,e,f,o,s]),E=q.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let V=new Set,b=!1;if(e.forEach(U=>{var X;let H=o.routes[U.route.id];!H||!H.hasLoader||(!g.some(ne=>ne.route.id===U.route.id)&&U.route.id in h&&((X=u[U.route.id])!=null&&X.shouldRevalidate)||H.hasClientLoader?b=!0:V.add(U.route.id))}),V.size===0)return[];let B=gE(i);return b&&V.size>0&&B.searchParams.set("_routes",e.filter(U=>V.has(U.route.id)).map(U=>U.route.id).join(",")),[B.pathname+B.search]},[h,s,o,g,e,i,u]),A=q.useMemo(()=>dE(y,o),[y,o]),S=wE(y);return q.createElement(q.Fragment,null,E.map(V=>q.createElement("link",{key:V,rel:"prefetch",as:"fetch",href:V,...t})),A.map(V=>q.createElement("link",{key:V,rel:"modulepreload",href:V,...t})),S.map(({key:V,link:b})=>q.createElement("link",{key:V,...b})))}function IE(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Xg=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Xg&&(window.__reactRouterVersion="7.1.1")}catch{}function SE({basename:i,children:e,window:t}){let s=q.useRef();s.current==null&&(s.current=d0({window:t,v5Compat:!0}));let o=s.current,[u,h]=q.useState({action:o.action,location:o.location}),f=q.useCallback(g=>{q.startTransition(()=>h(g))},[h]);return q.useLayoutEffect(()=>o.listen(f),[o,f]),q.createElement(Z0,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Yg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jg=q.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:f,target:g,to:y,preventScrollReset:E,viewTransition:A,...S},V){let{basename:b}=q.useContext(Zn),B=typeof y=="string"&&Yg.test(y),U,H=!1;if(typeof y=="string"&&B&&(U=y,Xg))try{let I=new URL(window.location.href),k=y.startsWith("//")?new URL(I.protocol+y):new URL(y),N=ii(k.pathname,b);k.origin===I.origin&&N!=null?y=N+k.search+k.hash:H=!0}catch{Yn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=F0(y,{relative:o}),[ne,de,Ie]=vE(s,S),Ee=PE(y,{replace:h,state:f,target:g,preventScrollReset:E,relative:o,viewTransition:A});function P(I){e&&e(I),I.defaultPrevented||Ee(I)}let T=q.createElement("a",{...S,...Ie,href:U||X,onClick:H||u?e:P,ref:IE(V,de),target:g,"data-discover":!B&&t==="render"?"true":void 0});return ne&&!B?q.createElement(q.Fragment,null,T,q.createElement(EE,{page:X})):T});Jg.displayName="Link";var AE=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:f,children:g,...y},E){let A=xa(h,{relative:y.relative}),S=Ki(),V=q.useContext(bu),{navigator:b,basename:B}=q.useContext(Zn),U=V!=null&&VE(A)&&f===!0,H=b.encodeLocation?b.encodeLocation(A).pathname:A.pathname,X=S.pathname,ne=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(X=X.toLowerCase(),ne=ne?ne.toLowerCase():null,H=H.toLowerCase()),ne&&B&&(ne=ii(ne,B)||ne);const de=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let Ie=X===H||!o&&X.startsWith(H)&&X.charAt(de)==="/",Ee=ne!=null&&(ne===H||!o&&ne.startsWith(H)&&ne.charAt(H.length)==="/"),P={isActive:Ie,isPending:Ee,isTransitioning:U},T=Ie?e:void 0,I;typeof s=="function"?I=s(P):I=[s,Ie?"active":null,Ee?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let k=typeof u=="function"?u(P):u;return q.createElement(Jg,{...y,"aria-current":T,className:I,ref:E,style:k,to:h,viewTransition:f},typeof g=="function"?g(P):g)});AE.displayName="NavLink";var RE=q.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:h=uu,action:f,onSubmit:g,relative:y,preventScrollReset:E,viewTransition:A,...S},V)=>{let b=NE(),B=DE(f,{relative:y}),U=h.toLowerCase()==="get"?"get":"post",H=typeof f=="string"&&Yg.test(f),X=ne=>{if(g&&g(ne),ne.defaultPrevented)return;ne.preventDefault();let de=ne.nativeEvent.submitter,Ie=(de==null?void 0:de.getAttribute("formmethod"))||h;b(de||ne.currentTarget,{fetcherKey:e,method:Ie,navigate:t,replace:o,state:u,relative:y,preventScrollReset:E,viewTransition:A})};return q.createElement("form",{ref:V,method:U,action:B,onSubmit:s?g:X,...S,"data-discover":!H&&i==="render"?"true":void 0})});RE.displayName="Form";function CE(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zg(i){let e=q.useContext(io);return et(e,CE(i)),e}function PE(i,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let f=Wg(),g=Ki(),y=xa(i,{relative:u});return q.useCallback(E=>{if(sE(E,e)){E.preventDefault();let A=t!==void 0?t:Ea(g)===Ea(y);f(i,{replace:A,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[g,f,y,t,s,e,i,o,u,h])}var kE=0,xE=()=>`__${String(++kE)}__`;function NE(){let{router:i}=Zg("useSubmit"),{basename:e}=q.useContext(Zn),t=G0();return q.useCallback(async(s,o={})=>{let{action:u,method:h,encType:f,formData:g,body:y}=lE(s,e);if(o.navigate===!1){let E=o.fetcherKey||xE();await i.fetch(E,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||f,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,t])}function DE(i,{relative:e}={}){let{basename:t}=q.useContext(Zn),s=q.useContext(Sr);et(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...xa(i||".",{relative:e})},h=Ki();if(i==null){u.search=h.search;let f=new URLSearchParams(u.search),g=f.getAll("index");if(g.some(E=>E==="")){f.delete("index"),g.filter(A=>A).forEach(A=>f.append("index",A));let E=f.toString();u.search=E?`?${E}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:_r([t,u.pathname])),Ea(u)}function VE(i,e={}){let t=q.useContext($g);et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Zg("useViewTransitionState"),o=xa(i,{relative:e.relative});if(!t.isTransitioning)return!1;let u=ii(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=ii(t.nextLocation.pathname,s)||t.nextLocation.pathname;return wu(o.pathname,h)!=null||wu(o.pathname,u)!=null}new TextEncoder;var xm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},LE=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],f=i[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},ty={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,f=h?i[o+1]:0,g=o+2<i.length,y=g?i[o+2]:0,E=u>>2,A=(u&3)<<4|f>>4;let S=(f&15)<<2|y>>6,V=y&63;g||(V=64,h||(S=64)),s.push(t[E],t[A],t[S],t[V])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(ey(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):LE(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],f=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||f==null||y==null||A==null)throw new OE;const S=u<<2|f>>4;if(s.push(S),y!==64){const V=f<<4&240|y>>2;if(s.push(V),A!==64){const b=y<<6&192|A;s.push(b)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class OE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ME=function(i){const e=ey(i);return ty.encodeByteArray(e,!0)},Tu=function(i){return ME(i).replace(/\./g,"")},ny=function(i){try{return ty.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=()=>bE().__FIREBASE_DEFAULTS__,UE=()=>{if(typeof process>"u"||typeof xm>"u")return;const i=xm.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},zE=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&ny(i[1]);return e&&JSON.parse(e)},Uu=()=>{try{return FE()||UE()||zE()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},jE=i=>{var e,t;return(t=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},BE=i=>{const e=jE(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ry=()=>{var i;return(i=Uu())===null||i===void 0?void 0:i.config},$E=i=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Tu(JSON.stringify(t)),Tu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function KE(){var i;const e=(i=Uu())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function QE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GE(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function XE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YE(){return!KE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JE(){try{return typeof indexedDB=="object"}catch{return!1}}function ZE(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="FirebaseError";class ci extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ew,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Na.prototype.create)}}class Na{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?tw(u,s):"Error",f=`${this.serviceName}: ${h} (${o}).`;return new ci(o,f,s)}}function tw(i,e){return i.replace(nw,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const nw=/\{\$([^}]+)}/g;function Yh(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(Nm(u)&&Nm(h)){if(!Yh(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Nm(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function rw(i,e){const t=new iw(i,e);return t.subscribe.bind(t)}class iw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");sw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=bh),o.error===void 0&&(o.error=bh),o.complete===void 0&&(o.complete=bh);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sw(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(i){return i&&i._delegate?i._delegate:i}class Hi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new qE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lw(e))try{this.getOrInitializeService({instanceIdentifier:ji})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=ji){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ji){return this.instances.has(e)}getOptions(e=ji){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(u);s===f&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ji){return this.component?this.component.multipleInstances?e:ji:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aw(i){return i===ji?void 0:i}function lw(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ow(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ce||(Ce={}));const cw={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},hw=Ce.INFO,dw={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},fw=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=dw[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cd{constructor(e){this.name=e,this._logLevel=hw,this._logHandler=fw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const pw=(i,e)=>e.some(t=>i instanceof t);let Dm,Vm;function mw(){return Dm||(Dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gw(){return Vm||(Vm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sy=new WeakMap,Jh=new WeakMap,oy=new WeakMap,Fh=new WeakMap,Pd=new WeakMap;function yw(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(ei(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&sy.set(t,i)}).catch(()=>{}),Pd.set(e,i),e}function _w(i){if(Jh.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Jh.set(i,e)}let Zh={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Jh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||oy.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ei(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function vw(i){Zh=i(Zh)}function Ew(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(Uh(this),e,...t);return oy.set(s,e.sort?e.sort():[e]),ei(s)}:gw().includes(i)?function(...e){return i.apply(Uh(this),e),ei(sy.get(this))}:function(...e){return ei(i.apply(Uh(this),e))}}function ww(i){return typeof i=="function"?Ew(i):(i instanceof IDBTransaction&&_w(i),pw(i,mw())?new Proxy(i,Zh):i)}function ei(i){if(i instanceof IDBRequest)return yw(i);if(Fh.has(i))return Fh.get(i);const e=ww(i);return e!==i&&(Fh.set(i,e),Pd.set(e,i)),e}const Uh=i=>Pd.get(i);function Tw(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),f=ei(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ei(h.result),g.oldVersion,g.newVersion,ei(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const Iw=["get","getKey","getAll","getAllKeys","count"],Sw=["put","add","delete","clear"],zh=new Map;function Lm(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(zh.get(e))return zh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Sw.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Iw.includes(t)))return;const u=async function(h,...f){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&g.done]))[0]};return zh.set(e,u),u}vw(i=>({...i,get:(e,t,s)=>Lm(e,t)||i.get(e,t,s),has:(e,t)=>!!Lm(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Rw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Rw(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ed="@firebase/app",Om="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Cd("@firebase/app"),Cw="@firebase/app-compat",Pw="@firebase/analytics-compat",kw="@firebase/analytics",xw="@firebase/app-check-compat",Nw="@firebase/app-check",Dw="@firebase/auth",Vw="@firebase/auth-compat",Lw="@firebase/database",Ow="@firebase/data-connect",Mw="@firebase/database-compat",bw="@firebase/functions",Fw="@firebase/functions-compat",Uw="@firebase/installations",zw="@firebase/installations-compat",jw="@firebase/messaging",Bw="@firebase/messaging-compat",$w="@firebase/performance",qw="@firebase/performance-compat",Hw="@firebase/remote-config",Ww="@firebase/remote-config-compat",Kw="@firebase/storage",Qw="@firebase/storage-compat",Gw="@firebase/firestore",Xw="@firebase/vertexai",Yw="@firebase/firestore-compat",Jw="firebase",Zw="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]",eT={[ed]:"fire-core",[Cw]:"fire-core-compat",[kw]:"fire-analytics",[Pw]:"fire-analytics-compat",[Nw]:"fire-app-check",[xw]:"fire-app-check-compat",[Dw]:"fire-auth",[Vw]:"fire-auth-compat",[Lw]:"fire-rtdb",[Ow]:"fire-data-connect",[Mw]:"fire-rtdb-compat",[bw]:"fire-fn",[Fw]:"fire-fn-compat",[Uw]:"fire-iid",[zw]:"fire-iid-compat",[jw]:"fire-fcm",[Bw]:"fire-fcm-compat",[$w]:"fire-perf",[qw]:"fire-perf-compat",[Hw]:"fire-rc",[Ww]:"fire-rc-compat",[Kw]:"fire-gcs",[Qw]:"fire-gcs-compat",[Gw]:"fire-fst",[Yw]:"fire-fst-compat",[Xw]:"fire-vertex","fire-js":"fire-js",[Jw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=new Map,tT=new Map,nd=new Map;function Mm(i,e){try{i.container.addComponent(e)}catch(t){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Gs(i){const e=i.name;if(nd.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,i);for(const t of Iu.values())Mm(t,i);for(const t of tT.values())Mm(t,i);return!0}function nT(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function la(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new Na("app","Firebase",rT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=Zw;function ay(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:td,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw ti.create("bad-app-name",{appName:String(o)});if(t||(t=ry()),!t)throw ti.create("no-options");const u=Iu.get(o);if(u){if(Yh(t,u.options)&&Yh(s,u.config))return u;throw ti.create("duplicate-app",{appName:o})}const h=new uw(o);for(const g of nd.values())h.addComponent(g);const f=new iT(t,s,h);return Iu.set(o,f),f}function sT(i=td){const e=Iu.get(i);if(!e&&i===td&&ry())return ay();if(!e)throw ti.create("no-app",{appName:i});return e}function ni(i,e,t){var s;let o=(s=eT[i])!==null&&s!==void 0?s:i;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const f=[`Unable to register library "${o}" with version "${e}":`];u&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&f.push("and"),h&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(f.join(" "));return}Gs(new Hi(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="firebase-heartbeat-database",aT=1,wa="firebase-heartbeat-store";let jh=null;function ly(){return jh||(jh=Tw(oT,aT,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(wa)}catch(t){console.warn(t)}}}}).catch(i=>{throw ti.create("idb-open",{originalErrorMessage:i.message})})),jh}async function lT(i){try{const t=(await ly()).transaction(wa),s=await t.objectStore(wa).get(uy(i));return await t.done,s}catch(e){if(e instanceof ci)Er.warn(e.message);else{const t=ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(t.message)}}}async function bm(i,e){try{const s=(await ly()).transaction(wa,"readwrite");await s.objectStore(wa).put(e,uy(i)),await s.done}catch(t){if(t instanceof ci)Er.warn(t.message);else{const s=ti.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Er.warn(s.message)}}}function uy(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=1024,cT=30*24*60*60*1e3;class hT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fT(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Fm();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const f=new Date(h.date).valueOf();return Date.now()-f<=cT}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Er.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Fm(),{heartbeatsToSend:s,unsentEntries:o}=dT(this._heartbeatsCache.heartbeats),u=Tu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Er.warn(t),""}}}function Fm(){return new Date().toISOString().substring(0,10)}function dT(i,e=uT){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Um(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Um(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class fT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JE()?ZE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lT(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return bm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return bm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Um(i){return Tu(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(i){Gs(new Hi("platform-logger",e=>new Aw(e),"PRIVATE")),Gs(new Hi("heartbeat",e=>new hT(e),"PRIVATE")),ni(ed,Om,i),ni(ed,Om,"esm2017"),ni("fire-js","")}pT("");var zm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qi,cy;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function I(){}I.prototype=T.prototype,P.D=T.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(k,N,L){for(var C=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)C[$e-2]=arguments[$e];return T.prototype[N].apply(k,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,T,I){I||(I=0);var k=Array(16);if(typeof T=="string")for(var N=0;16>N;++N)k[N]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(N=0;16>N;++N)k[N]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=P.g[0],I=P.g[1],N=P.g[2];var L=P.g[3],C=T+(L^I&(N^L))+k[0]+3614090360&4294967295;T=I+(C<<7&4294967295|C>>>25),C=L+(N^T&(I^N))+k[1]+3905402710&4294967295,L=T+(C<<12&4294967295|C>>>20),C=N+(I^L&(T^I))+k[2]+606105819&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(T^N&(L^T))+k[3]+3250441966&4294967295,I=N+(C<<22&4294967295|C>>>10),C=T+(L^I&(N^L))+k[4]+4118548399&4294967295,T=I+(C<<7&4294967295|C>>>25),C=L+(N^T&(I^N))+k[5]+1200080426&4294967295,L=T+(C<<12&4294967295|C>>>20),C=N+(I^L&(T^I))+k[6]+2821735955&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(T^N&(L^T))+k[7]+4249261313&4294967295,I=N+(C<<22&4294967295|C>>>10),C=T+(L^I&(N^L))+k[8]+1770035416&4294967295,T=I+(C<<7&4294967295|C>>>25),C=L+(N^T&(I^N))+k[9]+2336552879&4294967295,L=T+(C<<12&4294967295|C>>>20),C=N+(I^L&(T^I))+k[10]+4294925233&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(T^N&(L^T))+k[11]+2304563134&4294967295,I=N+(C<<22&4294967295|C>>>10),C=T+(L^I&(N^L))+k[12]+1804603682&4294967295,T=I+(C<<7&4294967295|C>>>25),C=L+(N^T&(I^N))+k[13]+4254626195&4294967295,L=T+(C<<12&4294967295|C>>>20),C=N+(I^L&(T^I))+k[14]+2792965006&4294967295,N=L+(C<<17&4294967295|C>>>15),C=I+(T^N&(L^T))+k[15]+1236535329&4294967295,I=N+(C<<22&4294967295|C>>>10),C=T+(N^L&(I^N))+k[1]+4129170786&4294967295,T=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(T^I))+k[6]+3225465664&4294967295,L=T+(C<<9&4294967295|C>>>23),C=N+(T^I&(L^T))+k[11]+643717713&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^T&(N^L))+k[0]+3921069994&4294967295,I=N+(C<<20&4294967295|C>>>12),C=T+(N^L&(I^N))+k[5]+3593408605&4294967295,T=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(T^I))+k[10]+38016083&4294967295,L=T+(C<<9&4294967295|C>>>23),C=N+(T^I&(L^T))+k[15]+3634488961&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^T&(N^L))+k[4]+3889429448&4294967295,I=N+(C<<20&4294967295|C>>>12),C=T+(N^L&(I^N))+k[9]+568446438&4294967295,T=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(T^I))+k[14]+3275163606&4294967295,L=T+(C<<9&4294967295|C>>>23),C=N+(T^I&(L^T))+k[3]+4107603335&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^T&(N^L))+k[8]+1163531501&4294967295,I=N+(C<<20&4294967295|C>>>12),C=T+(N^L&(I^N))+k[13]+2850285829&4294967295,T=I+(C<<5&4294967295|C>>>27),C=L+(I^N&(T^I))+k[2]+4243563512&4294967295,L=T+(C<<9&4294967295|C>>>23),C=N+(T^I&(L^T))+k[7]+1735328473&4294967295,N=L+(C<<14&4294967295|C>>>18),C=I+(L^T&(N^L))+k[12]+2368359562&4294967295,I=N+(C<<20&4294967295|C>>>12),C=T+(I^N^L)+k[5]+4294588738&4294967295,T=I+(C<<4&4294967295|C>>>28),C=L+(T^I^N)+k[8]+2272392833&4294967295,L=T+(C<<11&4294967295|C>>>21),C=N+(L^T^I)+k[11]+1839030562&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^T)+k[14]+4259657740&4294967295,I=N+(C<<23&4294967295|C>>>9),C=T+(I^N^L)+k[1]+2763975236&4294967295,T=I+(C<<4&4294967295|C>>>28),C=L+(T^I^N)+k[4]+1272893353&4294967295,L=T+(C<<11&4294967295|C>>>21),C=N+(L^T^I)+k[7]+4139469664&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^T)+k[10]+3200236656&4294967295,I=N+(C<<23&4294967295|C>>>9),C=T+(I^N^L)+k[13]+681279174&4294967295,T=I+(C<<4&4294967295|C>>>28),C=L+(T^I^N)+k[0]+3936430074&4294967295,L=T+(C<<11&4294967295|C>>>21),C=N+(L^T^I)+k[3]+3572445317&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^T)+k[6]+76029189&4294967295,I=N+(C<<23&4294967295|C>>>9),C=T+(I^N^L)+k[9]+3654602809&4294967295,T=I+(C<<4&4294967295|C>>>28),C=L+(T^I^N)+k[12]+3873151461&4294967295,L=T+(C<<11&4294967295|C>>>21),C=N+(L^T^I)+k[15]+530742520&4294967295,N=L+(C<<16&4294967295|C>>>16),C=I+(N^L^T)+k[2]+3299628645&4294967295,I=N+(C<<23&4294967295|C>>>9),C=T+(N^(I|~L))+k[0]+4096336452&4294967295,T=I+(C<<6&4294967295|C>>>26),C=L+(I^(T|~N))+k[7]+1126891415&4294967295,L=T+(C<<10&4294967295|C>>>22),C=N+(T^(L|~I))+k[14]+2878612391&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~T))+k[5]+4237533241&4294967295,I=N+(C<<21&4294967295|C>>>11),C=T+(N^(I|~L))+k[12]+1700485571&4294967295,T=I+(C<<6&4294967295|C>>>26),C=L+(I^(T|~N))+k[3]+2399980690&4294967295,L=T+(C<<10&4294967295|C>>>22),C=N+(T^(L|~I))+k[10]+4293915773&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~T))+k[1]+2240044497&4294967295,I=N+(C<<21&4294967295|C>>>11),C=T+(N^(I|~L))+k[8]+1873313359&4294967295,T=I+(C<<6&4294967295|C>>>26),C=L+(I^(T|~N))+k[15]+4264355552&4294967295,L=T+(C<<10&4294967295|C>>>22),C=N+(T^(L|~I))+k[6]+2734768916&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~T))+k[13]+1309151649&4294967295,I=N+(C<<21&4294967295|C>>>11),C=T+(N^(I|~L))+k[4]+4149444226&4294967295,T=I+(C<<6&4294967295|C>>>26),C=L+(I^(T|~N))+k[11]+3174756917&4294967295,L=T+(C<<10&4294967295|C>>>22),C=N+(T^(L|~I))+k[2]+718787259&4294967295,N=L+(C<<15&4294967295|C>>>17),C=I+(L^(N|~T))+k[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+L&4294967295}s.prototype.u=function(P,T){T===void 0&&(T=P.length);for(var I=T-this.blockSize,k=this.B,N=this.h,L=0;L<T;){if(N==0)for(;L<=I;)o(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<T;)if(k[N++]=P.charCodeAt(L++),N==this.blockSize){o(this,k),N=0;break}}else for(;L<T;)if(k[N++]=P[L++],N==this.blockSize){o(this,k),N=0;break}}this.h=N,this.o+=T},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;var I=8*this.o;for(T=P.length-8;T<P.length;++T)P[T]=I&255,I/=256;for(this.u(P),P=Array(16),T=I=0;4>T;++T)for(var k=0;32>k;k+=8)P[I++]=this.g[T]>>>k&255;return P};function u(P,T){var I=f;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=T(P)}function h(P,T){this.h=T;for(var I=[],k=!0,N=P.length-1;0<=N;N--){var L=P[N]|0;k&&L==T||(I[N]=L,k=!1)}this.g=I}var f={};function g(P){return-128<=P&&128>P?u(P,function(T){return new h([T|0],0>T?-1:0)}):new h([P|0],0>P?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return A;if(0>P)return U(y(-P));for(var T=[],I=1,k=0;P>=I;k++)T[k]=P/I|0,I*=4294967296;return new h(T,0)}function E(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return U(E(P.substring(1),T));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(T,8)),k=A,N=0;N<P.length;N+=8){var L=Math.min(8,P.length-N),C=parseInt(P.substring(N,N+L),T);8>L?(L=y(Math.pow(T,L)),k=k.j(L).add(y(C))):(k=k.j(I),k=k.add(y(C)))}return k}var A=g(0),S=g(1),V=g(16777216);i=h.prototype,i.m=function(){if(B(this))return-U(this).m();for(var P=0,T=1,I=0;I<this.g.length;I++){var k=this.i(I);P+=(0<=k?k:4294967296+k)*T,T*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(b(this))return"0";if(B(this))return"-"+U(this).toString(P);for(var T=y(Math.pow(P,6)),I=this,k="";;){var N=de(I,T).g;I=H(I,N.j(T));var L=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=N,b(I))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function b(P){if(P.h!=0)return!1;for(var T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function B(P){return P.h==-1}i.l=function(P){return P=H(this,P),B(P)?-1:b(P)?0:1};function U(P){for(var T=P.g.length,I=[],k=0;k<T;k++)I[k]=~P.g[k];return new h(I,~P.h).add(S)}i.abs=function(){return B(this)?U(this):this},i.add=function(P){for(var T=Math.max(this.g.length,P.g.length),I=[],k=0,N=0;N<=T;N++){var L=k+(this.i(N)&65535)+(P.i(N)&65535),C=(L>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);k=C>>>16,L&=65535,C&=65535,I[N]=C<<16|L}return new h(I,I[I.length-1]&-2147483648?-1:0)};function H(P,T){return P.add(U(T))}i.j=function(P){if(b(this)||b(P))return A;if(B(this))return B(P)?U(this).j(U(P)):U(U(this).j(P));if(B(P))return U(this.j(U(P)));if(0>this.l(V)&&0>P.l(V))return y(this.m()*P.m());for(var T=this.g.length+P.g.length,I=[],k=0;k<2*T;k++)I[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<P.g.length;N++){var L=this.i(k)>>>16,C=this.i(k)&65535,$e=P.i(N)>>>16,xt=P.i(N)&65535;I[2*k+2*N]+=C*xt,X(I,2*k+2*N),I[2*k+2*N+1]+=L*xt,X(I,2*k+2*N+1),I[2*k+2*N+1]+=C*$e,X(I,2*k+2*N+1),I[2*k+2*N+2]+=L*$e,X(I,2*k+2*N+2)}for(k=0;k<T;k++)I[k]=I[2*k+1]<<16|I[2*k];for(k=T;k<2*T;k++)I[k]=0;return new h(I,0)};function X(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function ne(P,T){this.g=P,this.h=T}function de(P,T){if(b(T))throw Error("division by zero");if(b(P))return new ne(A,A);if(B(P))return T=de(U(P),T),new ne(U(T.g),U(T.h));if(B(T))return T=de(P,U(T)),new ne(U(T.g),T.h);if(30<P.g.length){if(B(P)||B(T))throw Error("slowDivide_ only works with positive integers.");for(var I=S,k=T;0>=k.l(P);)I=Ie(I),k=Ie(k);var N=Ee(I,1),L=Ee(k,1);for(k=Ee(k,2),I=Ee(I,2);!b(k);){var C=L.add(k);0>=C.l(P)&&(N=N.add(I),L=C),k=Ee(k,1),I=Ee(I,1)}return T=H(P,N.j(T)),new ne(N,T)}for(N=A;0<=P.l(T);){for(I=Math.max(1,Math.floor(P.m()/T.m())),k=Math.ceil(Math.log(I)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=y(I),C=L.j(T);B(C)||0<C.l(P);)I-=k,L=y(I),C=L.j(T);b(L)&&(L=S),N=N.add(L),P=H(P,C)}return new ne(N,P)}i.A=function(P){return de(this,P).h},i.and=function(P){for(var T=Math.max(this.g.length,P.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)&P.i(k);return new h(I,this.h&P.h)},i.or=function(P){for(var T=Math.max(this.g.length,P.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)|P.i(k);return new h(I,this.h|P.h)},i.xor=function(P){for(var T=Math.max(this.g.length,P.g.length),I=[],k=0;k<T;k++)I[k]=this.i(k)^P.i(k);return new h(I,this.h^P.h)};function Ie(P){for(var T=P.g.length+1,I=[],k=0;k<T;k++)I[k]=P.i(k)<<1|P.i(k-1)>>>31;return new h(I,P.h)}function Ee(P,T){var I=T>>5;T%=32;for(var k=P.g.length-I,N=[],L=0;L<k;L++)N[L]=0<T?P.i(L+I)>>>T|P.i(L+I+1)<<32-T:P.i(L+I);return new h(N,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,cy=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,qi=h}).apply(typeof zm<"u"?zm:typeof self<"u"?self:typeof window<"u"?window:{});var ru=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hy,ua,dy,hu,rd,fy,py,my;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,_){return l==Array.prototype||l==Object.prototype||(l[p]=_.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ru=="object"&&ru];for(var p=0;p<l.length;++p){var _=l[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(l,p){if(p)e:{var _=s;l=l.split(".");for(var w=0;w<l.length-1;w++){var M=l[w];if(!(M in _))break e;_=_[M]}l=l[l.length-1],w=_[l],p=p(w),p!=w&&p!=null&&e(_,l,{configurable:!0,writable:!0,value:p})}}function u(l,p){l instanceof String&&(l+="");var _=0,w=!1,M={next:function(){if(!w&&_<l.length){var $=_++;return{value:p($,l[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(l){return l||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},f=this||self;function g(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function y(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function E(l,p,_){return l.call.apply(l.bind,arguments)}function A(l,p,_){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,w),l.apply(p,M)}}return function(){return l.apply(p,arguments)}}function S(l,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:A,S.apply(null,arguments)}function V(l,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function b(l,p){function _(){}_.prototype=p.prototype,l.aa=p.prototype,l.prototype=new _,l.prototype.constructor=l,l.Qb=function(w,M,$){for(var ee=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ee[ze-2]=arguments[ze];return p.prototype[M].apply(w,ee)}}function B(l){const p=l.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=l[w];return _}return[]}function U(l,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(g(w)){const M=l.length||0,$=w.length||0;l.length=M+$;for(let ee=0;ee<$;ee++)l[M+ee]=w[ee]}else l.push(w)}}class H{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function X(l){return/^[\s\xa0]*$/.test(l)}function ne(){var l=f.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var Ie=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Ee(l,p,_){for(const w in l)p.call(_,l[w],w,l)}function P(l,p){for(const _ in l)p.call(void 0,l[_],_,l)}function T(l){const p={};for(const _ in l)p[_]=l[_];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,p){let _,w;for(let M=1;M<arguments.length;M++){w=arguments[M];for(_ in w)l[_]=w[_];for(let $=0;$<I.length;$++)_=I[$],Object.prototype.hasOwnProperty.call(w,_)&&(l[_]=w[_])}}function N(l){var p=1;l=l.split(":");const _=[];for(;0<p&&l.length;)_.push(l.shift()),p--;return l.length&&_.push(l.join(":")),_}function L(l){f.setTimeout(()=>{throw l},0)}function C(){var l=me;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class $e{constructor(){this.h=this.g=null}add(p,_){const w=xt.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var xt=new H(()=>new Nt,l=>l.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let je,te=!1,me=new $e,ie=()=>{const l=f.Promise.resolve(void 0);je=()=>{l.then(O)}};var O=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(_){L(_)}var p=xt;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}te=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Se=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const _=()=>{};f.addEventListener("test",_,p),f.removeEventListener("test",_,p)}catch{}return l}();function Ae(l,p){if(fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var _=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(Ie){e:{try{de(p.nodeName);var M=!0;break e}catch{}M=!1}M||(p=null)}}else _=="mouseover"?p=l.fromElement:_=="mouseout"&&(p=l.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ae.aa.h.call(this)}}b(Ae,fe);var Ne={2:"touch",3:"pen",4:"mouse"};Ae.prototype.h=function(){Ae.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),be=0;function qe(l,p,_,w,M){this.listener=l,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=M,this.key=++be,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function er(l){this.src=l,this.g={},this.h=0}er.prototype.add=function(l,p,_,w,M){var $=l.toString();l=this.g[$],l||(l=this.g[$]=[],this.h++);var ee=Ar(l,p,w,M);return-1<ee?(p=l[ee],_||(p.fa=!1)):(p=new qe(p,this.src,$,!!w,M),p.fa=_,l.push(p)),p};function Xi(l,p){var _=p.type;if(_ in l.g){var w=l.g[_],M=Array.prototype.indexOf.call(w,p,void 0),$;($=0<=M)&&Array.prototype.splice.call(w,M,1),$&&(yt(p),l.g[_].length==0&&(delete l.g[_],l.h--))}}function Ar(l,p,_,w){for(var M=0;M<l.length;++M){var $=l[M];if(!$.da&&$.listener==p&&$.capture==!!_&&$.ha==w)return M}return-1}var fi="closure_lm_"+(1e6*Math.random()|0),Yi={};function co(l,p,_,w,M){if(Array.isArray(p)){for(var $=0;$<p.length;$++)co(l,p[$],_,w,M);return null}return _=po(_),l&&l[Me]?l.K(p,_,y(w)?!!w.capture:!!w,M):ho(l,p,_,!1,w,M)}function ho(l,p,_,w,M,$){if(!p)throw Error("Invalid event type");var ee=y(M)?!!M.capture:!!M,ze=Zi(l);if(ze||(l[fi]=ze=new er(l)),_=ze.add(p,_,w,ee,$),_.proxy)return _;if(w=za(),_.proxy=w,w.src=l,w.listener=_,l.addEventListener)Se||(M=ee),M===void 0&&(M=!1),l.addEventListener(p.toString(),w,M);else if(l.attachEvent)l.attachEvent(nr(p.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function za(){function l(_){return p.call(l.src,l.listener,_)}const p=fo;return l}function Ji(l,p,_,w,M){if(Array.isArray(p))for(var $=0;$<p.length;$++)Ji(l,p[$],_,w,M);else w=y(w)?!!w.capture:!!w,_=po(_),l&&l[Me]?(l=l.i,p=String(p).toString(),p in l.g&&($=l.g[p],_=Ar($,_,w,M),-1<_&&(yt($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete l.g[p],l.h--)))):l&&(l=Zi(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ar(p,_,w,M)),(_=-1<l?p[l]:null)&&tr(_))}function tr(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Me])Xi(p.i,l);else{var _=l.type,w=l.proxy;p.removeEventListener?p.removeEventListener(_,w,l.capture):p.detachEvent?p.detachEvent(nr(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Zi(p))?(Xi(_,l),_.h==0&&(_.src=null,p[fi]=null)):yt(l)}}}function nr(l){return l in Yi?Yi[l]:Yi[l]="on"+l}function fo(l,p){if(l.da)l=!0;else{p=new Ae(p,this);var _=l.listener,w=l.ha||l.src;l.fa&&tr(l),l=_.call(w,p)}return l}function Zi(l){return l=l[fi],l instanceof er?l:null}var es="__closure_events_fn_"+(1e9*Math.random()>>>0);function po(l){return typeof l=="function"?l:(l[es]||(l[es]=function(p){return l.handleEvent(p)}),l[es])}function ct(){K.call(this),this.i=new er(this),this.M=this,this.F=null}b(ct,K),ct.prototype[Me]=!0,ct.prototype.removeEventListener=function(l,p,_,w){Ji(this,l,p,_,w)};function ht(l,p){var _,w=l.F;if(w)for(_=[];w;w=w.F)_.push(w);if(l=l.M,w=p.type||p,typeof p=="string")p=new fe(p,l);else if(p instanceof fe)p.target=p.target||l;else{var M=p;p=new fe(w,l),k(p,M)}if(M=!0,_)for(var $=_.length-1;0<=$;$--){var ee=p.g=_[$];M=rr(ee,w,!0,p)&&M}if(ee=p.g=l,M=rr(ee,w,!0,p)&&M,M=rr(ee,w,!1,p)&&M,_)for($=0;$<_.length;$++)ee=p.g=_[$],M=rr(ee,w,!1,p)&&M}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var _=l.g[p],w=0;w<_.length;w++)yt(_[w]);delete l.g[p],l.h--}}this.F=null},ct.prototype.K=function(l,p,_,w){return this.i.add(String(l),p,!1,_,w)},ct.prototype.L=function(l,p,_,w){return this.i.add(String(l),p,!0,_,w)};function rr(l,p,_,w){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var M=!0,$=0;$<p.length;++$){var ee=p[$];if(ee&&!ee.da&&ee.capture==_){var ze=ee.listener,dt=ee.ha||ee.src;ee.fa&&Xi(l.i,ee),M=ze.call(dt,w)!==!1&&M}}return M&&!w.defaultPrevented}function mo(l,p,_){if(typeof l=="function")_&&(l=S(l,_));else if(l&&typeof l.handleEvent=="function")l=S(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:f.setTimeout(l,p||0)}function Rr(l){l.g=mo(()=>{l.g=null,l.i&&(l.i=!1,Rr(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class pi extends K{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Rr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mi(l){K.call(this),this.h=l,this.g={}}b(mi,K);var go=[];function yo(l){Ee(l.g,function(p,_){this.g.hasOwnProperty(_)&&tr(p)},l),l.g={}}mi.prototype.N=function(){mi.aa.N.call(this),yo(this)},mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _o=f.JSON.stringify,vo=f.JSON.parse,Eo=class{stringify(l){return f.JSON.stringify(l,void 0)}parse(l){return f.JSON.parse(l,void 0)}};function gi(){}gi.prototype.h=null;function ts(l){return l.h||(l.h=l.i())}function ns(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function bn(){fe.call(this,"d")}b(bn,fe);function rs(){fe.call(this,"c")}b(rs,fe);var Fn={},wo=null;function yi(){return wo=wo||new ct}Fn.La="serverreachability";function To(l){fe.call(this,Fn.La,l)}b(To,fe);function ir(l){const p=yi();ht(p,new To(p))}Fn.STAT_EVENT="statevent";function Io(l,p){fe.call(this,Fn.STAT_EVENT,l),this.stat=p}b(Io,fe);function rt(l){const p=yi();ht(p,new Io(p,l))}Fn.Ma="timingevent";function is(l,p){fe.call(this,Fn.Ma,l),this.size=p}b(is,fe);function En(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){l()},p)}function _i(){this.g=!0}_i.prototype.xa=function(){this.g=!1};function vi(l,p,_,w,M,$){l.info(function(){if(l.g)if($)for(var ee="",ze=$.split("&"),dt=0;dt<ze.length;dt++){var De=ze[dt].split("=");if(1<De.length){var _t=De[0];De=De[1];var ot=_t.split("_");ee=2<=ot.length&&ot[1]=="type"?ee+(_t+"="+De+"&"):ee+(_t+"=redacted&")}}else ee=null;else ee=$;return"XMLHTTP REQ ("+w+") [attempt "+M+"]: "+p+`
`+_+`
`+ee})}function ss(l,p,_,w,M,$,ee){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+M+"]: "+p+`
`+_+`
`+$+" "+ee})}function wn(l,p,_,w){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+ic(l,_)+(w?" "+w:"")})}function So(l,p){l.info(function(){return"TIMEOUT: "+p})}_i.prototype.info=function(){};function ic(l,p){if(!l.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(l=0;l<_.length;l++)if(Array.isArray(_[l])){var w=_[l];if(!(2>w.length)){var M=w[1];if(Array.isArray(M)&&!(1>M.length)){var $=M[0];if($!="noop"&&$!="stop"&&$!="close")for(var ee=1;ee<M.length;ee++)M[ee]=""}}}}return _o(_)}catch{return p}}var os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ja={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tn;function Ei(){}b(Ei,gi),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},Tn=new Ei;function In(l,p,_,w){this.j=l,this.i=p,this.l=_,this.R=w||1,this.U=new mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ba}function Ba(){this.i=null,this.g="",this.h=!1}var Ao={},as={};function ls(l,p,_){l.L=1,l.v=Nr(tn(p)),l.m=_,l.P=!0,Ro(l,null)}function Ro(l,p){l.F=Date.now(),He(l),l.A=tn(l.v);var _=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Vr(_.i,"t",w),l.C=0,_=l.j.J,l.h=new Ba,l.g=ol(l.j,_?p:null,!l.m),0<l.O&&(l.M=new pi(S(l.Y,l,l.g),l.O)),p=l.U,_=l.g,w=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(go[0]=M.toString()),M=go);for(var $=0;$<M.length;$++){var ee=co(_,M[$],w||p.handleEvent,!1,p.h||p);if(!ee)break;p.g[ee.key]=ee}p=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),ir(),vi(l.i,l.u,l.A,l.l,l.R,l.m)}In.prototype.ca=function(l){l=l.target;const p=this.M;p&&Ht(l)==3?p.j():this.Y(l)},In.prototype.Y=function(l){try{if(l==this.g)e:{const ot=Ht(this.g);var p=this.g.Ba();const fn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Do(this.g)))){this.J||ot!=4||p==7||(p==8||0>=fn?ir(3):ir(2)),wi(this);var _=this.g.Z();this.X=_;t:if($a(this)){var w=Do(this.g);l="";var M=w.length,$=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Cr(this);var ee="";break t}this.h.i=new f.TextDecoder}for(p=0;p<M;p++)this.h.h=!0,l+=this.h.i.decode(w[p],{stream:!($&&p==M-1)});w.length=0,this.h.g+=l,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=_==200,ss(this.i,this.u,this.A,this.l,this.R,ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,dt=this.g;if((ze=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(ze)){var De=ze;break t}}De=null}if(_=De)wn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,_);else{this.o=!1,this.s=3,rt(12),hn(this),Cr(this);break e}}if(this.P){_=!0;let rn;for(;!this.J&&this.C<ee.length;)if(rn=sc(this,ee),rn==as){ot==4&&(this.s=4,rt(14),_=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Ao){this.s=4,rt(15),wn(this.i,this.l,ee,"[Invalid Chunk]"),_=!1;break}else wn(this.i,this.l,rn,null),Co(this,rn);if($a(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||ee.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)wn(this.i,this.l,ee,"[Invalid Chunked Response]"),hn(this),Cr(this);else if(0<ee.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Lo(_t),_t.M=!0,rt(11))}}else wn(this.i,this.l,ee,null),Co(this,ee);ot==4&&hn(this),this.o&&!this.J&&(ot==4?vs(this.j,this):(this.o=!1,He(this)))}else ps(this.g),_==400&&0<ee.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),hn(this),Cr(this)}}}catch{}finally{}};function $a(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function sc(l,p){var _=l.C,w=p.indexOf(`
`,_);return w==-1?as:(_=Number(p.substring(_,w)),isNaN(_)?Ao:(w+=1,w+_>p.length?as:(p=p.slice(w,w+_),l.C=w+_,p)))}In.prototype.cancel=function(){this.J=!0,hn(this)};function He(l){l.S=Date.now()+l.I,qa(l,l.I)}function qa(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=En(S(l.ba,l),p)}function wi(l){l.B&&(f.clearTimeout(l.B),l.B=null)}In.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(So(this.i,this.A),this.L!=2&&(ir(),rt(17)),hn(this),this.s=2,Cr(this)):qa(this,this.S-l)};function Cr(l){l.j.G==0||l.J||vs(l.j,l)}function hn(l){wi(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,yo(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Co(l,p){try{var _=l.j;if(_.G!=0&&(_.g==l||Ut(_.h,l))){if(!l.K&&Ut(_.h,l)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var M=w;if(M[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<l.F)_s(_),Pn(_);else break e;ys(_),rt(18)}}else _.za=M[1],0<_.za-_.T&&37500>M[2]&&_.F&&_.v==0&&!_.C&&(_.C=En(S(_.Za,_),6e3));if(1>=Wa(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ur(_,11)}else if((l.K||_.g==l)&&_s(_),!X(p))for(M=_.Da.g.parse(p),p=0;p<M.length;p++){let De=M[p];if(_.T=De[0],De=De[1],_.G==2)if(De[0]=="c"){_.K=De[1],_.ia=De[2];const _t=De[3];_t!=null&&(_.la=_t,_.j.info("VER="+_.la));const ot=De[4];ot!=null&&(_.Aa=ot,_.j.info("SVER="+_.Aa));const fn=De[5];fn!=null&&typeof fn=="number"&&0<fn&&(w=1.5*fn,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const rn=l.g;if(rn){const Pi=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var $=w.h;$.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Po($,$.h),$.h=null))}if(w.D){const ws=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;ws&&(w.ya=ws,Be(w.I,w.D,ws))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-l.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ee=l;if(w.qa=sl(w,w.J?w.ia:null,w.W),ee.K){Ka(w.h,ee);var ze=ee,dt=w.L;dt&&(ze.I=dt),ze.B&&(wi(ze),He(ze)),w.g=ee}else Ci(w);0<_.i.length&&Bn(_)}else De[0]!="stop"&&De[0]!="close"||ur(_,7);else _.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?ur(_,7):St(_):De[0]!="noop"&&_.l&&_.l.ta(De),_.v=0)}}ir(4)}catch{}}var Ha=class{constructor(l,p){this.g=l,this.map=p}};function Ti(l){this.l=l||10,f.PerformanceNavigationTiming?(l=f.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function en(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Wa(l){return l.h?1:l.g?l.g.size:0}function Ut(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Po(l,p){l.g?l.g.add(p):l.h=p}function Ka(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Ti.prototype.cancel=function(){if(this.i=Qa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const _ of l.g.values())p=p.concat(_.D);return p}return B(l.i)}function us(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var p=[],_=l.length,w=0;w<_;w++)p.push(l[w]);return p}p=[],_=0;for(w in l)p[_++]=l[w];return p}function cs(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var p=[];l=l.length;for(var _=0;_<l;_++)p.push(_);return p}p=[],_=0;for(const w in l)p[_++]=w;return p}}}function Pr(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var _=cs(l),w=us(l),M=w.length,$=0;$<M;$++)p.call(void 0,w[$],_&&_[$],l)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oc(l,p){if(l){l=l.split("&");for(var _=0;_<l.length;_++){var w=l[_].indexOf("="),M=null;if(0<=w){var $=l[_].substring(0,w);M=l[_].substring(w+1)}else $=l[_];p($,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function sr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof sr){this.h=l.h,Si(this,l.j),this.o=l.o,this.g=l.g,kr(this,l.s),this.l=l.l;var p=l.i,_=new Un;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),xr(this,_),this.m=l.m}else l&&(p=String(l).match(Ii))?(this.h=!1,Si(this,p[1]||"",!0),this.o=ke(p[2]||""),this.g=ke(p[3]||"",!0),kr(this,p[4]),this.l=ke(p[5]||"",!0),xr(this,p[6]||"",!0),this.m=ke(p[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}sr.prototype.toString=function(){var l=[],p=this.j;p&&l.push(Dr(p,hs,!0),":");var _=this.g;return(_||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Dr(p,hs,!0),"@"),l.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&l.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&l.push("/"),l.push(Dr(_,_.charAt(0)=="/"?Ya:Xa,!0))),(_=this.i.toString())&&l.push("?",_),(_=this.m)&&l.push("#",Dr(_,ko)),l.join("")};function tn(l){return new sr(l)}function Si(l,p,_){l.j=_?ke(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function kr(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function xr(l,p,_){p instanceof Un?(l.i=p,zn(l.i,l.h)):(_||(p=Dr(p,Ja)),l.i=new Un(p,l.h))}function Be(l,p,_){l.i.set(p,_)}function Nr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ke(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Dr(l,p,_){return typeof l=="string"?(l=encodeURI(l).replace(p,Ga),_&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ga(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hs=/[#\/\?@]/g,Xa=/[#\?:]/g,Ya=/[#\?]/g,Ja=/[#\?@]/g,ko=/#/g;function Un(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&oc(l.i,function(p,_){l.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}i=Un.prototype,i.add=function(l,p){It(this),this.i=null,l=dn(this,l);var _=this.g.get(l);return _||this.g.set(l,_=[]),_.push(p),this.h+=1,this};function Sn(l,p){It(l),p=dn(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function An(l,p){return It(l),p=dn(l,p),l.g.has(p)}i.forEach=function(l,p){It(this),this.g.forEach(function(_,w){_.forEach(function(M){l.call(p,M,w,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const M=l[w];for(let $=0;$<M.length;$++)_.push(p[w])}return _},i.V=function(l){It(this);let p=[];if(typeof l=="string")An(this,l)&&(p=p.concat(this.g.get(dn(this,l))));else{l=Array.from(this.g.values());for(let _=0;_<l.length;_++)p=p.concat(l[_])}return p},i.set=function(l,p){return It(this),this.i=null,l=dn(this,l),An(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},i.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function Vr(l,p,_){Sn(l,p),0<_.length&&(l.i=null,l.g.set(dn(l,p),B(_)),l.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const $=encodeURIComponent(String(w)),ee=this.V(w);for(w=0;w<ee.length;w++){var M=$;ee[w]!==""&&(M+="="+encodeURIComponent(String(ee[w]))),l.push(M)}}return this.i=l.join("&")};function dn(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function zn(l,p){p&&!l.j&&(It(l),l.i=null,l.g.forEach(function(_,w){var M=w.toLowerCase();w!=M&&(Sn(this,w),Vr(this,M,_))},l)),l.j=p}function ac(l,p){const _=new _i;if(f.Image){const w=new Image;w.onload=V(qt,_,"TestLoadImage: loaded",!0,p,w),w.onerror=V(qt,_,"TestLoadImage: error",!1,p,w),w.onabort=V(qt,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=V(qt,_,"TestLoadImage: timeout",!1,p,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else p(!1)}function Za(l,p){const _=new _i,w=new AbortController,M=setTimeout(()=>{w.abort(),qt(_,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:w.signal}).then($=>{clearTimeout(M),$.ok?qt(_,"TestPingServer: ok",!0,p):qt(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),qt(_,"TestPingServer: error",!1,p)})}function qt(l,p,_,w,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),w(_)}catch{}}function lc(){this.g=new Eo}function el(l,p,_){const w=_||"";try{Pr(l,function(M,$){let ee=M;y(M)&&(ee=_o(M)),p.push(w+$+"="+encodeURIComponent(ee))})}catch(M){throw p.push(w+"type="+encodeURIComponent("_badmap")),M}}function or(l){this.l=l.Ub||null,this.j=l.eb||!1}b(or,gi),or.prototype.g=function(){return new Ai(this.l,this.j)},or.prototype.i=function(l){return function(){return l}}({});function Ai(l,p){ct.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ai,ct),i=Ai.prototype,i.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Cn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||f).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function tl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Rn(this):Cn(this),this.readyState==3&&tl(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Rn(this))},i.Qa=function(l){this.g&&(this.response=l,Rn(this))},i.ga=function(){this.g&&Rn(this)};function Rn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Cn(l)}i.setRequestHeader=function(l,p){this.u.append(l,p)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,l.push(_[0]+": "+_[1]),_=p.next();return l.join(`\r
`)};function Cn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ar(l){let p="";return Ee(l,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function Lr(l,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=ar(_),typeof l=="string"?_!=null&&encodeURIComponent(String(_)):Be(l,p,_))}function Xe(l){ct.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Xe,ct);var uc=/^https?$/i,xo=["POST","PUT"];i=Xe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tn.g(),this.v=this.o?ts(this.o):ts(Tn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch($){Ri(this,$);return}if(l=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var M in w)_.set(M,w[M]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())_.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),M=f.FormData&&l instanceof f.FormData,!(0<=Array.prototype.indexOf.call(xo,p,void 0))||w||M||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ee]of _)this.g.setRequestHeader($,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fs(this),this.u=!0,this.g.send(l),this.u=!1}catch($){Ri(this,$)}};function Ri(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,ds(l),nn(l)}function ds(l){l.A||(l.A=!0,ht(l,"complete"),ht(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ht(this,"complete"),ht(this,"abort"),nn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),nn(this,!0)),Xe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?No(this):this.bb())},i.bb=function(){No(this)};function No(l){if(l.h&&typeof h<"u"&&(!l.v[1]||Ht(l)!=4||l.Z()!=2)){if(l.u&&Ht(l)==4)mo(l.Ea,0,l);else if(ht(l,"readystatechange"),Ht(l)==4){l.h=!1;try{const ee=l.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=ee===0){var M=String(l.D).match(Ii)[1]||null;!M&&f.self&&f.self.location&&(M=f.self.location.protocol.slice(0,-1)),w=!uc.test(M?M.toLowerCase():"")}_=w}if(_)ht(l,"complete"),ht(l,"success");else{l.m=6;try{var $=2<Ht(l)?l.g.statusText:""}catch{$=""}l.l=$+" ["+l.Z()+"]",ds(l)}}finally{nn(l)}}}}function nn(l,p){if(l.g){fs(l);const _=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||ht(l,"ready");try{_.onreadystatechange=w}catch{}}}function fs(l){l.I&&(f.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Ht(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),vo(p)}};function Do(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ps(l){const p={};l=(l.g&&2<=Ht(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(X(l[w]))continue;var _=N(l[w]);const M=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=p[M]||[];p[M]=$,$.push(_)}P(p,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(l,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[l]||p}function Vo(l){this.Aa=0,this.i=[],this.j=new _i,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,l),this.cb=jn("retryDelaySeedMs",1e4,l),this.Wa=jn("forwardChannelMaxRetries",2,l),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(l&&l.concurrentRequestLimit),this.Da=new lc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Vo.prototype,i.la=8,i.G=1,i.connect=function(l,p,_,w){rt(0),this.W=l,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=sl(this,null,this.W),Bn(this)};function St(l){if(ms(l),l.G==3){var p=l.U++,_=tn(l.I);if(Be(_,"SID",l.K),Be(_,"RID",p),Be(_,"TYPE","terminate"),lr(l,_),p=new In(l,l.j,p),p.L=2,p.v=Nr(tn(_)),_=!1,f.navigator&&f.navigator.sendBeacon)try{_=f.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&f.Image&&(new Image().src=p.v,_=!0),_||(p.g=ol(p.j,null),p.g.ea(p.v)),p.F=Date.now(),He(p)}il(l)}function Pn(l){l.g&&(Lo(l),l.g.cancel(),l.g=null)}function ms(l){Pn(l),l.u&&(f.clearTimeout(l.u),l.u=null),_s(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&f.clearTimeout(l.s),l.s=null)}function Bn(l){if(!en(l.h)&&!l.s){l.s=!0;var p=l.Ga;je||ie(),te||(je(),te=!0),me.add(p,l),l.B=0}}function cc(l,p){return Wa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=En(S(l.Ga,l,p),rl(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new In(this,this.j,l);let $=this.o;if(this.S&&($?($=T($),k($,this.S)):$=this.S),this.m!==null||this.O||(M.H=$,$=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Or(this,M,p),_=tn(this.I),Be(_,"RID",l),Be(_,"CVER",22),this.D&&Be(_,"X-HTTP-Session-Id",this.D),lr(this,_),$&&(this.O?p="headers="+encodeURIComponent(String(ar($)))+"&"+p:this.m&&Lr(_,this.m,$)),Po(this.h,M),this.Ua&&Be(_,"TYPE","init"),this.P?(Be(_,"$req",p),Be(_,"SID","null"),M.T=!0,ls(M,_,null)):ls(M,_,p),this.G=2}}else this.G==3&&(l?gs(this,l):this.i.length==0||en(this.h)||gs(this))};function gs(l,p){var _;p?_=p.l:_=l.U++;const w=tn(l.I);Be(w,"SID",l.K),Be(w,"RID",_),Be(w,"AID",l.T),lr(l,w),l.m&&l.o&&Lr(w,l.m,l.o),_=new In(l,l.j,_,l.B+1),l.m===null&&(_.H=l.o),p&&(l.i=p.D.concat(l.i)),p=Or(l,_,1e3),_.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Po(l.h,_),ls(_,w,p)}function lr(l,p){l.H&&Ee(l.H,function(_,w){Be(p,w,_)}),l.l&&Pr({},function(_,w){Be(p,w,_)})}function Or(l,p,_){_=Math.min(l.i.length,_);var w=l.l?S(l.l.Na,l.l,l):null;e:{var M=l.i;let $=-1;for(;;){const ee=["count="+_];$==-1?0<_?($=M[0].g,ee.push("ofs="+$)):$=0:ee.push("ofs="+$);let ze=!0;for(let dt=0;dt<_;dt++){let De=M[dt].g;const _t=M[dt].map;if(De-=$,0>De)$=Math.max(0,M[dt].g-100),ze=!1;else try{el(_t,ee,"req"+De+"_")}catch{w&&w(_t)}}if(ze){w=ee.join("&");break e}}}return l=l.i.splice(0,_),p.D=l,w}function Ci(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;je||ie(),te||(je(),te=!0),me.add(p,l),l.v=0}}function ys(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=En(S(l.Fa,l),rl(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,nl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=En(S(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Pn(this),nl(this))};function Lo(l){l.A!=null&&(f.clearTimeout(l.A),l.A=null)}function nl(l){l.g=new In(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=tn(l.qa);Be(p,"RID","rpc"),Be(p,"SID",l.K),Be(p,"AID",l.T),Be(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(p,"TO",l.ja),Be(p,"TYPE","xmlhttp"),lr(l,p),l.m&&l.o&&Lr(p,l.m,l.o),l.L&&(l.g.I=l.L);var _=l.g;l=l.ia,_.L=1,_.v=Nr(tn(p)),_.m=null,_.P=!0,Ro(_,l)}i.Za=function(){this.C!=null&&(this.C=null,Pn(this),ys(this),rt(19))};function _s(l){l.C!=null&&(f.clearTimeout(l.C),l.C=null)}function vs(l,p){var _=null;if(l.g==p){_s(l),Lo(l),l.g=null;var w=2}else if(Ut(l.h,p))_=p.D,Ka(l.h,p),w=1;else return;if(l.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var M=l.B;w=yi(),ht(w,new is(w,_)),Bn(l)}else Ci(l);else if(M=p.s,M==3||M==0&&0<p.X||!(w==1&&cc(l,p)||w==2&&ys(l)))switch(_&&0<_.length&&(p=l.h,p.i=p.i.concat(_)),M){case 1:ur(l,5);break;case 4:ur(l,10);break;case 3:ur(l,6);break;default:ur(l,2)}}}function rl(l,p){let _=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(_*=2),_*p}function ur(l,p){if(l.j.info("Error code "+p),p==2){var _=S(l.fb,l),w=l.Xa;const M=!w;w=new sr(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Si(w,"https"),Nr(w),M?ac(w.toString(),_):Za(w.toString(),_)}else rt(2);l.G=0,l.l&&l.l.sa(p),il(l),ms(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function il(l){if(l.G=0,l.ka=[],l.l){const p=Qa(l.h);(p.length!=0||l.i.length!=0)&&(U(l.ka,p),U(l.ka,l.i),l.h.i.length=0,B(l.i),l.i.length=0),l.l.ra()}}function sl(l,p,_){var w=_ instanceof sr?tn(_):new sr(_);if(w.g!="")p&&(w.g=p+"."+w.g),kr(w,w.s);else{var M=f.location;w=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;var $=new sr(null);w&&Si($,w),p&&($.g=p),M&&kr($,M),_&&($.l=_),w=$}return _=l.D,p=l.ya,_&&p&&Be(w,_,p),Be(w,"VER",l.la),lr(l,w),w}function ol(l,p,_){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Xe(new or({eb:_})):new Xe(l.pa),p.Ha(l.J),p}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oo(){}i=Oo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Es(){}Es.prototype.g=function(l,p){return new zt(l,p)};function zt(l,p){ct.call(this),this.g=new Vo(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!X(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!X(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new $n(this)}b(zt,ct),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){St(this.g)},zt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var _={};_.__data__=l,l=_}else this.u&&(_={},_.__data__=_o(l),l=_);p.i.push(new Ha(p.Ya++,l)),p.G==3&&Bn(p)},zt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,zt.aa.N.call(this)};function al(l){bn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const _ in p){l=_;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}b(al,bn);function ll(){rs.call(this),this.status=1}b(ll,rs);function $n(l){this.g=l}b($n,Oo),$n.prototype.ua=function(){ht(this.g,"a")},$n.prototype.ta=function(l){ht(this.g,new al(l))},$n.prototype.sa=function(l){ht(this.g,new ll)},$n.prototype.ra=function(){ht(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,my=function(){return new Es},py=function(){return yi()},fy=Fn,rd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,hu=os,ja.COMPLETE="complete",dy=ja,ns.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ct.prototype.listen=ct.prototype.K,ua=ns,Xe.prototype.listenOnce=Xe.prototype.L,Xe.prototype.getLastError=Xe.prototype.Ka,Xe.prototype.getLastErrorCode=Xe.prototype.Ba,Xe.prototype.getStatus=Xe.prototype.Z,Xe.prototype.getResponseJson=Xe.prototype.Oa,Xe.prototype.getResponseText=Xe.prototype.oa,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Ha,hy=Xe}).apply(typeof ru<"u"?ru:typeof self<"u"?self:typeof window<"u"?window:{});const jm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi=new Cd("@firebase/firestore");function Bs(){return Wi.logLevel}function se(i,...e){if(Wi.logLevel<=Ce.DEBUG){const t=e.map(kd);Wi.debug(`Firestore (${so}): ${i}`,...t)}}function wr(i,...e){if(Wi.logLevel<=Ce.ERROR){const t=e.map(kd);Wi.error(`Firestore (${so}): ${i}`,...t)}}function Xs(i,...e){if(Wi.logLevel<=Ce.WARN){const t=e.map(kd);Wi.warn(`Firestore (${so}): ${i}`,...t)}}function kd(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i="Unexpected state"){const e=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function Ue(i,e){i||ve()}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ci{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}}class gT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yT{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let u=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},f=g=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>f(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new gy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new bt(e)}}class _T{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class vT{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new _T(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ET{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const s=u=>{u.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,se("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new ET(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=TT(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%e.length))}return s}}function xe(i,e){return i<e?-1:i>e?1:0}function Ys(i,e,t){return i.length===e.length&&i.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new mt(0,0))}static max(){return new we(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t,s){t===void 0?t=0:t>e.length&&ve(),s===void 0?s=e.length-t:s>e.length-t&&ve(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Ta.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ta?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ge extends Ta{construct(e,t,s){return new Ge(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Ge(t)}static emptyPath(){return new Ge([])}}const IT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Ta{construct(e,t,s){return new Pt(e,t,s)}static isValidIdentifier(e){return IT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else f==="`"?(h=!h,o++):f!=="."||h?(s+=f,o++):(u(),o++)}if(u(),h)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ge.fromString(e))}static fromName(e){return new pe(Ge.fromString(e).popFirst(5))}static empty(){return new pe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ge(e.slice()))}}function ST(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=we.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new si(o,pe.empty(),e)}function AT(i){return new si(i.readTime,i.key,-1)}class si{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new si(we.min(),pe.empty(),-1)}static max(){return new si(we.max(),pe.empty(),-1)}}function RT(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:xe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==CT)throw i;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):W.reject(t)}static resolve(e){return new W((t,s)=>{t(e)})}static reject(e){return new W((t,s)=>{s(e)})}static waitFor(e){return new W((t,s)=>{let o=0,u=0,h=!1;e.forEach(f=>{++o,f.next(()=>{++u,h&&u===o&&t()},g=>s(g))}),h=!0,u===o&&t()})}static or(e){let t=W.resolve(!1);for(const s of e)t=t.next(o=>o?W.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,u)=>{s.push(t.call(this,o,u))}),this.waitFor(s)}static mapArray(e,t){return new W((s,o)=>{const u=e.length,h=new Array(u);let f=0;for(let g=0;g<u;g++){const y=g;t(e[y]).next(E=>{h[y]=E,++f,f===u&&s(h)},E=>o(E))}})}static doWhile(e,t){return new W((s,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):s()};u()})}}function kT(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ao(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ju.oe=-1;function Bu(i){return i==null}function Su(i){return i===0&&1/i==-1/0}function xT(i){return typeof i=="number"&&Number.isInteger(i)&&!Su(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Bm(e)),e=DT(i.get(t),e);return Bm(e)}function DT(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case"":t+="";break;default:t+=u}}return t}function Bm(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function hi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function _y(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new iu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new iu(this.root,e,this.comparator,!1)}getReverseIterator(){return new iu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new iu(this.root,e,this.comparator,!0)}}class iu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Ct.RED,this.left=o??Ct.EMPTY,this.right=u??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Ct(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ct.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,t,s,o,u){return this}insert(e,t,s){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qm(this.data.getIterator())}getIteratorFrom(e){return new qm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class qm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new ln([])}unionWith(e){let t=new gt(Pt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vy("Invalid base64 string: "+u):u}}(e);return new kt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const VT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(i){if(Ue(!!i),typeof i=="string"){let e=0;const t=VT.exec(i);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(i.seconds),nanos:st(i.nanos)}}function st(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ai(i){return typeof i=="string"?kt.fromBase64String(i):kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function $u(i){const e=i.mapValue.fields.__previous_value__;return xd(e)?$u(e):e}function Ia(i){const e=oi(i.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t,s,o,u,h,f,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=y}}class Sa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Sa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Sa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function li(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xd(i)?4:MT(i)?9007199254740991:OT(i)?10:11:ve()}function Jn(i,e){if(i===e)return!0;const t=li(i);if(t!==li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ia(i).isEqual(Ia(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=oi(o.timestampValue),f=oi(u.timestampValue);return h.seconds===f.seconds&&h.nanos===f.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,u){return ai(o.bytesValue).isEqual(ai(u.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return st(o.geoPointValue.latitude)===st(u.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return st(o.integerValue)===st(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=st(o.doubleValue),f=st(u.doubleValue);return h===f?Su(h)===Su(f):isNaN(h)&&isNaN(f)}return!1}(i,e);case 9:return Ys(i.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},f=u.mapValue.fields||{};if($m(h)!==$m(f))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(f[g]===void 0||!Jn(h[g],f[g])))return!1;return!0}(i,e);default:return ve()}}function Aa(i,e){return(i.values||[]).find(t=>Jn(t,e))!==void 0}function Js(i,e){if(i===e)return 0;const t=li(i),s=li(e);if(t!==s)return xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return xe(i.booleanValue,e.booleanValue);case 2:return function(u,h){const f=st(u.integerValue||u.doubleValue),g=st(h.integerValue||h.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(i,e);case 3:return Hm(i.timestampValue,e.timestampValue);case 4:return Hm(Ia(i),Ia(e));case 5:return xe(i.stringValue,e.stringValue);case 6:return function(u,h){const f=ai(u),g=ai(h);return f.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(u,h){const f=u.split("/"),g=h.split("/");for(let y=0;y<f.length&&y<g.length;y++){const E=xe(f[y],g[y]);if(E!==0)return E}return xe(f.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,h){const f=xe(st(u.latitude),st(h.latitude));return f!==0?f:xe(st(u.longitude),st(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return Wm(i.arrayValue,e.arrayValue);case 10:return function(u,h){var f,g,y,E;const A=u.fields||{},S=h.fields||{},V=(f=A.value)===null||f===void 0?void 0:f.arrayValue,b=(g=S.value)===null||g===void 0?void 0:g.arrayValue,B=xe(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=b==null?void 0:b.values)===null||E===void 0?void 0:E.length)||0);return B!==0?B:Wm(V,b)}(i.mapValue,e.mapValue);case 11:return function(u,h){if(u===su.mapValue&&h===su.mapValue)return 0;if(u===su.mapValue)return 1;if(h===su.mapValue)return-1;const f=u.fields||{},g=Object.keys(f),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const S=xe(g[A],E[A]);if(S!==0)return S;const V=Js(f[g[A]],y[E[A]]);if(V!==0)return V}return xe(g.length,E.length)}(i.mapValue,e.mapValue);default:throw ve()}}function Hm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return xe(i,e);const t=oi(i),s=oi(e),o=xe(t.seconds,s.seconds);return o!==0?o:xe(t.nanos,s.nanos)}function Wm(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=Js(t[o],s[o]);if(u)return u}return xe(t.length,s.length)}function Zs(i){return id(i)}function id(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const s=oi(t);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ai(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return pe.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=id(u);return s+"]"}(i.arrayValue):"mapValue"in i?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${id(t.fields[h])}`;return o+"}"}(i.mapValue):ve()}function du(i){switch(li(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$u(i);return e?16+du(e):16;case 5:return 2*i.stringValue.length;case 6:return ai(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+du(u),0)}(i.arrayValue);case 10:case 11:return function(s){let o=0;return hi(s.fields,(u,h)=>{o+=u.length+du(h)}),o}(i.mapValue);default:throw ve()}}function Km(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function sd(i){return!!i&&"integerValue"in i}function Nd(i){return!!i&&"arrayValue"in i}function Qm(i){return!!i&&"nullValue"in i}function Gm(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function fu(i){return!!i&&"mapValue"in i}function OT(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function fa(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return hi(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=fa(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fa(i.arrayValue.values[t]);return e}return Object.assign({},i)}function MT(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.value=e}static empty(){return new Zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!fu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fa(t)}setAll(e){let t=Pt.emptyPath(),s={},o=[];e.forEach((h,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=f.popLast()}h?s[f.lastSegment()]=fa(h):o.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());fu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];fu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){hi(t,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new Zt(fa(this.value))}}function Ey(i){const e=[];return hi(i.fields,(t,s)=>{const o=new Pt([t]);if(fu(s)){const u=Ey(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,u,h,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=f}static newInvalidDocument(e){return new Ft(e,0,we.min(),we.min(),we.min(),Zt.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,we.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,we.min(),we.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,we.min(),we.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.position=e,this.inclusive=t}}function Xm(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=pe.comparator(pe.fromName(h.referenceValue),t.key):s=Js(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ym(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Jn(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t="asc"){this.field=e,this.dir=t}}function bT(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{}class ut extends wy{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new UT(e,t,s):t==="array-contains"?new BT(e,s):t==="in"?new $T(e,s):t==="not-in"?new qT(e,s):t==="array-contains-any"?new HT(e,s):new ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zT(e,s):new jT(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Js(t,this.value)):t!==null&&li(this.value)===li(t)&&this.matchesComparison(Js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends wy{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Mn(e,t)}matches(e){return Ty(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ty(i){return i.op==="and"}function Iy(i){return FT(i)&&Ty(i)}function FT(i){for(const e of i.filters)if(e instanceof Mn)return!1;return!0}function od(i){if(i instanceof ut)return i.field.canonicalString()+i.op.toString()+Zs(i.value);if(Iy(i))return i.filters.map(e=>od(e)).join(",");{const e=i.filters.map(t=>od(t)).join(",");return`${i.op}(${e})`}}function Sy(i,e){return i instanceof ut?function(s,o){return o instanceof ut&&s.op===o.op&&s.field.isEqual(o.field)&&Jn(s.value,o.value)}(i,e):i instanceof Mn?function(s,o){return o instanceof Mn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,h,f)=>u&&Sy(h,o.filters[f]),!0):!1}(i,e):void ve()}function Ay(i){return i instanceof ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Zs(t.value)}`}(i):i instanceof Mn?function(t){return t.op.toString()+" {"+t.getFilters().map(Ay).join(" ,")+"}"}(i):"Filter"}class UT extends ut{constructor(e,t,s){super(e,t,s),this.key=pe.fromName(s.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class zT extends ut{constructor(e,t){super(e,"in",t),this.keys=Ry("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jT extends ut{constructor(e,t){super(e,"not-in",t),this.keys=Ry("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ry(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>pe.fromName(s.referenceValue))}class BT extends ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nd(t)&&Aa(t.arrayValue,this.value)}}class $T extends ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}}class qT extends ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Aa(this.value.arrayValue,t)}}class HT extends ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Aa(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(e,t=null,s=[],o=[],u=null,h=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=f,this.ue=null}}function Jm(i,e=null,t=[],s=[],o=null,u=null,h=null){return new WT(i,e,t,s,o,u,h)}function Dd(i){const e=Te(i);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>od(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),Bu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Zs(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Zs(s)).join(",")),e.ue=t}return e.ue}function Vd(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!bT(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Sy(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ym(i.startAt,e.startAt)&&Ym(i.endAt,e.endAt)}function ad(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t=null,s=[],o=[],u=null,h="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function KT(i,e,t,s,o,u,h,f){return new Da(i,e,t,s,o,u,h,f)}function Ld(i){return new Da(i)}function Zm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Cy(i){return i.collectionGroup!==null}function pa(i){const e=Te(i);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let f=new gt(Pt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(f=f.add(y.field))})}),f})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Ru(u,s))}),t.has(Pt.keyField().canonicalString())||e.ce.push(new Ru(Pt.keyField(),s))}return e.ce}function Qn(i){const e=Te(i);return e.le||(e.le=QT(e,pa(i))),e.le}function QT(i,e){if(i.limitType==="F")return Jm(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Ru(o.field,u)});const t=i.endAt?new Au(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Au(i.startAt.position,i.startAt.inclusive):null;return Jm(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function ld(i,e){const t=i.filters.concat([e]);return new Da(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function ud(i,e,t){return new Da(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function qu(i,e){return Vd(Qn(i),Qn(e))&&i.limitType===e.limitType}function Py(i){return`${Dd(Qn(i))}|lt:${i.limitType}`}function $s(i){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>Ay(o)).join(", ")}]`),Bu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>Zs(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>Zs(o)).join(",")),`Target(${s})`}(Qn(i))}; limitType=${i.limitType})`}function Hu(i,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):pe.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(i,e)&&function(s,o){for(const u of pa(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(i,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(i,e)&&function(s,o){return!(s.startAt&&!function(h,f,g){const y=Xm(h,f,g);return h.inclusive?y<=0:y<0}(s.startAt,pa(s),o)||s.endAt&&!function(h,f,g){const y=Xm(h,f,g);return h.inclusive?y>=0:y>0}(s.endAt,pa(s),o))}(i,e)}function GT(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ky(i){return(e,t)=>{let s=!1;for(const o of pa(i)){const u=XT(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function XT(i,e,t){const s=i.field.isKeyField()?pe.comparator(e.key,t.key):function(u,h,f){const g=h.data.field(u),y=f.data.field(u);return g!==null&&y!==null?Js(g,y):ve()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(t,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return _y(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new tt(pe.comparator);function Tr(){return YT}const xy=new tt(pe.comparator);function ca(...i){let e=xy;for(const t of i)e=e.insert(t.key,t);return e}function Ny(i){let e=xy;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Bi(){return ma()}function Dy(){return ma()}function ma(){return new Qi(i=>i.toString(),(i,e)=>i.isEqual(e))}const JT=new tt(pe.comparator),ZT=new gt(pe.comparator);function Pe(...i){let e=ZT;for(const t of i)e=e.add(t);return e}const e1=new gt(xe);function t1(){return e1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Su(e)?"-0":e}}function Vy(i){return{integerValue:""+i}}function n1(i,e){return xT(e)?Vy(e):Od(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this._=void 0}}function r1(i,e,t){return i instanceof Cu?function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xd(u)&&(u=$u(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(t,e):i instanceof Ra?Oy(i,e):i instanceof Ca?My(i,e):function(o,u){const h=Ly(o,u),f=eg(h)+eg(o.Pe);return sd(h)&&sd(o.Pe)?Vy(f):Od(o.serializer,f)}(i,e)}function i1(i,e,t){return i instanceof Ra?Oy(i,e):i instanceof Ca?My(i,e):t}function Ly(i,e){return i instanceof Pu?function(s){return sd(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Cu extends Wu{}class Ra extends Wu{constructor(e){super(),this.elements=e}}function Oy(i,e){const t=by(e);for(const s of i.elements)t.some(o=>Jn(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ca extends Wu{constructor(e){super(),this.elements=e}}function My(i,e){let t=by(e);for(const s of i.elements)t=t.filter(o=>!Jn(o,s));return{arrayValue:{values:t}}}class Pu extends Wu{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function eg(i){return st(i.integerValue||i.doubleValue)}function by(i){return Nd(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function s1(i,e){return i.field.isEqual(e.field)&&function(s,o){return s instanceof Ra&&o instanceof Ra||s instanceof Ca&&o instanceof Ca?Ys(s.elements,o.elements,Jn):s instanceof Pu&&o instanceof Pu?Jn(s.Pe,o.Pe):s instanceof Cu&&o instanceof Cu}(i.transform,e.transform)}class o1{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pu(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Ku{}function Fy(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zy(i.key,Gn.none()):new Va(i.key,i.data,Gn.none());{const t=i.data,s=Zt.empty();let o=new gt(Pt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new di(i.key,s,new ln(o.toArray()),Gn.none())}}function a1(i,e,t){i instanceof Va?function(o,u,h){const f=o.value.clone(),g=ng(o.fieldTransforms,u,h.transformResults);f.setAll(g),u.convertToFoundDocument(h.version,f).setHasCommittedMutations()}(i,e,t):i instanceof di?function(o,u,h){if(!pu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const f=ng(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(Uy(o)),g.setAll(f),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(i,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function ga(i,e,t,s){return i instanceof Va?function(u,h,f,g){if(!pu(u.precondition,h))return f;const y=u.value.clone(),E=rg(u.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(i,e,t,s):i instanceof di?function(u,h,f,g){if(!pu(u.precondition,h))return f;const y=rg(u.fieldTransforms,g,h),E=h.data;return E.setAll(Uy(u)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),f===null?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(A=>A.field))}(i,e,t,s):function(u,h,f){return pu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):f}(i,e,t)}function l1(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=Ly(s.transform,o||null);u!=null&&(t===null&&(t=Zt.empty()),t.set(s.field,u))}return t||null}function tg(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ys(s,o,(u,h)=>s1(u,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Va extends Ku{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class di extends Ku{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Uy(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function ng(i,e,t){const s=new Map;Ue(i.length===t.length);for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,f=e.data.field(u.field);s.set(u.field,i1(h,f,t[o]))}return s}function rg(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,r1(u,h,e))}return s}class zy extends Ku{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u1 extends Ku{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&a1(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ga(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ga(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Dy();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let f=this.applyToLocalView(h,u.mutatedFields);f=t.has(o.key)?null:f;const g=Fy(h,f);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(t,s)=>tg(t,s))&&Ys(this.baseMutations,e.baseMutations,(t,s)=>tg(t,s))}}class Md{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length);let o=function(){return JT}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Md(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Ve;function f1(i){switch(i){default:return ve();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function jy(i){if(i===void 0)return wr("GRPC error has no .code"),Q.UNKNOWN;switch(i){case lt.OK:return Q.OK;case lt.CANCELLED:return Q.CANCELLED;case lt.UNKNOWN:return Q.UNKNOWN;case lt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case lt.INTERNAL:return Q.INTERNAL;case lt.UNAVAILABLE:return Q.UNAVAILABLE;case lt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case lt.NOT_FOUND:return Q.NOT_FOUND;case lt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case lt.ABORTED:return Q.ABORTED;case lt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case lt.DATA_LOSS:return Q.DATA_LOSS;default:return ve()}}(Ve=lt||(lt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new qi([4294967295,4294967295],0);function ig(i){const e=p1().encode(i),t=new cy;return t.update(e),new Uint8Array(t.digest())}function sg(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new qi([t,s],0),new qi([o,u],0)]}class bd{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ha(`Invalid padding: ${t}`);if(s<0)throw new ha(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ha(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ha(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=qi.fromNumber(this.Te)}Ee(e,t,s){let o=e.add(t.multiply(qi.fromNumber(s)));return o.compare(m1)===1&&(o=new qi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=ig(e),[s,o]=sg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new bd(u,o,t);return s.forEach(f=>h.insert(f)),h}insert(e){if(this.Te===0)return;const t=ig(e),[s,o]=sg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(s,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ha extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,La.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Qu(we.min(),o,new tt(xe),Tr(),Pe())}}class La{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new La(s,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class By{constructor(e,t){this.targetId=e,this.me=t}}class $y{constructor(e,t,s=kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class og{constructor(){this.fe=0,this.ge=ag(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),t=Pe(),s=Pe();return this.ge.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:ve()}}),new La(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=ag()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class g1{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tr(),this.qe=ou(),this.Qe=ou(),this.Ke=new tt(xe)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const u=o.target;if(ad(u))if(s===0){const h=new pe(u.path);this.We(t,h,Ft.newNoDocument(h,we.min()))}else Ue(s===1);else{const h=this.Ze(t);if(h!==s){const f=this.Xe(e),g=f?this.et(f,e,h):1;if(g!==0){this.He(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,f;try{h=ai(s).toUint8Array()}catch(g){if(g instanceof vy)return Xs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new bd(h,o,u)}catch(g){return Xs(g instanceof ha?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.Te===0?null:f}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(u=>{const h=this.Le.nt(),f=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(f)||(this.We(t,u,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((u,h)=>{const f=this.Ye(h);if(f){if(u.current&&ad(f.target)){const g=new pe(f.target.path);this.st(g).has(h)||this.ot(h,g)||this.We(h,g,Ft.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}});let s=Pe();this.Qe.forEach((u,h)=>{let f=!0;h.forEachWhile(g=>{const y=this.Ye(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(s=s.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const o=new Qu(e,t,this.Ke,this.ke,s);return this.ke=Tr(),this.qe=ou(),this.Qe=ou(),this.Ke=new tt(xe),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new og,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new gt(xe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(xe),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new og),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ou(){return new tt(pe.comparator)}function ag(){return new tt(pe.comparator)}const y1={asc:"ASCENDING",desc:"DESCENDING"},_1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v1={and:"AND",or:"OR"};class E1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cd(i,e){return i.useProto3Json||Bu(e)?e:{value:e}}function ku(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qy(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function w1(i,e){return ku(i,e.toTimestamp())}function Xn(i){return Ue(!!i),we.fromTimestamp(function(t){const s=oi(t);return new mt(s.seconds,s.nanos)}(i))}function Fd(i,e){return hd(i,e).canonicalString()}function hd(i,e){const t=function(o){return new Ge(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function Hy(i){const e=Ge.fromString(i);return Ue(Xy(e)),e}function dd(i,e){return Fd(i.databaseId,e.path)}function Bh(i,e){const t=Hy(e);if(t.get(1)!==i.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(Ky(t))}function Wy(i,e){return Fd(i.databaseId,e)}function T1(i){const e=Hy(i);return e.length===4?Ge.emptyPath():Ky(e)}function fd(i){return new Ge(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ky(i){return Ue(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function lg(i,e,t){return{name:dd(i,e),fields:t.value.mapValue.fields}}function I1(i,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,E){return y.useProto3Json?(Ue(E===void 0||typeof E=="string"),kt.fromBase64String(E||"")):(Ue(E===void 0||E instanceof Buffer||E instanceof Uint8Array),kt.fromUint8Array(E||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,f=h&&function(y){const E=y.code===void 0?Q.UNKNOWN:jy(y.code);return new ae(E,y.message||"")}(h);t=new $y(s,o,u,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Bh(i,s.document.name),u=Xn(s.document.updateTime),h=s.document.createTime?Xn(s.document.createTime):we.min(),f=new Zt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(o,u,h,f),y=s.targetIds||[],E=s.removedTargetIds||[];t=new mu(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Bh(i,s.document),u=s.readTime?Xn(s.readTime):we.min(),h=Ft.newNoDocument(o,u),f=s.removedTargetIds||[];t=new mu([],f,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Bh(i,s.document),u=s.removedTargetIds||[];t=new mu([],u,o,null)}else{if(!("filter"in e))return ve();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new d1(o,u),f=s.targetId;t=new By(f,h)}}return t}function S1(i,e){let t;if(e instanceof Va)t={update:lg(i,e.key,e.value)};else if(e instanceof zy)t={delete:dd(i,e.key)};else if(e instanceof di)t={update:lg(i,e.key,e.data),updateMask:V1(e.fieldMask)};else{if(!(e instanceof u1))return ve();t={verify:dd(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,h){const f=h.transform;if(f instanceof Cu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ra)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ca)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Pu)return{fieldPath:h.field.canonicalString(),increment:f.Pe};throw ve()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:w1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ve()}(i,e.precondition)),t}function A1(i,e){return i&&i.length>0?(Ue(e!==void 0),i.map(t=>function(o,u){let h=o.updateTime?Xn(o.updateTime):Xn(u);return h.isEqual(we.min())&&(h=Xn(u)),new o1(h,o.transformResults||[])}(t,e))):[]}function R1(i,e){return{documents:[Wy(i,e.path)]}}function C1(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Wy(i,o);const u=function(y){if(y.length!==0)return Gy(Mn.create(y,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(y){if(y.length!==0)return y.map(E=>function(S){return{field:qs(S.field),direction:x1(S.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const f=cd(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function P1(i){let e=T1(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(A){const S=Qy(A);return S instanceof Mn&&Iy(S)?S.getFilters():[S]}(t.where));let h=[];t.orderBy&&(h=function(A){return A.map(S=>function(b){return new Ru(Hs(b.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(S))}(t.orderBy));let f=null;t.limit&&(f=function(A){let S;return S=typeof A=="object"?A.value:A,Bu(S)?null:S}(t.limit));let g=null;t.startAt&&(g=function(A){const S=!!A.before,V=A.values||[];return new Au(V,S)}(t.startAt));let y=null;return t.endAt&&(y=function(A){const S=!A.before,V=A.values||[];return new Au(V,S)}(t.endAt)),KT(e,o,h,u,f,"F",g,y)}function k1(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Qy(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Hs(t.unaryFilter.field);return ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Hs(t.unaryFilter.field);return ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hs(t.unaryFilter.field);return ut.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Hs(t.unaryFilter.field);return ut.create(h,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(i):i.fieldFilter!==void 0?function(t){return ut.create(Hs(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return Mn.create(t.compositeFilter.filters.map(s=>Qy(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve()}}(t.compositeFilter.op))}(i):ve()}function x1(i){return y1[i]}function N1(i){return _1[i]}function D1(i){return v1[i]}function qs(i){return{fieldPath:i.canonicalString()}}function Hs(i){return Pt.fromServerFormat(i.fieldPath)}function Gy(i){return i instanceof ut?function(t){if(t.op==="=="){if(Gm(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(Qm(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gm(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(Qm(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:N1(t.op),value:t.value}}}(i):i instanceof Mn?function(t){const s=t.getFilters().map(o=>Gy(o));return s.length===1?s[0]:{compositeFilter:{op:D1(t.op),filters:s}}}(i):ve()}function V1(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Xy(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t,s,o,u=we.min(),h=we.min(),f=kt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this.ht=e}}function O1(i){const e=P1({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.ln=new b1}addToCollectionParentIndex(e,t){return this.ln.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(si.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(si.min())}updateCollectionGroup(e,t,s){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class b1{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gt(Ge.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new eo(0)}static Qn(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg([i,e],[t,s]){const o=xe(i,t);return o===0?xe(e,s):o}class F1{constructor(e){this.Gn=e,this.buffer=new gt(cg),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();cg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class U1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ao(t)?se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await oo(t)}await this.Yn(3e5)})}}class z1{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return W.resolve(ju.oe);const s=new F1(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(ug)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ug):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,u,h,f,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(s=A,f=Date.now(),this.removeTargets(e,s,t))).next(A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(e,s))).next(A=>(y=Date.now(),Bs()<=Ce.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(f-h)+`ms
	Removed ${u} targets in `+(g-f)+`ms
	Removed ${A} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}function j1(i,e){return new z1(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.changes=new Qi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?W.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&ga(s.mutation,o,ln.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Pe()){const o=Bi();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(u=>{let h=ca();return u.forEach((f,g)=>{h=h.insert(f,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=Bi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Pe()))}populateOverlays(e,t,s){const o=[];return s.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,f)=>{t.set(h,f)})})}computeViews(e,t,s,o){let u=Tr();const h=ma(),f=function(){return ma()}();return t.forEach((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof di)?u=u.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),ga(E.mutation,y,E.mutation.getFieldMask(),mt.now())):h.set(y.key,ln.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,E)=>h.set(y,E)),t.forEach((y,E)=>{var A;return f.set(y,new $1(E,(A=h.get(y))!==null&&A!==void 0?A:null))}),f))}recalculateAndSaveOverlays(e,t){const s=ma();let o=new tt((h,f)=>h-f),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const f of h)f.keys().forEach(g=>{const y=t.get(g);if(y===null)return;let E=s.get(g)||ln.empty();E=f.applyToLocalView(y,E),s.set(g,E);const A=(o.get(f.batchId)||Pe()).add(g);o=o.insert(f.batchId,A)})}).next(()=>{const h=[],f=o.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),y=g.key,E=g.value,A=Dy();E.forEach(S=>{if(!u.has(S)){const V=Fy(t.get(S),s.get(S));V!==null&&A.set(S,V),u=u.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,A))}return W.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return pe.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):W.resolve(Bi());let f=-1,g=u;return h.next(y=>W.forEach(y,(E,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),u.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{g=g.insert(E,S)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,Pe())).next(E=>({batchId:f,changes:Ny(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(s=>{let o=ca();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=ca();return this.indexManager.getCollectionParents(e,u).next(f=>W.forEach(f,g=>{const y=function(A,S){return new Da(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((A,S)=>{h=h.insert(A,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o))).next(h=>{u.forEach((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,Ft.newInvalidDocument(E)))});let f=ca();return h.forEach((g,y)=>{const E=u.get(g);E!==void 0&&ga(E.mutation,y,ln.empty(),mt.now()),Hu(t,y)&&(f=f.insert(g,y))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return W.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Xn(o.createTime)}}(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:O1(o.bundledQuery),readTime:Xn(o.readTime)}}(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.overlays=new tt(pe.comparator),this.Er=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Bi();return W.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,u)=>{this.Tt(e,t,u)}),W.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Er.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Er.delete(s)),W.resolve()}getOverlaysForCollection(e,t,s){const o=Bi(),u=t.length+1,h=new pe(t.child("")),f=this.overlays.getIteratorFrom(h);for(;f.hasNext();){const g=f.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new tt((y,E)=>y-E);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=Bi(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const f=Bi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,E)=>f.set(y,E)),!(f.size()>=o)););return W.resolve(f)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new h1(t,s));let u=this.Er.get(t);u===void 0&&(u=Pe(),this.Er.set(t,u)),this.Er.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(){this.dr=new gt(Tt.Ar),this.Rr=new gt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Tt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new pe(new Ge([])),s=new Tt(t,e),o=new Tt(t,e+1),u=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),u.push(h.key)}),u}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new pe(new Ge([])),s=new Tt(t,e),o=new Tt(t,e+1);let u=Pe();return this.Rr.forEachInRange([s,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new Tt(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return pe.comparator(e.key,t.key)||xe(e.br,t.br)}static Vr(e,t){return xe(e.br,t.br)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new gt(Tt.Ar)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new c1(u,t,s,o);this.mutationQueue.push(h);for(const f of o)this.vr=this.vr.add(new Tt(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return W.resolve(h)}lookupMutationBatch(e,t){return W.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),u=[];return this.vr.forEachInRange([s,o],h=>{const f=this.Cr(h.br);u.push(f)}),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(xe);return t.forEach(o=>{const u=new Tt(o,0),h=new Tt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([u,h],f=>{s=s.add(f.br)})}),W.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;pe.isDocumentKey(u)||(u=u.child(""));const h=new Tt(new pe(u),0);let f=new gt(xe);return this.vr.forEachWhile(g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(g.br)),!0)},h),W.resolve(this.Mr(f))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return W.forEach(t.mutations,o=>{const u=new Tt(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new Tt(t,0),o=this.vr.firstAfterOrEqual(s);return W.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e){this.Nr=e,this.docs=function(){return new tt(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return W.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=Tr();return t.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Ft.newInvalidDocument(o))}),W.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=Tr();const h=t.path,f=new pe(h.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||RT(AT(E),s)<=0||(o.has(E.key)||Hu(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,t,s,o){ve()}Lr(e,t){return W.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new X1(this)}getSize(e){return W.resolve(this.size)}}class X1 extends B1{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),W.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.persistence=e,this.Br=new Qi(t=>Dd(t),Vd),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new Ud,this.targetCount=0,this.Qr=eo.qn()}forEachTarget(e,t){return this.Br.forEach((s,o)=>t(o)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),W.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new eo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Un(t),W.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.Br.forEach((h,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.Br.delete(h),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)}),W.waitFor(u).next(()=>o)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return W.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),W.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),W.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return W.resolve(s)}containsKey(e,t){return W.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.Kr={},this.overlays={},this.$r=new ju(0),this.Ur=!1,this.Ur=!0,this.Wr=new K1,this.referenceDelegate=e(this),this.Gr=new Y1(this),this.indexManager=new M1,this.remoteDocumentCache=function(o){return new G1(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new L1(t),this.jr=new H1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new W1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new Q1(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){se("MemoryPersistence","Starting transaction:",e);const o=new J1(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(u=>this.referenceDelegate.Jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Yr(e,t){return W.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class J1 extends PT{constructor(e){super(),this.currentSequenceNumber=e}}class zd{constructor(e){this.persistence=e,this.Zr=new Ud,this.Xr=null}static ei(e){return new zd(e)}get ti(){if(this.Xr)return this.Xr;throw ve()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),W.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),W.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.ti.add(u.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.ti,s=>{const o=pe.fromPath(s);return this.ni(e,o).next(u=>{u||t.removeEntry(o,we.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return W.or([()=>W.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class xu{constructor(e,t){this.persistence=e,this.ri=new Qi(s=>NT(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=j1(this,t)}static ei(e,t){return new xu(e,t)}Hr(){}Jr(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return W.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(u=>u?W.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.Lr(e,h=>this.ir(e,h,t).next(f=>{f||(s++,u.removeEntry(h,we.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),W.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=du(e.data.value)),t}ir(e,t,s){return W.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=Pe(),o=Pe();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new jd(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return YE()?8:kT(On())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.Xi(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.es(e,t,o,s).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new Z1;return this.ts(e,t,h).next(f=>{if(u.result=f,this.Hi)return this.ns(e,t,h,f.size)})}).next(()=>u.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(Bs()<=Ce.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",$s(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),W.resolve()):(Bs()<=Ce.DEBUG&&se("QueryEngine","Query:",$s(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(Bs()<=Ce.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",$s(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(t))):W.resolve())}Xi(e,t){if(Zm(t))return W.resolve(null);let s=Qn(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=ud(t,null,"F"),s=Qn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const h=Pe(...u);return this.Zi.getDocuments(e,h).next(f=>this.indexManager.getMinOffset(e,s).next(g=>{const y=this.rs(t,f);return this.ss(t,y,h,g.readTime)?this.Xi(e,ud(t,null,"F")):this.os(e,y,t,g)}))})))}es(e,t,s,o){return Zm(t)||o.isEqual(we.min())?W.resolve(null):this.Zi.getDocuments(e,s).next(u=>{const h=this.rs(t,u);return this.ss(t,h,s,o)?W.resolve(null):(Bs()<=Ce.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),$s(t)),this.os(e,h,t,ST(o,-1)).next(f=>f))})}rs(e,t){let s=new gt(ky(e));return t.forEach((o,u)=>{Hu(e,u)&&(s=s.add(u))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ts(e,t,s){return Bs()<=Ce.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",$s(t)),this.Zi.getDocumentsMatchingQuery(e,t,si.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new tt(xe),this.cs=new Qi(u=>Dd(u),Vd),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q1(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function nI(i,e,t,s){return new tI(i,e,t,s)}async function Jy(i,e){const t=Te(i);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(u=>{const h=[],f=[];let g=Pe();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(s,g).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:f}))})})}function rI(i,e){const t=Te(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=t.hs.newChangeBuffer({trackRemovals:!0});return function(f,g,y,E){const A=y.batch,S=A.keys();let V=W.resolve();return S.forEach(b=>{V=V.next(()=>E.getEntry(g,b)).next(B=>{const U=y.docVersions.get(b);Ue(U!==null),B.version.compareTo(U)<0&&(A.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))})}),V.next(()=>f.mutationQueue.removeMutationBatch(g,A))}(t,s,e,u).next(()=>u.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(f){let g=Pe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(g=g.add(f.batch.mutations[y].key));return g}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Zy(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function iI(i,e){const t=Te(i),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const f=[];e.targetChanges.forEach((E,A)=>{const S=o.get(A);if(!S)return;f.push(t.Gr.removeMatchingKeys(u,E.removedDocuments,A).next(()=>t.Gr.addMatchingKeys(u,E.addedDocuments,A)));let V=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(A)!==null?V=V.withResumeToken(kt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,s)),o=o.insert(A,V),function(B,U,H){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(S,V,E)&&f.push(t.Gr.updateTargetData(u,V))});let g=Tr(),y=Pe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),f.push(sI(u,h,e.documentUpdates).next(E=>{g=E.Is,y=E.Es})),!s.isEqual(we.min())){const E=t.Gr.getLastRemoteSnapshotVersion(u).next(A=>t.Gr.setTargetsMetadata(u,u.currentSequenceNumber,s));f.push(E)}return W.waitFor(f).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(t.us=o,u))}function sI(i,e,t){let s=Pe(),o=Pe();return t.forEach(u=>s=s.add(u)),e.getEntries(i,s).next(u=>{let h=Tr();return t.forEach((f,g)=>{const y=u.get(f);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(f,g.readTime),h=h.insert(f,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(f,g)):se("LocalStore","Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",g.version)}),{Is:h,Es:o}})}function oI(i,e){const t=Te(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function aI(i,e){const t=Te(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(u=>u?(o=u,W.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new Jr(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function pd(i,e,t){const s=Te(i),o=s.us.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!ao(h))throw h;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function hg(i,e,t){const s=Te(i);let o=we.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(g,y,E){const A=Te(g),S=A.cs.get(E);return S!==void 0?W.resolve(A.us.get(S)):A.Gr.getTargetData(y,E)}(s,h,Qn(e)).next(f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,f.targetId).next(g=>{u=g})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:we.min(),t?u:Pe())).next(f=>(lI(s,GT(e),f),{documents:f,ds:u})))}function lI(i,e,t){let s=i.ls.get(e)||we.min();t.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),i.ls.set(e,s)}class dg{constructor(){this.activeTargetIds=t1()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uI{constructor(){this._o=new dg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new dg,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au=null;function $h(){return au===null?au=function(){return 268435456+Math.round(2147483648*Math.random())}():au++,"0x"+au.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class fI extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${u}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}Oo(t,s,o,u,h){const f=$h(),g=this.No(t,s.toUriEncodedString());se("RestConnection",`Sending RPC '${t}' ${f}:`,g,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,u,h),this.Bo(t,g,y,o).then(E=>(se("RestConnection",`Received RPC '${t}' ${f}: `,E),E),E=>{throw Xs("RestConnection",`RPC '${t}' ${f} failed with error: `,E,"url: ",g,"request:",o),E})}ko(t,s,o,u,h,f){return this.Oo(t,s,o,u,h)}Lo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+so}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((u,h)=>t[h]=u),o&&o.headers.forEach((u,h)=>t[h]=u)}No(t,s){const o=hI[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,o){const u=$h();return new Promise((h,f)=>{const g=new hy;g.setWithCredentials(!0),g.listenOnce(dy.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case hu.NO_ERROR:const E=g.getResponseJson();se(Mt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case hu.TIMEOUT:se(Mt,`RPC '${e}' ${u} timed out`),f(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case hu.HTTP_ERROR:const A=g.getStatus();if(se(Mt,`RPC '${e}' ${u} failed with status:`,A,"response text:",g.getResponseText()),A>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const V=S==null?void 0:S.error;if(V&&V.status&&V.message){const b=function(U){const H=U.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(H)>=0?H:Q.UNKNOWN}(V.status);f(new ae(b,V.message))}else f(new ae(Q.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{se(Mt,`RPC '${e}' ${u} completed.`)}});const y=JSON.stringify(o);se(Mt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",y,s,15)})}qo(e,t,s){const o=$h(),u=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=my(),f=py(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Lo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const E=u.join("");se(Mt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const A=h.createWebChannel(E,g);let S=!1,V=!1;const b=new dI({Eo:U=>{V?se(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(S||(se(Mt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),se(Mt,`RPC '${e}' stream ${o} sending:`,U),A.send(U))},Ao:()=>A.close()}),B=(U,H,X)=>{U.listen(H,ne=>{try{X(ne)}catch(de){setTimeout(()=>{throw de},0)}})};return B(A,ua.EventType.OPEN,()=>{V||(se(Mt,`RPC '${e}' stream ${o} transport opened.`),b.So())}),B(A,ua.EventType.CLOSE,()=>{V||(V=!0,se(Mt,`RPC '${e}' stream ${o} transport closed`),b.Do())}),B(A,ua.EventType.ERROR,U=>{V||(V=!0,Xs(Mt,`RPC '${e}' stream ${o} transport errored:`,U),b.Do(new ae(Q.UNAVAILABLE,"The operation could not be completed")))}),B(A,ua.EventType.MESSAGE,U=>{var H;if(!V){const X=U.data[0];Ue(!!X);const ne=X,de=(ne==null?void 0:ne.error)||((H=ne[0])===null||H===void 0?void 0:H.error);if(de){se(Mt,`RPC '${e}' stream ${o} received error:`,de);const Ie=de.status;let Ee=function(I){const k=lt[I];if(k!==void 0)return jy(k)}(Ie),P=de.message;Ee===void 0&&(Ee=Q.INTERNAL,P="Unknown error status: "+Ie+" with message "+de.message),V=!0,b.Do(new ae(Ee,P)),A.close()}else se(Mt,`RPC '${e}' stream ${o} received:`,X),b.vo(X)}}),B(f,fy.STAT_EVENT,U=>{U.stat===rd.PROXY?se(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===rd.NOPROXY&&se(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.bo()},0),b}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(i){return new E1(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,t,s=1e3,o=1.5,u=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=u,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&se("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,t,s,o,u,h,f,g){this.li=e,this.Yo=s,this.Zo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new e_(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(wr(t.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new ae(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pI extends t_{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=I1(this.serializer,e),s=function(u){if(!("targetChange"in u))return we.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?we.min():h.readTime?Xn(h.readTime):we.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=fd(this.serializer),t.addTarget=function(u,h){let f;const g=h.target;if(f=ad(g)?{documents:R1(u,g)}:{query:C1(u,g).ct},f.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){f.resumeToken=qy(u,h.resumeToken);const y=cd(u,h.expectedCount);y!==null&&(f.expectedCount=y)}else if(h.snapshotVersion.compareTo(we.min())>0){f.readTime=ku(u,h.snapshotVersion.toTimestamp());const y=cd(u,h.expectedCount);y!==null&&(f.expectedCount=y)}return f}(this.serializer,e);const s=k1(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=fd(this.serializer),t.removeTarget=e,this.c_(t)}}class mI extends t_{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=A1(e.writeResults,e.commitTime),s=Xn(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=fd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>S1(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Oo(e,hd(t,s),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ae(Q.UNKNOWN,u.toString())})}ko(e,t,s,o,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,f])=>this.connection.ko(e,hd(t,s),o,h,f,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(Q.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class yI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wr(t),this.C_=!1):se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=u,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{Gi(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(g){const y=Te(g);y.k_.add(4),await Oa(y),y.K_.set("Unknown"),y.k_.delete(4),await Xu(y)}(this))})}),this.K_=new yI(s,o)}}async function Xu(i){if(Gi(i))for(const e of i.q_)await e(!0)}async function Oa(i){for(const e of i.q_)await e(!1)}function n_(i,e){const t=Te(i);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Hd(t)?qd(t):lo(t).s_()&&$d(t,e))}function Bd(i,e){const t=Te(i),s=lo(t);t.B_.delete(e),s.s_()&&r_(t,e),t.B_.size===0&&(s.s_()?s.a_():Gi(t)&&t.K_.set("Unknown"))}function $d(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lo(i).V_(e)}function r_(i,e){i.U_.xe(e),lo(i).m_(e)}function qd(i){i.U_=new g1({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),lo(i).start(),i.K_.F_()}function Hd(i){return Gi(i)&&!lo(i).i_()&&i.B_.size>0}function Gi(i){return Te(i).k_.size===0}function i_(i){i.U_=void 0}async function vI(i){i.K_.set("Online")}async function EI(i){i.B_.forEach((e,t)=>{$d(i,e)})}async function wI(i,e){i_(i),Hd(i)?(i.K_.O_(e),qd(i)):i.K_.set("Unknown")}async function TI(i,e,t){if(i.K_.set("Online"),e instanceof $y&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const f of u.targetIds)o.B_.has(f)&&(await o.remoteSyncer.rejectListen(f,h),o.B_.delete(f),o.U_.removeTarget(f))}(i,e)}catch(s){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Nu(i,s)}else if(e instanceof mu?i.U_.$e(e):e instanceof By?i.U_.Je(e):i.U_.Ge(e),!t.isEqual(we.min()))try{const s=await Zy(i.localStore);t.compareTo(s)>=0&&await function(u,h){const f=u.U_.it(h);return f.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.B_.get(y);E&&u.B_.set(y,E.withResumeToken(g.resumeToken,h))}}),f.targetMismatches.forEach((g,y)=>{const E=u.B_.get(g);if(!E)return;u.B_.set(g,E.withResumeToken(kt.EMPTY_BYTE_STRING,E.snapshotVersion)),r_(u,g);const A=new Jr(E.target,g,y,E.sequenceNumber);$d(u,A)}),u.remoteSyncer.applyRemoteEvent(f)}(i,t)}catch(s){se("RemoteStore","Failed to raise snapshot:",s),await Nu(i,s)}}async function Nu(i,e,t){if(!ao(e))throw e;i.k_.add(1),await Oa(i),i.K_.set("Offline"),t||(t=()=>Zy(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await t(),i.k_.delete(1),await Xu(i)})}function s_(i,e){return e().catch(t=>Nu(i,t,e))}async function Yu(i){const e=Te(i),t=ui(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;II(e);)try{const o=await oI(e.localStore,s);if(o===null){e.L_.length===0&&t.a_();break}s=o.batchId,SI(e,o)}catch(o){await Nu(e,o)}o_(e)&&a_(e)}function II(i){return Gi(i)&&i.L_.length<10}function SI(i,e){i.L_.push(e);const t=ui(i);t.s_()&&t.f_&&t.g_(e.mutations)}function o_(i){return Gi(i)&&!ui(i).i_()&&i.L_.length>0}function a_(i){ui(i).start()}async function AI(i){ui(i).w_()}async function RI(i){const e=ui(i);for(const t of i.L_)e.g_(t.mutations)}async function CI(i,e,t){const s=i.L_.shift(),o=Md.from(s,e,t);await s_(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await Yu(i)}async function PI(i,e){e&&ui(i).f_&&await async function(s,o){if(function(h){return f1(h)&&h!==Q.ABORTED}(o.code)){const u=s.L_.shift();ui(s).__(),await s_(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Yu(s)}}(i,e),o_(i)&&a_(i)}async function pg(i,e){const t=Te(i);t.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const s=Gi(t);t.k_.add(3),await Oa(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Xu(t)}async function kI(i,e){const t=Te(i);e?(t.k_.delete(2),await Xu(t)):e||(t.k_.add(2),await Oa(t),t.K_.set("Unknown"))}function lo(i){return i.W_||(i.W_=function(t,s,o){const u=Te(t);return u.b_(),new pI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{Ro:vI.bind(null,i),mo:EI.bind(null,i),po:wI.bind(null,i),R_:TI.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Hd(i)?qd(i):i.K_.set("Unknown")):(await i.W_.stop(),i_(i))})),i.W_}function ui(i){return i.G_||(i.G_=function(t,s,o){const u=Te(t);return u.b_(),new mI(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:AI.bind(null,i),po:PI.bind(null,i),p_:RI.bind(null,i),y_:CI.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await Yu(i)):(await i.G_.stop(),i.L_.length>0&&(se("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,f=new Wd(e,t,h,o,u);return f.start(s),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kd(i,e){if(wr("AsyncQueue",`${e}: ${i}`),ao(i))return new ae(Q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{static emptySet(e){return new Ws(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||pe.comparator(t.key,s.key):(t,s)=>pe.comparator(t.key,s.key),this.keyedMap=ca(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ws;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.z_=new tt(pe.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ve():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class to{constructor(e,t,s,o,u,h,f,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach(f=>{h.push({type:0,doc:f})}),new to(e,t,Ws.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class NI{constructor(){this.queries=gg(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Te(t),u=o.queries;o.queries=gg(),u.forEach((h,f)=>{for(const g of f.J_)g.onError(s)})})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function gg(){return new Qi(i=>Py(i),qu)}async function l_(i,e){const t=Te(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.Y_()&&e.Z_()&&(s=2):(u=new xI,s=e.Z_()?0:1);try{switch(s){case 0:u.H_=await t.onListen(o,!0);break;case 1:u.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const f=Kd(h,`Initialization of query '${$s(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,u),u.J_.push(e),e.ea(t.onlineState),u.H_&&e.ta(u.H_)&&Qd(t)}async function u_(i,e){const t=Te(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.J_.indexOf(e);h>=0&&(u.J_.splice(h,1),u.J_.length===0?o=e.Z_()?0:1:!u.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function DI(i,e){const t=Te(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const f of h.J_)f.ta(o)&&(s=!0);h.H_=o}}s&&Qd(t)}function VI(i,e,t){const s=Te(i),o=s.queries.get(e);if(o)for(const u of o.J_)u.onError(t);s.queries.delete(e)}function Qd(i){i.X_.forEach(e=>{e.next()})}var md,yg;(yg=md||(md={})).na="default",yg.Cache="cache";class c_{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new to(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==md.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e){this.key=e}}class d_{constructor(e){this.key=e}}class LI{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=ky(e),this.ma=new Ws(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new mg,o=t?t.ma:this.ma;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,f=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const S=o.get(E),V=Hu(this.query,A)?A:null,b=!!S&&this.mutatedKeys.has(S.key),B=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let U=!1;S&&V?S.data.isEqual(V.data)?b!==B&&(s.track({type:3,doc:V}),U=!0):this.ya(S,V)||(s.track({type:2,doc:V}),U=!0,(g&&this.Va(V,g)>0||y&&this.Va(V,y)<0)&&(f=!0)):!S&&V?(s.track({type:0,doc:V}),U=!0):S&&!V&&(s.track({type:1,doc:S}),U=!0,(g||y)&&(f=!0)),U&&(V?(h=h.add(V),u=B?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{ma:h,pa:s,ss:f,mutatedKeys:u}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((E,A)=>function(V,b){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return B(V)-B(b)}(E.type,A.type)||this.Va(E.doc,A.doc)),this.wa(s),o=o!=null&&o;const f=t&&!o?this.Sa():[],g=this.Ra.size===0&&this.current&&!o?1:0,y=g!==this.Aa;return this.Aa=g,h.length!==0||y?{snapshot:new to(this.query,e.ma,u,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:f}:{ba:f}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new mg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new d_(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new h_(s))}),t}va(e){this.da=e.ds,this.Ra=Pe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return to.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class OI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class MI{constructor(e){this.key=e,this.Fa=!1}}class bI{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new Qi(f=>Py(f),qu),this.Oa=new Map,this.Na=new Set,this.La=new tt(pe.comparator),this.Ba=new Map,this.ka=new Ud,this.qa={},this.Qa=new Map,this.Ka=eo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function FI(i,e,t=!0){const s=__(i);let o;const u=s.xa.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Ca()):o=await f_(s,e,t,!0),o}async function UI(i,e){const t=__(i);await f_(t,e,!0,!1)}async function f_(i,e,t,s){const o=await aI(i.localStore,Qn(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let f;return s&&(f=await zI(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&n_(i.remoteStore,o),f}async function zI(i,e,t,s,o){i.Ua=(A,S,V)=>async function(B,U,H,X){let ne=U.view.ga(H);ne.ss&&(ne=await hg(B.localStore,U.query,!1).then(({documents:P})=>U.view.ga(P,ne)));const de=X&&X.targetChanges.get(U.targetId),Ie=X&&X.targetMismatches.get(U.targetId)!=null,Ee=U.view.applyChanges(ne,B.isPrimaryClient,de,Ie);return vg(B,U.targetId,Ee.ba),Ee.snapshot}(i,A,S,V);const u=await hg(i.localStore,e,!0),h=new LI(e,u.ds),f=h.ga(u.documents),g=La.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),y=h.applyChanges(f,i.isPrimaryClient,g);vg(i,t,y.ba);const E=new OI(e,t,h);return i.xa.set(e,E),i.Oa.has(t)?i.Oa.get(t).push(e):i.Oa.set(t,[e]),y.snapshot}async function jI(i,e,t){const s=Te(i),o=s.xa.get(e),u=s.Oa.get(o.targetId);if(u.length>1)return s.Oa.set(o.targetId,u.filter(h=>!qu(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await pd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Bd(s.remoteStore,o.targetId),gd(s,o.targetId)}).catch(oo)):(gd(s,o.targetId),await pd(s.localStore,o.targetId,!0))}async function BI(i,e){const t=Te(i),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bd(t.remoteStore,s.targetId))}async function $I(i,e,t){const s=XI(i);try{const o=await function(h,f){const g=Te(h),y=mt.now(),E=f.reduce((V,b)=>V.add(b.key),Pe());let A,S;return g.persistence.runTransaction("Locally write mutations","readwrite",V=>{let b=Tr(),B=Pe();return g.hs.getEntries(V,E).next(U=>{b=U,b.forEach((H,X)=>{X.isValidDocument()||(B=B.add(H))})}).next(()=>g.localDocuments.getOverlayedDocuments(V,b)).next(U=>{A=U;const H=[];for(const X of f){const ne=l1(X,A.get(X.key).overlayedDocument);ne!=null&&H.push(new di(X.key,ne,Ey(ne.value.mapValue),Gn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,y,H,f)}).next(U=>{S=U;const H=U.applyToLocalDocumentSet(A,B);return g.documentOverlayCache.saveOverlays(V,U.batchId,H)})}).then(()=>({batchId:S.batchId,changes:Ny(A)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,f,g){let y=h.qa[h.currentUser.toKey()];y||(y=new tt(xe)),y=y.insert(f,g),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await Ma(s,o.changes),await Yu(s.remoteStore)}catch(o){const u=Kd(o,"Failed to persist write");t.reject(u)}}async function p_(i,e){const t=Te(i);try{const s=await iI(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Ba.get(u);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Ue(h.Fa):o.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await Ma(t,s,e)}catch(s){await oo(s)}}function _g(i,e,t){const s=Te(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((u,h)=>{const f=h.view.ea(e);f.snapshot&&o.push(f.snapshot)}),function(h,f){const g=Te(h);g.onlineState=f;let y=!1;g.queries.forEach((E,A)=>{for(const S of A.J_)S.ea(f)&&(y=!0)}),y&&Qd(g)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function qI(i,e,t){const s=Te(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ba.get(e),u=o&&o.key;if(u){let h=new tt(pe.comparator);h=h.insert(u,Ft.newNoDocument(u,we.min()));const f=Pe().add(u),g=new Qu(we.min(),new Map,new tt(xe),h,f);await p_(s,g),s.La=s.La.remove(u),s.Ba.delete(e),Gd(s)}else await pd(s.localStore,e,!1).then(()=>gd(s,e,t)).catch(oo)}async function HI(i,e){const t=Te(i),s=e.batch.batchId;try{const o=await rI(t.localStore,e);g_(t,s,null),m_(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Ma(t,o)}catch(o){await oo(o)}}async function WI(i,e,t){const s=Te(i);try{const o=await function(h,f){const g=Te(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return g.mutationQueue.lookupMutationBatch(y,f).next(A=>(Ue(A!==null),E=A.keys(),g.mutationQueue.removeMutationBatch(y,A))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>g.localDocuments.getDocuments(y,E))})}(s.localStore,e);g_(s,e,t),m_(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Ma(s,o)}catch(o){await oo(o)}}function m_(i,e){(i.Qa.get(e)||[]).forEach(t=>{t.resolve()}),i.Qa.delete(e)}function g_(i,e,t){const s=Te(i);let o=s.qa[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function gd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),t&&i.Ma.Wa(s,t);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||y_(i,s)})}function y_(i,e){i.Na.delete(e.path.canonicalString());const t=i.La.get(e);t!==null&&(Bd(i.remoteStore,t),i.La=i.La.remove(e),i.Ba.delete(t),Gd(i))}function vg(i,e,t){for(const s of t)s instanceof h_?(i.ka.addReference(s.key,e),KI(i,s)):s instanceof d_?(se("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||y_(i,s.key)):ve()}function KI(i,e){const t=e.key,s=t.path.canonicalString();i.La.get(t)||i.Na.has(s)||(se("SyncEngine","New document in limbo: "+t),i.Na.add(s),Gd(i))}function Gd(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const t=new pe(Ge.fromString(e)),s=i.Ka.next();i.Ba.set(s,new MI(t)),i.La=i.La.insert(t,s),n_(i.remoteStore,new Jr(Qn(Ld(t.path)),s,"TargetPurposeLimboResolution",ju.oe))}}async function Ma(i,e,t){const s=Te(i),o=[],u=[],h=[];s.xa.isEmpty()||(s.xa.forEach((f,g)=>{h.push(s.Ua(g,e,t).then(y=>{var E;if((y||t)&&s.isPrimaryClient){const A=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){o.push(y);const A=jd.zi(g.targetId,y);u.push(A)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(g,y){const E=Te(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>W.forEach(y,S=>W.forEach(S.Wi,V=>E.persistence.referenceDelegate.addReference(A,S.targetId,V)).next(()=>W.forEach(S.Gi,V=>E.persistence.referenceDelegate.removeReference(A,S.targetId,V)))))}catch(A){if(!ao(A))throw A;se("LocalStore","Failed to update sequence numbers: "+A)}for(const A of y){const S=A.targetId;if(!A.fromCache){const V=E.us.get(S),b=V.snapshotVersion,B=V.withLastLimboFreeSnapshotVersion(b);E.us=E.us.insert(S,B)}}}(s.localStore,u))}async function QI(i,e){const t=Te(i);if(!t.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const s=await Jy(t.localStore,e);t.currentUser=e,function(u,h){u.Qa.forEach(f=>{f.forEach(g=>{g.reject(new ae(Q.CANCELLED,h))})}),u.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ma(t,s.Ts)}}function GI(i,e){const t=Te(i),s=t.Ba.get(e);if(s&&s.Fa)return Pe().add(s.key);{let o=Pe();const u=t.Oa.get(e);if(!u)return o;for(const h of u){const f=t.xa.get(h);o=o.unionWith(f.view.fa)}return o}}function __(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=p_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qI.bind(null,e),e.Ma.R_=DI.bind(null,e.eventManager),e.Ma.Wa=VI.bind(null,e.eventManager),e}function XI(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WI.bind(null,e),e}class Du{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return nI(this.persistence,new eI,e.initialUser,this.serializer)}ja(e){return new Yy(zd.ei,this.serializer)}za(e){return new uI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Du.provider={build:()=>new Du};class YI extends Du{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof xu);const s=this.persistence.referenceDelegate.garbageCollector;return new U1(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Yy(s=>xu.ei(s,t),this.serializer)}}class yd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>_g(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=QI.bind(null,this.syncEngine),await kI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NI}()}createDatastore(e){const t=Gu(e.databaseInfo.databaseId),s=function(u){return new fI(u)}(e.databaseInfo);return function(u,h,f,g){return new gI(u,h,f,g)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,u,h,f){return new _I(s,o,u,h,f)}(this.localStore,this.datastore,e.asyncQueue,t=>_g(this.syncEngine,t,0),function(){return fg.p()?new fg:new cI}())}createSyncEngine(e,t){return function(o,u,h,f,g,y,E){const A=new bI(o,u,h,f,g,y);return E&&(A.$a=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=Te(o);se("RemoteStore","RemoteStore shutting down."),u.k_.add(5),await Oa(u),u.Q_.shutdown(),u.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}yd.provider={build:()=>new yd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=bt.UNAUTHENTICATED,this.clientId=yy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async h=>{se("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(se("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Kd(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Hh(i,e){i.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Jy(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Eg(i,e){i.asyncQueue.verifyOperationInProgress();const t=await ZI(i);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(s=>pg(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,o)=>pg(e.remoteStore,o)),i._onlineComponents=e}async function ZI(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hh(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Q.FAILED_PRECONDITION||o.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Xs("Error using user provided cache. Falling back to memory cache: "+t),await Hh(i,new Du)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Hh(i,new YI(void 0));return i._offlineComponents}async function E_(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await Eg(i,i._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await Eg(i,new yd))),i._onlineComponents}function eS(i){return E_(i).then(e=>e.syncEngine)}async function w_(i){const e=await E_(i),t=e.eventManager;return t.onListen=FI.bind(null,e.syncEngine),t.onUnlisten=jI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=BI.bind(null,e.syncEngine),t}function tS(i,e,t={}){const s=new vr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,f,g,y){const E=new v_({next:S=>{E.eu(),h.enqueueAndForget(()=>u_(u,A));const V=S.docs.has(f);!V&&S.fromCache?y.reject(new ae(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&g&&g.source==="server"?y.reject(new ae(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new c_(Ld(f.path),E,{includeMetadataChanges:!0,ua:!0});return l_(u,A)}(await w_(i),i.asyncQueue,e,t,s)),s.promise}function nS(i,e,t={}){const s=new vr;return i.asyncQueue.enqueueAndForget(async()=>function(u,h,f,g,y){const E=new v_({next:S=>{E.eu(),h.enqueueAndForget(()=>u_(u,A)),S.fromCache&&g.source==="server"?y.reject(new ae(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new c_(f,E,{includeMetadataChanges:!0,ua:!0});return l_(u,A)}(await w_(i),i.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(i,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rS(i,e,t,s){if(e===!0&&s===!0)throw new ae(Q.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Tg(i){if(!pe.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ig(i){if(pe.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ju(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve()}function Ir(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ju(i);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=T_((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zu{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sg(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new mT;switch(s.type){case"firstParty":return new vT(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=wg.get(t);s&&(se("ComponentProvider","Removing Datastore"),wg.delete(t),s.terminate())}(this),Promise.resolve()}}function iS(i,e,t,s={}){var o;const u=(i=Ir(i,Zu))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),s.mockUserToken){let f,g;if(typeof s.mockUserToken=="string")f=s.mockUserToken,g=bt.MOCK_USER;else{f=HE(s.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new bt(y)}i._authCredentials=new gT(new gy(f,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new uo(this.firestore,e,this._query)}}class $t{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class ri extends uo{constructor(e,t,s){super(e,t,Ld(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new pe(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function ya(i,e,...t){if(i=un(i),I_("collection","path",e),i instanceof Zu){const s=Ge.fromString(e,...t);return Ig(s),new ri(i,null,s)}{if(!(i instanceof $t||i instanceof ri))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ge.fromString(e,...t));return Ig(s),new ri(i.firestore,null,s)}}function gu(i,e,...t){if(i=un(i),arguments.length===1&&(e=yy.newId()),I_("doc","path",e),i instanceof Zu){const s=Ge.fromString(e,...t);return Tg(s),new $t(i,null,new pe(s))}{if(!(i instanceof $t||i instanceof ri))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ge.fromString(e,...t));return Tg(s),new $t(i.firestore,i instanceof ri?i.converter:null,new pe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new e_(this,"async_queue_retry"),this.fu=()=>{const s=qh();s&&se("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new vr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!ao(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let f=h.message||"";return h.stack&&(f=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),f}(s);throw wr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Wd.createAndSchedule(this,e,t,s,u=>this.Su(u));return this.du.push(o),o}pu(){this.Au&&ve()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class ba extends Zu{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Ag,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ag(e),this._firestoreClient=void 0,await e}}}function sS(i,e){const t=typeof i=="object"?i:sT(),s=typeof i=="string"?i:"(default)",o=nT(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=BE("firestore");u&&iS(o,...u)}return o}function Xd(i){if(i._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||oS(i),i._firestoreClient}function oS(i){var e,t,s;const o=i._freezeSettings(),u=function(f,g,y,E){return new LT(f,g,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,T_(E.experimentalLongPollingOptions),E.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new JI(i._authCredentials,i._appCheckCredentials,i._queue,u,i._componentsProvider&&function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._byteString=e}static fromBase64String(e){try{return new no(kt.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new no(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=/^__.*__$/;class lS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new di(e,this.data,this.fieldMask,t,this.fieldTransforms):new Va(e,this.data,t,this.fieldTransforms)}}class S_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new di(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function A_(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class ef{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Fu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new ef(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Lu(e),o}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Vu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(A_(this.Mu)&&aS.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class uS{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Gu(e)}$u(e,t,s,o=!1){return new ef({Mu:e,methodName:t,Ku:s,path:Pt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(i){const e=i._freezeSettings(),t=Gu(i._databaseId);return new uS(i._databaseId,!!e.ignoreUndefinedProperties,t)}function cS(i,e,t,s,o,u={}){const h=i.$u(u.merge||u.mergeFields?2:0,e,t,o);nf("Data must be an object, but it was:",h,s);const f=R_(s,h);let g,y;if(u.merge)g=new ln(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const S=_d(e,A,t);if(!h.contains(S))throw new ae(Q.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);P_(E,S)||E.push(S)}g=new ln(E),y=h.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,y=h.fieldTransforms;return new lS(new Zt(f),g,y)}class tc extends Yd{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tc}}function hS(i,e,t,s){const o=i.$u(1,e,t);nf("Data must be an object, but it was:",o,s);const u=[],h=Zt.empty();hi(s,(g,y)=>{const E=rf(e,g,t);y=un(y);const A=o.Bu(E);if(y instanceof tc)u.push(E);else{const S=Fa(y,A);S!=null&&(u.push(E),h.set(E,S))}});const f=new ln(u);return new S_(h,f,o.fieldTransforms)}function dS(i,e,t,s,o,u){const h=i.$u(1,e,t),f=[_d(e,s,t)],g=[o];if(u.length%2!=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)f.push(_d(e,u[S])),g.push(u[S+1]);const y=[],E=Zt.empty();for(let S=f.length-1;S>=0;--S)if(!P_(y,f[S])){const V=f[S];let b=g[S];b=un(b);const B=h.Bu(V);if(b instanceof tc)y.push(V);else{const U=Fa(b,B);U!=null&&(y.push(V),E.set(V,U))}}const A=new ln(y);return new S_(E,A,h.fieldTransforms)}function fS(i,e,t,s=!1){return Fa(t,i.$u(s?4:3,e))}function Fa(i,e){if(C_(i=un(i)))return nf("Unsupported field value:",e,i),R_(i,e);if(i instanceof Yd)return function(s,o){if(!A_(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const u=[];let h=0;for(const f of s){let g=Fa(f,o.ku(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(i,e)}return function(s,o){if((s=un(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return n1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=mt.fromDate(s);return{timestampValue:ku(o.serializer,u)}}if(s instanceof mt){const u=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ku(o.serializer,u)}}if(s instanceof Jd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof no)return{bytesValue:qy(o.serializer,s._byteString)};if(s instanceof $t){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Fd(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Zd)return function(h,f){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw f.qu("VectorValues must only contain numeric values.");return Od(f.serializer,g)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${Ju(s)}`)}(i,e)}function R_(i,e){const t={};return _y(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(i,(s,o)=>{const u=Fa(o,e.Ou(s));u!=null&&(t[s]=u)}),{mapValue:{fields:t}}}function C_(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof mt||i instanceof Jd||i instanceof no||i instanceof $t||i instanceof Yd||i instanceof Zd)}function nf(i,e,t){if(!C_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=Ju(t);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function _d(i,e,t){if((e=un(e))instanceof ec)return e._internalPath;if(typeof e=="string")return rf(i,e);throw Vu("Field path arguments must be of type string or ",i,!1,void 0,t)}const pS=new RegExp("[~\\*/\\[\\]]");function rf(i,e,t){if(e.search(pS)>=0)throw Vu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ec(...e.split("."))._internalPath}catch{throw Vu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Vu(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ae(Q.INVALID_ARGUMENT,f+i+g)}function P_(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class mS extends k_{data(){return super.data()}}function sf(i,e){return typeof e=="string"?rf(i,e):e instanceof ec?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class of{}class yS extends of{}function x_(i,e,...t){let s=[];e instanceof of&&s.push(e),s=s.concat(t),function(u){const h=u.filter(g=>g instanceof af).length,f=u.filter(g=>g instanceof nc).length;if(h>1||h>0&&f>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)i=o._apply(i);return i}class nc extends yS{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new nc(e,t,s)}_apply(e){const t=this._parse(e);return N_(e._query,t),new uo(e.firestore,e.converter,ld(e._query,t))}_parse(e){const t=tf(e.firestore);return function(u,h,f,g,y,E,A){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Cg(A,E);const V=[];for(const b of A)V.push(Rg(g,u,b));S={arrayValue:{values:V}}}else S=Rg(g,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Cg(A,E),S=fS(f,h,A,E==="in"||E==="not-in");return ut.create(y,E,S)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function _S(i,e,t){const s=e,o=sf("where",i);return nc._create(o,s,t)}class af extends of{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new af(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const f=u.getFlattenedFilters();for(const g of f)N_(h,g),h=ld(h,g)}(e._query,t),new uo(e.firestore,e.converter,ld(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Rg(i,e,t){if(typeof(t=un(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cy(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ge.fromString(t));if(!pe.isDocumentKey(s))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Km(i,new pe(s))}if(t instanceof $t)return Km(i,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ju(t)}.`)}function Cg(i,e){if(!Array.isArray(i)||i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N_(i,e){const t=function(o,u){for(const h of o)for(const f of h.getFlattenedFilters())if(u.indexOf(f.op)>=0)return f.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class vS{convertValue(e,t="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return hi(e,(o,u)=>{s[o]=this.convertValue(u,t)}),s}convertVectorValue(e){var t,s,o;const u=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>st(h.doubleValue));return new Zd(u)}convertGeoPoint(e){return new Jd(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=$u(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const t=oi(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ge.fromString(e);Ue(Xy(s));const o=new Sa(s.get(1),s.get(3)),u=new pe(s.popFirst(5));return o.isEqual(t)||wr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(i,e,t){let s;return s=i?t.merge||t.mergeFields?i.toFirestore(e,t):i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class D_ extends k_{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(sf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class yu extends D_{data(e={}){return super.data(e)}}class wS{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new da(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new yu(this._firestore,this._userDataWriter,s.key,s,new da(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(f=>{const g=new yu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(f=>u||f.type!==3).map(f=>{const g=new yu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new da(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return f.type!==0&&(y=h.indexOf(f.doc.key),h=h.delete(f.doc.key)),f.type!==1&&(h=h.add(f.doc),E=h.indexOf(f.doc.key)),{type:TS(f.type),doc:g,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function TS(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V_(i){i=Ir(i,$t);const e=Ir(i.firestore,ba);return tS(Xd(e),i._key).then(t=>AS(e,i,t))}class L_ extends vS{constructor(e){super(),this.firestore=e}convertBytes(e){return new no(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}function _u(i){i=Ir(i,uo);const e=Ir(i.firestore,ba),t=Xd(e),s=new L_(e);return gS(i._query),nS(t,i._query).then(o=>new wS(e,s,i,o))}function IS(i,e,t){i=Ir(i,$t);const s=Ir(i.firestore,ba),o=ES(i.converter,e,t);return O_(s,[cS(tf(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Gn.none())])}function SS(i,e,t,...s){i=Ir(i,$t);const o=Ir(i.firestore,ba),u=tf(o);let h;return h=typeof(e=un(e))=="string"||e instanceof ec?dS(u,"updateDoc",i._key,e,t,s):hS(u,"updateDoc",i._key,e),O_(o,[h.toMutation(i._key,Gn.exists(!0))])}function O_(i,e){return function(s,o){const u=new vr;return s.asyncQueue.enqueueAndForget(async()=>$I(await eS(s),o,u)),u.promise}(Xd(i),e)}function AS(i,e,t){const s=t.docs.get(e._key),o=new L_(i);return new D_(i,o,e._key,s,new da(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){so=o})(zu),Gs(new Hi("firestore",(s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),f=new ba(new yT(s.getProvider("auth-internal")),new wT(s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sa(y.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),f._setSettings(u),f},"PUBLIC").setMultipleInstances(!0)),ni(jm,"4.7.5",e),ni(jm,"4.7.5","esm2017")})();var RS="firebase",CS="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni(RS,CS,"app");function M_(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(t[s[o]]=i[s[o]]);return t}function b_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PS=b_,F_=new Na("auth","Firebase",b_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Cd("@firebase/auth");function kS(i,...e){Lu.logLevel<=Ce.WARN&&Lu.warn(`Auth (${zu}): ${i}`,...e)}function vu(i,...e){Lu.logLevel<=Ce.ERROR&&Lu.error(`Auth (${zu}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(i,...e){throw lf(i,...e)}function U_(i,...e){return lf(i,...e)}function z_(i,e,t){const s=Object.assign(Object.assign({},PS()),{[e]:t});return new Na("auth","Firebase",s).create(e,{appName:i.name})}function Eu(i){return z_(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lf(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return F_.create(i,...e)}function Fe(i,e,...t){if(!i)throw lf(e,...t)}function _a(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vu(e),new Error(e)}function Ou(i,e){i||_a(e)}function xS(){return kg()==="http:"||kg()==="https:"}function kg(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xS()||GE()||"connection"in navigator)?navigator.onLine:!0}function DS(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ou(t>e,"Short delay should be less than long delay!"),this.isMobile=WE()||XE()}get(){return NS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(i,e){Ou(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new Ua(3e4,6e4);function B_(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function rc(i,e,t,s,o={}){return $_(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const f=iy(Object.assign({key:i.config.apiKey},h)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const y=Object.assign({method:e,headers:g},u);return QE()||(y.referrerPolicy="no-referrer"),j_.fetch()(q_(i,i.config.apiHost,t,f),y)})}async function $_(i,e,t){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},LS),e);try{const o=new MS(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw lu(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const f=u.ok?h.errorMessage:h.error.message,[g,y]=f.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(i,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw lu(i,"email-already-in-use",h);if(g==="USER_DISABLED")throw lu(i,"user-disabled",h);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw z_(i,E,y);Pg(i,E)}}catch(o){if(o instanceof ci)throw o;Pg(i,"network-request-failed",{message:String(o)})}}function q_(i,e,t,s){const o=`${e}${t}?${s}`;return i.config.emulator?VS(i.config,o):`${i.config.apiScheme}://${o}`}class MS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(U_(this.auth,"network-request-failed")),OS.get())})}}function lu(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=U_(i,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(i,e){return rc(i,"POST","/v1/accounts:delete",e)}async function H_(i,e){return rc(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FS(i,e=!1){const t=un(i),s=await t.getIdToken(e),o=W_(s);Fe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:va(Wh(o.auth_time)),issuedAtTime:va(Wh(o.iat)),expirationTime:va(Wh(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Wh(i){return Number(i)*1e3}function W_(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const o=ny(t);return o?JSON.parse(o):(vu("Failed to decode base64 JWT payload"),null)}catch(o){return vu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function xg(i){const e=W_(i);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ci&&US(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function US({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(i){var e;const t=i.auth,s=await i.getIdToken(),o=await vd(i,H_(t,{idToken:s}));Fe(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];i._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?K_(u.providerUserInfo):[],f=BS(i.providerData,h),g=i.isAnonymous,y=!(i.email&&u.passwordHash)&&!(f!=null&&f.length),E=g?y:!1,A={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:f,metadata:new Ed(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(i,A)}async function jS(i){const e=un(i);await Mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BS(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function K_(i){return i.map(e=>{var{providerId:t}=e,s=M_(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $S(i,e){const t=await $_(i,{},async()=>{const s=iy({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=q_(i,o,"/v1/token",`key=${u}`),f=await i._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",j_.fetch()(h,{method:"POST",headers:f,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qS(i,e){return rc(i,"POST","/v2/accounts:revokeToken",B_(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=xg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await $S(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new Ks;return s&&(Fe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Fe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return _a("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(i,e){Fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Zr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,u=M_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Ed(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await vd(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FS(this,e)}reload(){return jS(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mu(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(la(this.auth.app))return Promise.reject(Eu(this.auth));const e=await this.getIdToken();return await vd(this,bS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,u,h,f,g,y,E;const A=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,V=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,b=(h=t.photoURL)!==null&&h!==void 0?h:void 0,B=(f=t.tenantId)!==null&&f!==void 0?f:void 0,U=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,H=(y=t.createdAt)!==null&&y!==void 0?y:void 0,X=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ne,emailVerified:de,isAnonymous:Ie,providerData:Ee,stsTokenManager:P}=t;Fe(ne&&P,e,"internal-error");const T=Ks.fromJSON(this.name,P);Fe(typeof ne=="string",e,"internal-error"),Xr(A,e.name),Xr(S,e.name),Fe(typeof de=="boolean",e,"internal-error"),Fe(typeof Ie=="boolean",e,"internal-error"),Xr(V,e.name),Xr(b,e.name),Xr(B,e.name),Xr(U,e.name),Xr(H,e.name),Xr(X,e.name);const I=new Zr({uid:ne,auth:e,email:S,emailVerified:de,displayName:A,isAnonymous:Ie,photoURL:b,phoneNumber:V,tenantId:B,stsTokenManager:T,createdAt:H,lastLoginAt:X});return Ee&&Array.isArray(Ee)&&(I.providerData=Ee.map(k=>Object.assign({},k))),U&&(I._redirectEventId=U),I}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ks;o.updateFromServerResponse(t);const u=new Zr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Mu(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?K_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),f=new Ks;f.updateFromIdToken(s);const g=new Zr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ed(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=new Map;function $i(i){Ou(i instanceof Function,"Expected a class definition");let e=Ng.get(i);return e?(Ou(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Ng.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Q_.type="NONE";const Dg=Q_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kh(i,e,t){return`firebase:${i}:${e}:${t}`}class Qs{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Kh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Kh("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Zr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Qs($i(Dg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||$i(Dg);const h=Kh(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const E=await y._get(h);if(E){const A=Zr._fromJSON(e,E);y!==u&&(f=A),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Qs(u,e,s):(u=g[0],f&&await u._set(h,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new Qs(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(HS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XS(e))return"Blackberry";if(YS(e))return"Webos";if(WS(e))return"Safari";if((e.includes("chrome/")||KS(e))&&!e.includes("edge/"))return"Chrome";if(GS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function HS(i=On()){return/firefox\//i.test(i)}function WS(i=On()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KS(i=On()){return/crios\//i.test(i)}function QS(i=On()){return/iemobile/i.test(i)}function GS(i=On()){return/android/i.test(i)}function XS(i=On()){return/blackberry/i.test(i)}function YS(i=On()){return/webos/i.test(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(i,e=[]){let t;switch(i){case"Browser":t=Vg(On());break;case"Worker":t=`${Vg(On())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zu}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,f)=>{try{const g=e(u);h(g)}catch(g){f(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(i,e={}){return rc(i,"GET","/v2/passwordPolicy",B_(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=6;class tA{constructor(e){var t,s,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:eA,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,u,h,f;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(s=g.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(f=g.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),g}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lg(this),this.idTokenSubscription=new Lg(this),this.beforeStateQueue=new JS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=F_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$i(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await H_(this,{idToken:e}),s=await Zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(la(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(f,f))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===f)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(la(this.app))return Promise.reject(Eu(this));const t=e?un(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return la(this.app)?Promise.reject(Eu(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return la(this.app)?Promise.reject(Eu(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZS(this),t=new tA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Na("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&$i(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[$i(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(f,this,"internal-error"),f.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=G_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kS(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rA(i){return un(i)}class Lg{constructor(e){this.auth=e,this.observer=null,this.addObserver=rw(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function iA(i,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map($i);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}new Ua(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ua(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ua(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Ua(5e3,15e3);var Og="@firebase/auth",Mg="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aA(i){Gs(new Hi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:f}=s.options;Fe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:h,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:G_(i)},y=new nA(s,o,u,g);return iA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Gs(new Hi("auth-internal",e=>{const t=rA(e.getProvider("auth").getImmediate());return(s=>new sA(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(Og,Mg,oA(i)),ni(Og,Mg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=5*60;$E("authIdTokenMaxAge");aA("Browser");const uA={apiKey:"AIzaSyAwnyDtmSyiegQSdWO9v95Ai3EhuNMkspI",authDomain:"kstech-52469.firebaseapp.com",projectId:"kstech-52469",storageBucket:"kstech-52469.firebasestorage.app",messagingSenderId:"385469798085",appId:"1:385469798085:web:3b36051545b42ed5e102ac",measurementId:"G-V5E1N60Y7G"},cA=ay(uA),Yr=sS(cA),X_=q.createContext();function hA({children:i}){const[e,t]=q.useState(null);return he.jsx(X_.Provider,{value:{mobileNumber:e,setMobileNumber:t},children:i})}function Y_(){return q.useContext(X_)}const dA=()=>{const[i,e]=q.useState(""),[t,s]=q.useState(""),[o,u]=q.useState(""),h=Wg(),{setMobileNumber:f}=Y_(),g=async()=>{if(!i||!t){u("Please enter both mobile number and password.");return}if(!/^\d{10}$/.test(i)){u("Please enter a valid 10-digit mobile number.");return}try{const y=x_(ya(Yr,"users")),E=await _u(y);let A=!1,S=null;for(const V of E.docs){const b=ya(Yr,`users/${V.id}/customers`);if((await V_(gu(b,i))).exists()){A=!0,S=V.data();break}}if(!A){u("Mobile number is not registered as a customer.");return}S.password===t?(u(""),f(i),h("/kushagraStorePublic/KSPublic/")):u("Incorrect password. Please try again.")}catch(y){console.error("Error checking login:",y),u("An error occurred during login. Please try again.")}};return he.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",width:"100vw"},children:he.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"90%",gap:5},children:[he.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",alignItems:"center",gap:5},children:[he.jsx("h1",{style:{margin:0},children:"Login"}),he.jsx("input",{value:i,onChange:y=>e(y.target.value),placeholder:"Mobile Number",type:"number",style:{padding:10,width:"90%",border:"3px solid black",borderRadius:5}})]}),he.jsx("input",{value:t,onChange:y=>s(y.target.value),placeholder:"Password",type:"password",style:{padding:10,width:"90%",border:"3px solid black",borderRadius:5}}),o&&he.jsx("p",{style:{color:"red",fontSize:"0.9em",margin:"5px 0"},children:o}),he.jsx("button",{onClick:g,style:{padding:10,width:"97%",border:"3px solid black",borderRadius:5,backgroundColor:"black",color:"white"},children:"Login"})]})})};function fA(){const[i,e]=q.useState(""),[t,s]=q.useState(""),[o,u]=q.useState([]),[h,f]=q.useState([]);q.useState(null);const{mobileNumber:g}=Y_(),[y,E]=q.useState({}),[A,S]=q.useState({}),[V,b]=q.useState(null);q.useEffect(()=>{(async()=>{let T=[];try{const I=await _u(ya(Yr,"users"));for(const k of I.docs){const N=ya(Yr,`users/${k.id}/customers`),L=x_(N,_S("customerMobileNumber","==",g));if(!(await _u(L)).empty){const $e=k.data().shopName;$e&&T.push({shopName:$e,shopkeeperId:k.id})}}u(T)}catch(I){console.error("Error fetching shopkeepers:",I)}})()},[g]);const B=async(P,T)=>{b(P);try{const k=(await _u(ya(Yr,`users/${P}/list`))).docs.map(C=>({id:C.id,...C.data()}));f(k);const N=gu(Yr,`users/${P}/customers`,g),L=await V_(N);if(L.exists()){const{quantities:C,visibility:$e}=L.data();E(C||{}),S($e||{})}else E({}),S({})}catch(I){console.error("Error fetching shop items:",I)}},U=async(P,T)=>{if(V){const I=gu(Yr,`users/${V}/customers`,g);await IS(I,{quantities:P,visibility:T},{merge:!0})}},H=async(P,T)=>{const I=Math.max(0,(y[P]||0)+T),k={...y,[P]:I};E(k);const N={...A,[P]:I>0};S(N),await U(k,N)},X=async P=>{const T={...y,[P]:1};E(T);const I={...A,[P]:!0};S(I),await U(T,I)},ne=async()=>{if(E({}),S({}),V){const P=gu(Yr,`users/${V}/customers`,g);await SS(P,{quantities:{},visibility:{}})}},de=(P,T)=>{if(!T)return P;const I=new RegExp(`(${T})`,"gi");return P.replace(I,'<span style="color: blue; font-weight: bold;">$1</span>')},Ie=h.filter(P=>P.name.toLowerCase().includes(i.toLowerCase())).sort((P,T)=>P.name.localeCompare(T.name)),Ee=h.reduce((P,T)=>P+T.prices.reduce((I,k,N)=>{const L=`${T.id}-${N}`,C=y[L]||0;return I+k.sellingPrice*C},0),0);return he.jsxs("div",{style:{padding:"10px",paddingTop:0,display:"flex",flexDirection:"column",alignItems:"center",maxWidth:"100%",backgroundColor:"white"},children:[he.jsxs("div",{style:{position:"fixed",backgroundColor:"white",padding:8,paddingTop:5,width:"100vw",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[he.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"90%"},children:he.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"18px"},children:"Shopkeepers"})}),he.jsx("input",{type:"text",placeholder:"Search shop names...",value:t,onChange:P=>s(P.target.value),style:{padding:"5px",width:"85%",fontSize:"14px",height:30,marginBottom:"20px"}}),he.jsx("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"10px"},children:o.filter(P=>P.shopName.toLowerCase().includes(t.toLowerCase())).map((P,T)=>he.jsx("div",{onClick:()=>B(P.shopkeeperId,P.shopName),style:{padding:"10px",backgroundColor:"black",borderRadius:"5px",boxShadow:"0 0 5px rgba(0, 0, 0, 0.1)",minWidth:"150px",textAlign:"center",color:"white",cursor:"pointer"},children:P.shopName},T))})]}),he.jsx("div",{style:{marginTop:"200px",width:"90%"},children:h.length===0?he.jsx("div",{}):he.jsxs("div",{style:{padding:"10px",paddingTop:0,display:"flex",flexDirection:"column",alignItems:"center",width:"95%",backgroundColor:"white"},children:[he.jsxs("div",{style:{position:"fixed",backgroundColor:"white",padding:8,paddingTop:5,width:"100vw",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},children:[he.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"90%",marginTop:-50},children:he.jsx("h1",{style:{margin:"0 0 10px 0",fontSize:"18px"},children:"Item List"})}),he.jsx("div",{onClick:ne,style:{padding:7,backgroundColor:"red",color:"white",position:"absolute",top:-50,right:20,borderRadius:5,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"Reset All"}),he.jsx("input",{type:"text",placeholder:"Search items...",value:i,onChange:P=>e(P.target.value),style:{padding:"5px",width:"85%",fontSize:"14px",height:30}})]}),he.jsxs("table",{border:"1",cellPadding:"5",style:{maxWidth:"100%",textAlign:"center",fontSize:"12px",marginBottom:"10px",marginTop:40,border:"none"},children:[he.jsx("thead",{children:he.jsxs("tr",{style:{position:"sticky",top:85,backgroundColor:"#fff",zIndex:5},children:[he.jsx("th",{children:"No"}),he.jsx("th",{children:"Name"}),he.jsx("th",{children:"MRP"}),he.jsx("th",{children:"Qty"}),he.jsx("th",{children:"SP"}),he.jsx("th",{children:"Qty Ctrl"}),he.jsx("div",{style:{boxShadow:"0px 10px 10px rgba(0, 0, 0, 0.3)",borderRadius:5,backgroundColor:"black",display:"flex",alignItems:"center",justifyContent:"center"},children:he.jsx("th",{style:{backgroundColor:"black",color:"white",borderRadius:5,fontSize:16,border:"none"},children:Ee})})]})}),he.jsx("tbody",{children:Ie.map((P,T)=>he.jsx(i0.Fragment,{children:P.prices.map((I,k)=>{const N=`${P.id}-${k}`,L=y[N]||0,C=I.sellingPrice*L;return he.jsxs("tr",{style:{backgroundColor:"white"},children:[he.jsx("td",{children:k===0?T+1:""}),he.jsx("td",{dangerouslySetInnerHTML:{__html:k===0?de(P.name,i):""}}),he.jsx("td",{children:I.mrp}),he.jsx("td",{children:I.quantity}),he.jsx("td",{children:he.jsx("span",{style:{boxShadow:"0px 10px 10px rgba(0, 0, 0, 0.3)",padding:5,borderRadius:5,color:"blue"},children:I.sellingPrice})}),he.jsx("td",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:2},children:A[N]?he.jsxs("div",{style:{display:"flex",gap:"2px",alignItems:"center",justifyContent:"center"},children:[he.jsx("button",{style:{backgroundColor:"red",color:"white",borderRadius:5,borderColor:"red"},onClick:()=>H(N,-1),children:"-"}),he.jsx("span",{children:L}),he.jsx("button",{style:{backgroundColor:"green",color:"white",borderRadius:5,borderColor:"green"},onClick:()=>H(N,1),children:"+"})]}):he.jsx("button",{style:{backgroundColor:"blue",color:"white",borderRadius:5,border:"none",padding:5},onClick:()=>X(N),children:"Add"})}),A[N]?he.jsx("td",{style:{backgroundColor:"black",color:"white",borderRadius:5},children:C===0?"":C}):he.jsx("td",{children:C===0?"":C})]},N)})},P.id))})]})]})})]})}c0.createRoot(document.getElementById("root")).render(he.jsx(q.StrictMode,{children:he.jsx(hA,{children:he.jsx(SE,{children:he.jsxs(eE,{children:[he.jsx(Gh,{path:"/kushagraStorePublic/",element:he.jsx(dA,{})}),he.jsx(Gh,{path:"/kushagraStorePublic/KSPublic/",element:he.jsx(fA,{})})]})})})}));
